!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a,d){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d(c):"function"==typeof define&&define.amd?define(["exports"],d):d(a.async=a.async||{})}(this,function(c){"use strict";function e(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function f(a,b,c){return b=fb(void 0===b?a.length-1:b,0),function(){for(var d=arguments,f=-1,g=fb(d.length-b,0),h=Array(g);++f<g;)h[f]=d[b+f];f=-1;for(var i=Array(b+1);++f<b;)i[f]=d[f];return i[b]=c(h),e(a,this,i)}}function g(a){return a}function h(a,b){return f(a,b,g)}function i(a){return h(function(b,c){var d=gb(function(c,d){var e=this;return a(b,function(a,b){a.apply(e,c.concat(b))},d)});return c.length?d.apply(this,c):d})}function j(a){var b=mb.call(a,ob),c=a[ob];try{a[ob]=void 0;var d=!0}catch(e){}var f=nb.call(a);return d&&(b?a[ob]=c:delete a[ob]),f}function k(a){return qb.call(a)}function l(a){return null==a?void 0===a?sb:rb:tb&&tb in Object(a)?j(a):k(a)}function m(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function n(a){if(!m(a))return!1;var b=l(a);return b==vb||b==wb||b==ub||b==xb}function o(a){return"number"==typeof a&&a>-1&&a%1==0&&yb>=a}function p(a){return null!=a&&o(a.length)&&!n(a)}function q(){}function r(a){return function(){if(null!==a){var b=a;a=null,b.apply(this,arguments)}}}function s(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function t(a){return null!=a&&"object"==typeof a}function u(a){return t(a)&&l(a)==Cb}function v(){return!1}function w(a,b){return b=null==b?Ob:b,!!b&&("number"==typeof a||Pb.test(a))&&a>-1&&a%1==0&&b>a}function x(a){return t(a)&&o(a.length)&&!!mc[l(a)]}function y(a){return function(b){return a(b)}}function z(a,b){var c=Hb(a),d=!c&&Gb(a),e=!c&&!d&&Nb(a),f=!c&&!d&&!e&&uc(a),g=c||d||e||f,h=g?s(a.length,String):[],i=h.length;for(var j in a)!b&&!wc.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||w(j,i))||h.push(j);return h}function A(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||xc;return a===c}function B(a,b){return function(c){return a(b(c))}}function C(a){if(!A(a))return yc(a);var b=[];for(var c in Object(a))Ac.call(a,c)&&"constructor"!=c&&b.push(c);return b}function D(a){return p(a)?z(a):C(a)}function E(a){var b=-1,c=a.length;return function(){return++b<c?{value:a[b],key:b}:null}}function F(a){var b=-1;return function(){var c=a.next();return c.done?null:(b++,{value:c.value,key:b})}}function G(a){var b=D(a),c=-1,d=b.length;return function(){var e=b[++c];return d>c?{value:a[e],key:e}:null}}function H(a){if(p(a))return E(a);var b=Bb(a);return b?F(b):G(a)}function I(a){return function(){if(null===a)throw new Error("Callback was already called.");var b=a;a=null,b.apply(this,arguments)}}function J(a){return function(b,c,d){function e(a,b){if(i-=1,a)h=!0,d(a);else{if(b===zb||h&&0>=i)return h=!0,d(null);f()}}function f(){for(;a>i&&!h;){var b=g();if(null===b)return h=!0,void(0>=i&&d(null));i+=1,c(b.value,b.key,I(e))}}if(d=r(d||q),0>=a||!b)return d(null);var g=H(b),h=!1,i=0;f()}}function K(a,b,c,d){J(b)(a,c,d)}function L(a,b){return function(c,d,e){return a(c,b,d,e)}}function M(a,b,c){function d(a,b){a?c(a):(++f===g||b===zb)&&c(null)}c=r(c||q);var e=0,f=0,g=a.length;for(0===g&&c(null);g>e;e++)b(a[e],e,I(d))}function N(a){return function(b,c,d){return a(Cc,b,c,d)}}function O(a,b,c,d){d=d||q,b=b||[];var e=[],f=0;a(b,function(a,b,d){var g=f++;c(a,function(a,b){e[g]=b,d(a)})},function(a){d(a,e)})}function P(a){return function(b,c,d,e){return a(J(c),b,d,e)}}function Q(a){return gb(function(b,c){var d;try{d=a.apply(this,b)}catch(e){return c(e)}m(d)&&"function"==typeof d.then?d.then(function(a){c(null,a)},function(a){c(a.message?a:new Error(a))}):c(null,d)})}function R(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function S(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}function T(a,b){return a&&Jc(a,b,D)}function U(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function V(a){return a!==a}function W(a,b,c){for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function X(a,b,c){return b===b?W(a,b,c):U(a,V,c)}function Y(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function Z(a){return"symbol"==typeof a||t(a)&&l(a)==Lc}function $(a){if("string"==typeof a)return a;if(Hb(a))return Y(a,$)+"";if(Z(a))return Oc?Oc.call(a):"";var b=a+"";return"0"==b&&1/a==-Mc?"-0":b}function _(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function aa(a,b,c){var d=a.length;return c=void 0===c?d:c,!b&&c>=d?a:_(a,b,c)}function ba(a,b){for(var c=a.length;c--&&X(b,a[c],0)>-1;);return c}function ca(a,b){for(var c=-1,d=a.length;++c<d&&X(b,a[c],0)>-1;);return c}function da(a){return a.split("")}function ea(a){return Wc.test(a)}function fa(a){return a.match(od)||[]}function ga(a){return ea(a)?fa(a):da(a)}function ha(a){return null==a?"":$(a)}function ia(a,b,c){if(a=ha(a),a&&(c||void 0===b))return a.replace(pd,"");if(!a||!(b=$(b)))return a;var d=ga(a),e=ga(b),f=ca(d,e),g=ba(d,e)+1;return aa(d,f,g).join("")}function ja(a){return a=a.toString().replace(td,""),a=a.match(qd)[2].replace(" ",""),a=a?a.split(rd):[],a=a.map(function(a){return ia(a.replace(sd,""))})}function ka(a,b){var c={};T(a,function(a,b){function d(b,c){var d=Y(e,function(a){return b[a]});d.push(c),a.apply(null,d)}var e;if(Hb(a))e=a.slice(0,-1),a=a[a.length-1],c[b]=e.concat(e.length>0?d:a);else if(1===a.length)c[b]=a;else{if(e=ja(a),0===a.length&&0===e.length)throw new Error("autoInject task functions require explicit parameters.");e.pop(),c[b]=e.concat(d)}}),Kc(c,b)}function la(a){setTimeout(a,0)}function ma(a){return h(function(b,c){a(function(){b.apply(null,c)})})}function na(){this.head=this.tail=null,this.length=0}function oa(a,b){a.length=1,a.head=a.tail=b}function pa(a,b,c){function d(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");if(j.started=!0,Hb(a)||(a=[a]),0===a.length&&j.idle())return wd(function(){j.drain()});for(var d=0,e=a.length;e>d;d++){var f={data:a[d],callback:c||q};b?j._tasks.unshift(f):j._tasks.push(f)}wd(j.process)}function e(a){return h(function(b){f-=1;for(var c=0,d=a.length;d>c;c++){var e=a[c],h=X(g,e,0);h>=0&&g.splice(h),e.callback.apply(e,b),null!=b[0]&&j.error(b[0],e.data)}f<=j.concurrency-j.buffer&&j.unsaturated(),j.idle()&&j.drain(),j.process()})}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var f=0,g=[],i=!1,j={_tasks:new na,concurrency:b,payload:c,saturated:q,unsaturated:q,buffer:b/4,empty:q,drain:q,error:q,started:!1,paused:!1,push:function(a,b){d(a,!1,b)},kill:function(){j.drain=q,j._tasks.empty()},unshift:function(a,b){d(a,!0,b)},process:function(){if(!i){for(i=!0;!j.paused&&f<j.concurrency&&j._tasks.length;){var b=[],c=[],d=j._tasks.length;j.payload&&(d=Math.min(d,j.payload));for(var h=0;d>h;h++){var k=j._tasks.shift();b.push(k),c.push(k.data)}0===j._tasks.length&&j.empty(),f+=1,g.push(b[0]),f===j.concurrency&&j.saturated();var l=I(e(b));a(c,l)}i=!1}},length:function(){return j._tasks.length},running:function(){return f},workersList:function(){return g},idle:function(){return j._tasks.length+f===0},pause:function(){j.paused=!0},resume:function(){j.paused!==!1&&(j.paused=!1,wd(j.process))}};return j}function qa(a,b){return pa(a,1,b)}function ra(a,b,c,d){d=r(d||q),yd(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})}function sa(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function ta(a){return function(b,c,d){return a(yd,b,c,d)}}function ua(a,b){return function(c,d,e,f){f=f||q;var g,h=!1;c(d,function(c,d,f){e(c,function(d,e){d?f(d):a(e)&&!g?(h=!0,g=b(!0,c),f(null,zb)):f()})},function(a){a?f(a):f(null,h?g:b(!1))})}}function va(a,b){return b}function wa(a){return h(function(b,c){b.apply(null,c.concat(h(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&R(c,function(b){console[a](b)}))})))})}function xa(a,b,c){function d(b,d){return b?c(b):d?void a(e):c(null)}c=I(c||q);var e=h(function(a,e){return a?c(a):(e.push(d),void b.apply(this,e))});d(null,!0)}function ya(a,b,c){c=I(c||q);var d=h(function(e,f){return e?c(e):b.apply(this,f)?a(d):void c.apply(null,[null].concat(f))});a(d)}function za(a,b,c){ya(a,function(){return!b.apply(this,arguments)},c)}function Aa(a,b,c){function d(b){return b?c(b):void a(e)}function e(a,e){return a?c(a):e?void b(d):c(null)}c=I(c||q),a(e)}function Ba(a){return function(b,c,d){return a(b,d)}}function Ca(a,b,c){Cc(a,Ba(b),c)}function Da(a,b,c,d){J(b)(a,Ba(c),d)}function Ea(a){return gb(function(b,c){var d=!0;b.push(function(){var a=arguments;d?wd(function(){c.apply(null,a)}):c.apply(null,a)}),a.apply(this,b),d=!1})}function Fa(a){return!a}function Ga(a){return function(b){return null==b?void 0:b[a]}}function Ha(a,b,c,d){var e=new Array(b.length);a(b,function(a,b,d){c(a,function(a,c){e[b]=!!c,d(a)})},function(a){if(a)return d(a);for(var c=[],f=0;f<b.length;f++)e[f]&&c.push(b[f]);d(null,c)})}function Ia(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c,f){c?d(c):(f&&e.push({index:b,value:a}),d())})},function(a){a?d(a):d(null,Y(e.sort(function(a,b){return a.index-b.index}),Ga("value")))})}function Ja(a,b,c,d){var e=p(b)?Ha:Ia;e(a,b,c,d||q)}function Ka(a,b){function c(a){return a?d(a):void e(c)}var d=I(b||q),e=Ea(a);c()}function La(a,b,c,d){d=r(d||q);var e={};K(a,b,function(a,b,d){c(a,b,function(a,c){return a?d(a):(e[b]=c,void d())})},function(a){d(a,e)})}function Ma(a,b){return b in a}function Na(a,b){var c=Object.create(null),d=Object.create(null);b=b||g;var e=gb(function(e,f){var g=b.apply(null,e);Ma(c,g)?wd(function(){f.apply(null,c[g])}):Ma(d,g)?d[g].push(f):(d[g]=[f],a.apply(null,e.concat(h(function(a){c[g]=a;var b=d[g];delete d[g];for(var e=0,f=b.length;f>e;e++)b[e].apply(null,a)}))))});return e.memo=c,e.unmemoized=a,e}function Oa(a,b,c){c=c||q;var d=p(b)?[]:{};a(b,function(a,b,c){a(h(function(a,e){e.length<=1&&(e=e[0]),d[b]=e,c(a)}))},function(a){c(a,d)})}function Pa(a,b){Oa(Cc,a,b)}function Qa(a,b,c){Oa(J(b),a,c)}function Ra(a,b){if(b=r(b||q),!Hb(a))return b(new TypeError("First argument to race must be an array of functions"));if(!a.length)return b();for(var c=0,d=a.length;d>c;c++)a[c](b)}function Sa(a,b,c,d){var e=Vd.call(a).reverse();ra(e,b,c,d)}function Ta(a){return gb(function(b,c){return b.push(h(function(a,b){if(a)c(null,{error:a});else{var d=null;1===b.length?d=b[0]:b.length>1&&(d=b),c(null,{value:d})}})),a.apply(this,b)})}function Ua(a,b,c,d){Ja(a,b,function(a,b){c(a,function(a,c){b(a,!c)})},d)}function Va(a){var b;return Hb(a)?b=Y(a,Ta):(b={},T(a,function(a,c){b[c]=Ta.call(this,a)})),b}function Wa(a){return function(){return a}}function Xa(a,b,c){function d(a,b){if("object"==typeof b)a.times=+b.times||f,a.intervalFunc="function"==typeof b.interval?b.interval:Wa(+b.interval||g),a.errorFilter=b.errorFilter;else{if("number"!=typeof b&&"string"!=typeof b)throw new Error("Invalid arguments for async.retry");a.times=+b||f}}function e(){b(function(a){a&&i++<h.times&&("function"!=typeof h.errorFilter||h.errorFilter(a))?setTimeout(e,h.intervalFunc(i)):c.apply(null,arguments)})}var f=5,g=0,h={times:f,intervalFunc:Wa(g)};if(arguments.length<3&&"function"==typeof a?(c=b||q,b=a):(d(h,a),c=c||q),"function"!=typeof b)throw new Error("Invalid arguments for async.retry");var i=1;e()}function Ya(a,b){Oa(yd,a,b)}function Za(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}Dc(a,function(a,c){b(a,function(b,d){return b?c(b):void c(null,{value:a,criteria:d})})},function(a,b){return a?c(a):void c(null,Y(b.sort(d),Ga("value")))})}function $a(a,b,c){function d(){h||(f.apply(null,arguments),clearTimeout(g))}function e(){var b=a.name||"anonymous",d=new Error('Callback function "'+b+'" timed out.');d.code="ETIMEDOUT",c&&(d.info=c),h=!0,f(d)}var f,g,h=!1;return gb(function(c,h){f=h,g=setTimeout(e,b),a.apply(null,c.concat(d))})}function _a(a,b,c,d){for(var e=-1,f=ce(be((b-a)/(c||1)),0),g=Array(f);f--;)g[d?f:++e]=a,a+=c;return g}function ab(a,b,c,d){Fc(_a(0,a,1),b,c,d)}function bb(a,b,c,d){3===arguments.length&&(d=c,c=b,b=Hb(a)?[]:{}),d=r(d||q),Cc(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})}function cb(a){return function(){return(a.unmemoized||a).apply(null,arguments)}}function db(a,b,c){if(c=I(c||q),!a())return c(null);var d=h(function(e,f){return e?c(e):a()?b(d):void c.apply(null,[null].concat(f))});b(d)}function eb(a,b,c){db(function(){return!a.apply(this,arguments)},b,c)}var fb=Math.max,gb=function(a){return h(function(b){var c=b.pop();a.call(this,b,c)})},hb="object"==typeof d&&d&&d.Object===Object&&d,ib="object"==typeof self&&self&&self.Object===Object&&self,jb=hb||ib||Function("return this")(),kb=jb.Symbol,lb=Object.prototype,mb=lb.hasOwnProperty,nb=lb.toString,ob=kb?kb.toStringTag:void 0,pb=Object.prototype,qb=pb.toString,rb="[object Null]",sb="[object Undefined]",tb=kb?kb.toStringTag:void 0,ub="[object AsyncFunction]",vb="[object Function]",wb="[object GeneratorFunction]",xb="[object Proxy]",yb=9007199254740991,zb={},Ab="function"==typeof Symbol&&Symbol.iterator,Bb=function(a){return Ab&&a[Ab]&&a[Ab]()},Cb="[object Arguments]",Db=Object.prototype,Eb=Db.hasOwnProperty,Fb=Db.propertyIsEnumerable,Gb=u(function(){return arguments}())?u:function(a){return t(a)&&Eb.call(a,"callee")&&!Fb.call(a,"callee")},Hb=Array.isArray,Ib="object"==typeof c&&c&&!c.nodeType&&c,Jb=Ib&&"object"==typeof b&&b&&!b.nodeType&&b,Kb=Jb&&Jb.exports===Ib,Lb=Kb?jb.Buffer:void 0,Mb=Lb?Lb.isBuffer:void 0,Nb=Mb||v,Ob=9007199254740991,Pb=/^(?:0|[1-9]\d*)$/,Qb="[object Arguments]",Rb="[object Array]",Sb="[object Boolean]",Tb="[object Date]",Ub="[object Error]",Vb="[object Function]",Wb="[object Map]",Xb="[object Number]",Yb="[object Object]",Zb="[object RegExp]",$b="[object Set]",_b="[object String]",ac="[object WeakMap]",bc="[object ArrayBuffer]",cc="[object DataView]",dc="[object Float32Array]",ec="[object Float64Array]",fc="[object Int8Array]",gc="[object Int16Array]",hc="[object Int32Array]",ic="[object Uint8Array]",jc="[object Uint8ClampedArray]",kc="[object Uint16Array]",lc="[object Uint32Array]",mc={};mc[dc]=mc[ec]=mc[fc]=mc[gc]=mc[hc]=mc[ic]=mc[jc]=mc[kc]=mc[lc]=!0,mc[Qb]=mc[Rb]=mc[bc]=mc[Sb]=mc[cc]=mc[Tb]=mc[Ub]=mc[Vb]=mc[Wb]=mc[Xb]=mc[Yb]=mc[Zb]=mc[$b]=mc[_b]=mc[ac]=!1;var nc,oc="object"==typeof c&&c&&!c.nodeType&&c,pc=oc&&"object"==typeof b&&b&&!b.nodeType&&b,qc=pc&&pc.exports===oc,rc=qc&&hb.process,sc=function(){try{return rc&&rc.binding&&rc.binding("util")}catch(a){}}(),tc=sc&&sc.isTypedArray,uc=tc?y(tc):x,vc=Object.prototype,wc=vc.hasOwnProperty,xc=Object.prototype,yc=B(Object.keys,Object),zc=Object.prototype,Ac=zc.hasOwnProperty,Bc=L(K,1/0),Cc=function(a,b,c){var d=p(a)?M:Bc;d(a,b,c)},Dc=N(O),Ec=i(Dc),Fc=P(O),Gc=L(Fc,1),Hc=i(Gc),Ic=h(function(a,b){return h(function(c){return a.apply(null,b.concat(c))})}),Jc=S(),Kc=function(a,b,c){function d(a,b){t.push(function(){i(a,b)})}function e(){if(0===t.length&&0===o)return c(null,n);for(;t.length&&b>o;){var a=t.shift();a()}}function f(a,b){var c=s[a];c||(c=s[a]=[]),c.push(b)}function g(a){var b=s[a]||[];R(b,function(a){a()}),e()}function i(a,b){if(!p){var d=I(h(function(b,d){if(o--,d.length<=1&&(d=d[0]),b){var e={};T(n,function(a,b){e[b]=a}),e[a]=d,p=!0,s=Object.create(null),c(b,e)}else n[a]=d,g(a)}));o++;var e=b[b.length-1];b.length>1?e(n,d):e(d)}}function j(){for(var a,b=0;u.length;)a=u.pop(),b++,R(k(a),function(a){0===--v[a]&&u.push(a)});if(b!==m)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function k(b){var c=[];return T(a,function(a,d){Hb(a)&&X(a,b,0)>=0&&c.push(d)}),c}"function"==typeof b&&(c=b,b=null),c=r(c||q);var l=D(a),m=l.length;if(!m)return c(null);b||(b=m);var n={},o=0,p=!1,s=Object.create(null),t=[],u=[],v={};T(a,function(b,c){if(!Hb(b))return d(c,[b]),void u.push(c);var e=b.slice(0,b.length-1),g=e.length;return 0===g?(d(c,b),void u.push(c)):(v[c]=g,void R(e,function(h){if(!a[h])throw new Error("async.auto task `"+c+"` has a non-existent dependency `"+h+"` in "+e.join(", "));f(h,function(){g--,0===g&&d(c,b)})}))}),j(),e()},Lc="[object Symbol]",Mc=1/0,Nc=kb?kb.prototype:void 0,Oc=Nc?Nc.toString:void 0,Pc="\\ud800-\\udfff",Qc="\\u0300-\\u036f",Rc="\\ufe20-\\ufe2f",Sc="\\u20d0-\\u20ff",Tc=Qc+Rc+Sc,Uc="\\ufe0e\\ufe0f",Vc="\\u200d",Wc=RegExp("["+Vc+Pc+Tc+Uc+"]"),Xc="\\ud800-\\udfff",Yc="\\u0300-\\u036f",Zc="\\ufe20-\\ufe2f",$c="\\u20d0-\\u20ff",_c=Yc+Zc+$c,ad="\\ufe0e\\ufe0f",bd="["+Xc+"]",cd="["+_c+"]",dd="\\ud83c[\\udffb-\\udfff]",ed="(?:"+cd+"|"+dd+")",fd="[^"+Xc+"]",gd="(?:\\ud83c[\\udde6-\\uddff]){2}",hd="[\\ud800-\\udbff][\\udc00-\\udfff]",id="\\u200d",jd=ed+"?",kd="["+ad+"]?",ld="(?:"+id+"(?:"+[fd,gd,hd].join("|")+")"+kd+jd+")*",md=kd+jd+ld,nd="(?:"+[fd+cd+"?",cd,gd,hd,bd].join("|")+")",od=RegExp(dd+"(?="+dd+")|"+nd+md,"g"),pd=/^\s+|\s+$/g,qd=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,rd=/,/,sd=/(=.+)?(\s*)$/,td=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ud="function"==typeof setImmediate&&setImmediate,vd="object"==typeof a&&"function"==typeof a.nextTick;nc=ud?setImmediate:vd?a.nextTick:la;var wd=ma(nc);na.prototype.removeLink=function(a){return a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev,a.prev=a.next=null,this.length-=1,a},na.prototype.empty=na,na.prototype.insertAfter=function(a,b){b.prev=a,b.next=a.next,a.next?a.next.prev=b:this.tail=b,a.next=b,this.length+=1},na.prototype.insertBefore=function(a,b){b.prev=a.prev,b.next=a,a.prev?a.prev.next=b:this.head=b,a.prev=b,this.length+=1},na.prototype.unshift=function(a){this.head?this.insertBefore(this.head,a):oa(this,a)},na.prototype.push=function(a){this.tail?this.insertAfter(this.tail,a):oa(this,a)},na.prototype.shift=function(){return this.head&&this.removeLink(this.head)},na.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var xd,yd=L(K,1),zd=h(function(a){return h(function(b){var c=this,d=b[b.length-1];"function"==typeof d?b.pop():d=q,ra(a,b,function(a,b,d){b.apply(c,a.concat(h(function(a,b){d(a,b)})))},function(a,b){d.apply(c,[a].concat(b))})})}),Ad=h(function(a){return zd.apply(null,a.reverse())}),Bd=N(sa),Cd=ta(sa),Dd=h(function(a){var b=[null].concat(a);return gb(function(a,c){return c.apply(this,b)})}),Ed=N(ua(g,va)),Fd=P(ua(g,va)),Gd=L(Fd,1),Hd=wa("dir"),Id=L(Da,1),Jd=N(ua(Fa,Fa)),Kd=P(ua(Fa,Fa)),Ld=L(Kd,1),Md=N(Ja),Nd=P(Ja),Od=L(Nd,1),Pd=wa("log"),Qd=L(La,1/0),Rd=L(La,1);xd=vd?a.nextTick:ud?setImmediate:la;var Sd=ma(xd),Td=function(a,b){return pa(function(b,c){a(b[0],c)},b,1)},Ud=function(a,b){var c=Td(a,b);return c.push=function(a,b,d){if(null==d&&(d=q),"function"!=typeof d)throw new Error("task callback must be a function");if(c.started=!0,Hb(a)||(a=[a]),0===a.length)return wd(function(){c.drain()});b=b||0;for(var e=c._tasks.head;e&&b>=e.priority;)e=e.next;for(var f=0,g=a.length;g>f;f++){var h={data:a[f],priority:b,callback:d};e?c._tasks.insertBefore(e,h):c._tasks.push(h)}wd(c.process)},delete c.unshift,c},Vd=Array.prototype.slice,Wd=N(Ua),Xd=P(Ua),Yd=L(Xd,1),Zd=function(a,b){return b||(b=a,a=null),gb(function(c,d){function e(a){b.apply(null,c.concat(a))}a?Xa(a,e,d):Xa(e,d)})},$d=N(ua(Boolean,g)),_d=P(ua(Boolean,g)),ae=L(_d,1),be=Math.ceil,ce=Math.max,de=L(ab,1/0),ee=L(ab,1),fe=function(a,b){function c(e){if(d===a.length)return b.apply(null,[null].concat(e));var f=I(h(function(a,d){return a?b.apply(null,[a].concat(d)):void c(d)}));e.push(f);var g=a[d++];g.apply(null,e)}if(b=r(b||q),!Hb(a))return b(new Error("First argument to waterfall must be an array of functions"));if(!a.length)return b();var d=0;c([])},ge={applyEach:Ec,applyEachSeries:Hc,apply:Ic,asyncify:Q,auto:Kc,autoInject:ka,cargo:qa,compose:Ad,concat:Bd,concatSeries:Cd,constant:Dd,detect:Ed,detectLimit:Fd,detectSeries:Gd,dir:Hd,doDuring:xa,doUntil:za,doWhilst:ya,during:Aa,each:Ca,eachLimit:Da,eachOf:Cc,eachOfLimit:K,eachOfSeries:yd,eachSeries:Id,ensureAsync:Ea,every:Jd,everyLimit:Kd,everySeries:Ld,filter:Md,filterLimit:Nd,filterSeries:Od,forever:Ka,log:Pd,map:Dc,mapLimit:Fc,mapSeries:Gc,mapValues:Qd,mapValuesLimit:La,mapValuesSeries:Rd,memoize:Na,nextTick:Sd,parallel:Pa,parallelLimit:Qa,priorityQueue:Ud,queue:Td,race:Ra,reduce:ra,reduceRight:Sa,reflect:Ta,reflectAll:Va,reject:Wd,rejectLimit:Xd,rejectSeries:Yd,retry:Xa,retryable:Zd,seq:zd,series:Ya,setImmediate:wd,some:$d,someLimit:_d,someSeries:ae,sortBy:Za,timeout:$a,times:de,timesLimit:ab,timesSeries:ee,transform:bb,unmemoize:cb,until:eb,waterfall:fe,whilst:db,all:Jd,any:$d,forEach:Ca,forEachSeries:Id,forEachLimit:Da,forEachOf:Cc,forEachOfSeries:yd,forEachOfLimit:K,inject:ra,foldl:ra,foldr:Sa,select:Md,selectLimit:Nd,selectSeries:Od,wrapSync:Q};c["default"]=ge,c.applyEach=Ec,c.applyEachSeries=Hc,c.apply=Ic,c.asyncify=Q,c.auto=Kc,c.autoInject=ka,c.cargo=qa,c.compose=Ad,c.concat=Bd,c.concatSeries=Cd,c.constant=Dd,c.detect=Ed,c.detectLimit=Fd,c.detectSeries=Gd,c.dir=Hd,c.doDuring=xa,c.doUntil=za,c.doWhilst=ya,c.during=Aa,c.each=Ca,c.eachLimit=Da,c.eachOf=Cc,c.eachOfLimit=K,c.eachOfSeries=yd,c.eachSeries=Id,c.ensureAsync=Ea,c.every=Jd,c.everyLimit=Kd,c.everySeries=Ld,c.filter=Md,c.filterLimit=Nd,c.filterSeries=Od,c.forever=Ka,c.log=Pd,c.map=Dc,c.mapLimit=Fc,c.mapSeries=Gc,c.mapValues=Qd,c.mapValuesLimit=La,c.mapValuesSeries=Rd,c.memoize=Na,c.nextTick=Sd,c.parallel=Pa,c.parallelLimit=Qa,c.priorityQueue=Ud,c.queue=Td,c.race=Ra,c.reduce=ra,c.reduceRight=Sa,c.reflect=Ta,c.reflectAll=Va,c.reject=Wd,c.rejectLimit=Xd,c.rejectSeries=Yd,c.retry=Xa,c.retryable=Zd,c.seq=zd,c.series=Ya,c.setImmediate=wd,c.some=$d,c.someLimit=_d,c.someSeries=ae,c.sortBy=Za,c.timeout=$a,c.times=de,c.timesLimit=ab,c.timesSeries=ee,c.transform=bb,c.unmemoize=cb,c.until=eb,c.waterfall=fe,c.whilst=db,c.all=Jd,c.allLimit=Kd,c.allSeries=Ld,c.any=$d,c.anyLimit=_d,c.anySeries=ae,c.find=Ed,c.findLimit=Fd,c.findSeries=Gd,c.forEach=Ca,c.forEachSeries=Id,c.forEachLimit=Da,c.forEachOf=Cc,c.forEachOfSeries=yd,c.forEachOfLimit=K,c.inject=ra,c.foldl=ra,c.foldr=Sa,c.select=Md,c.selectLimit=Nd,c.selectSeries=Od,c.wrapSync=Q,Object.defineProperty(c,"__esModule",{value:!0})})}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],2:[function(a,b,c){(function(b){!function(d){var e="object"==typeof self&&self.self===self&&self||"object"==typeof b&&b.global===b&&b;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,b,c){e.Backbone=d(e,c,a,b)});else if("undefined"!=typeof c){var f,g=a("underscore");try{f=a("jquery")}catch(h){}d(e,c,g,f)}else e.Backbone=d(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.3.3",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],i(a,this),e)};case 4:return function(a,e,f){return c[b](this[d],i(a,this),e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?j(a):c.isString(a)?function(b){return b.get(a)}:a},j=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},k=b.Events={},l=/\s+/,m=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=m(a,b,g[h],d[g[h]],f)}else if(d&&l.test(d))for(g=d.split(l);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};k.on=function(a,b,c){return n(this,a,b,c)};var n=function(a,b,c,d,e){if(a._events=m(o,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};k.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return n(a,b,d,this,g),this};var o=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};k.off=function(a,b,c){return this._events?(this._events=m(p,this._events,a,b,{context:c,listeners:this._listeners}),this):this},k.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return this};var p=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return a}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};k.once=function(a,b,d){var e=m(q,{},a,b,c.bind(this.off,this));return"string"==typeof a&&null==d&&(b=void 0),this.on(e,b,d)},k.listenToOnce=function(a,b,d){var e=m(q,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var q=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};k.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return m(r,this._events,a,void 0,c),this};var r=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&s(e,d),f&&s(f,[b].concat(d))}return a},s=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};k.bind=k.on,k.unbind=k.off,c.extend(b,k);var t=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{});var e=c.result(this,"defaults");d=c.defaults(c.extend({},e,d),e),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(t.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return c.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return b.set(e,a)?(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a)):!1},P(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),b&&!g.set(b,d)?!1:(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},P(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(P(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||O();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var u={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(t,u,"attributes");var v=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},y=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;f>d;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(v.prototype,k,{model:t,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,x))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&(b.changes={added:[],merged:[],removed:e},this.trigger("update",this,b)),d?e[0]:e},set:function(a,b){if(null!=a){b=c.extend({},w,b),b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);
var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),e>this.length&&(e=this.length),0>e&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k=[],l={},m=b.add,n=b.merge,o=b.remove,p=!1,q=this.comparator&&null==e&&b.sort!==!1,r=c.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var s=this.get(f);if(s){if(n&&f!==s){var t=this._isModel(f)?f.attributes:f;b.parse&&(t=s.parse(t,b)),s.set(t,b),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[g]=s}else m&&(f=a[g]=this._prepareModel(f,b),f&&(i.push(f),this._addReference(f,b),l[f.cid]=!0,h.push(f)))}if(o){for(g=0;g<this.length;g++)f=this.models[g],l[f.cid]||k.push(f);k.length&&this._removeModels(k,b)}var u=!1,v=!q&&m&&o;if(h.length&&v?(u=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,y(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),y(this.models,i,null==e?this.length:e),this.length=this.models.length),p&&this.sort({silent:!0}),!b.silent){for(g=0;g<i.length;g++)null!=e&&(b.index=e+g),f=i[g],f.trigger("add",f,this,b);(p||u)&&this.trigger("sort",this,b),(i.length||k.length||j.length)&&(b.changes={added:i,removed:k,merged:j},this.trigger("update",this,b))}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[this.modelId(a.attributes||a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=c.bind(b,this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},P(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof t},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var z={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(v,z,"models");var A=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,C)),this._ensureElement(),this.initialize.apply(this,arguments)},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];c.extend(A.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(B);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=D[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||O()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var E=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(E.prototype,k,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,b){return b?a:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[],this.checkUrl=c.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,M=/#.*$/;J.started=!1,c.extend(J.prototype,k,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(K,"")},start:function(a){if(J.started)throw new Error("Backbone.history has already been started");if(J.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!J.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(M,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new J;var N=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};t.extend=v.extend=E.extend=A.extend=J.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')},P=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:23,underscore:26}],3:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e="object"===("undefined"==typeof window?"undefined":d(window));!function(c){if("function"==typeof define&&define.amd)define(["jquery"],c);else if("object"===("undefined"==typeof b?"undefined":d(b))&&b.exports){var e;try{e=a("jquery")}catch(f){e=null}b.exports=c(e)}else window&&(window.Slider=c(window.jQuery))}(function(a){var b="slider",c="bootstrapSlider";e&&!window.console&&(window.console={}),e&&!window.console.log&&(window.console.log=function(){}),e&&!window.console.warn&&(window.console.warn=function(){});var d;return function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l&&l!==k)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}var m=this.map(function(){var d=a.data(this,b);return d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d)),a(this)});return!m||m.length>1?m:m[0]}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;c(a)}(a),function(a){function f(b,c){function d(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(e){return d}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{};for(var e=Object.keys(this.defaultOptions),f=0;f<e.length;f++){var g=e[f],i=c[g];i="undefined"!=typeof i?i:d(this.element,g),i=null!==i?i:this.defaultOptions[g],this.options||(this.options={}),this.options[g]=i}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var j,k,l,m,n,o=this.element.style.width,p=!1,q=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var r=document.createElement("div");r.className="slider-track",k=document.createElement("div"),k.className="slider-track-low",j=document.createElement("div"),j.className="slider-selection",l=document.createElement("div"),l.className="slider-track-high",m=document.createElement("div"),m.className="slider-handle min-slider-handle",m.setAttribute("role","slider"),m.setAttribute("aria-valuemin",this.options.min),m.setAttribute("aria-valuemax",this.options.max),n=document.createElement("div"),n.className="slider-handle max-slider-handle",n.setAttribute("role","slider"),n.setAttribute("aria-valuemin",this.options.min),n.setAttribute("aria-valuemax",this.options.max),r.appendChild(k),r.appendChild(j),r.appendChild(l);var s=Array.isArray(this.options.labelledby);if(s&&this.options.labelledby[0]&&m.setAttribute("aria-labelledby",this.options.labelledby[0]),s&&this.options.labelledby[1]&&n.setAttribute("aria-labelledby",this.options.labelledby[1]),!s&&this.options.labelledby&&(m.setAttribute("aria-labelledby",this.options.labelledby),n.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",f=0;f<this.options.ticks.length;f++){var t=document.createElement("div");t.className="slider-tick",this.ticks.push(t),this.ticksContainer.appendChild(t)}j.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",f=0;f<this.options.ticks_labels.length;f++){var u=document.createElement("div"),v=0===this.options.ticks_positions.length,w=this.options.reversed&&v?this.options.ticks_labels.length-(f+1):f;u.className="slider-tick-label",u.innerHTML=this.options.ticks_labels[w],this.tickLabels.push(u),this.tickLabelContainer.appendChild(u)}var x=function(a){var b=document.createElement("div");b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},y=document.createElement("div");y.className="tooltip tooltip-main",y.setAttribute("role","presentation"),x(y);var z=document.createElement("div");z.className="tooltip tooltip-min",z.setAttribute("role","presentation"),x(z);var A=document.createElement("div");A.className="tooltip tooltip-max",A.setAttribute("role","presentation"),x(A),this.sliderElem.appendChild(r),this.sliderElem.appendChild(y),this.sliderElem.appendChild(z),this.sliderElem.appendChild(A),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(m),this.sliderElem.appendChild(n),q.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),h[this.options.scale]&&(this.options.scale=h[this.options.scale]),p===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=o,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=k||this.trackLow,this.trackSelection=j||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=m||this.handle1,this.handle2=n||this.handle2,p===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),f=0;f<this.ticks.length;f++)this._removeClass(this.ticks[f],"round triangle hide");var B=["round","triangle","custom"],C=-1!==B.indexOf(this.options.handle);if(C)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),f=0;f<this.ticks.length;f++)this._addClass(this.ticks[f],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var g={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},h={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min),c=!0;if(this.options.ticks_positions.length>0){for(var d,e,f,g=0,h=1;h<this.options.ticks_positions.length;h++)if(a<=this.options.ticks_positions[h]){d=this.options.ticks[h-1],f=this.options.ticks_positions[h-1],e=this.options.ticks[h],g=this.options.ticks_positions[h];break}var i=(a-f)/(g-f);b=d+i*(e-d),c=!1}var j=c?this.options.min:0,k=j+Math.round(b/this.options.step)*this.options.step;return k<this.options.min?this.options.min:k>this.options.max?this.options.max:k},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0){var g=(a-b)/(c-b);return d+g*(e-d)}}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a);return 100*(d-c)/(b-c)}}};d=function(a,b){return f.call(this,a,b),this},d.prototype={_init:function(){},constructor:d,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this._state.value=this._validateInputValue(a);var e=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var f=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(f),b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),f.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){var c=this.eventToCallbackMap[a];if(void 0!==c)for(var d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++){var c=a[b];this.eventToCallbackMap[c]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var a;if(a=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=a[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var b="vertical"===this.options.orientation?"height":"width",c="vertical"===this.options.orientation?"marginTop":"marginLeft",d=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var e=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[c]=-d/2+"px"),e=this.tickLabelContainer.offsetHeight;else for(f=0;f<this.tickLabelContainer.childNodes.length;f++)this.tickLabelContainer.childNodes[f].offsetHeight>e&&(e=this.tickLabelContainer.childNodes[f].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=e+"px")}for(var f=0;f<this.options.ticks.length;f++){var g=this.options.ticks_positions[f]||this._toPercentage(this.options.ticks[f]);this.options.reversed&&(g=100-g),this.ticks[f].style[this.stylePos]=g+"%",this._removeClass(this.ticks[f],"in-selection"),this.options.range?g>=a[0]&&g<=a[1]&&this._addClass(this.ticks[f],"in-selection"):"after"===this.options.selection&&g>=a[0]?this._addClass(this.ticks[f],"in-selection"):"before"===this.options.selection&&g<=a[0]&&this._addClass(this.ticks[f],"in-selection"),
this.tickLabels[f]&&(this.tickLabels[f].style[b]=d+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[f]?(this.tickLabels[f].style.position="absolute",this.tickLabels[f].style[this.stylePos]=g+"%",this.tickLabels[f].style[c]=-d/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[f].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var h;if(this.options.range){h=this.options.formatter(this._state.value),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var i=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,i);var j=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,j),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else h=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";var k=this.tooltip_min.getBoundingClientRect(),l=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?k.right>l.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):k.right>l.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_resize:function(a){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);if(this.options.range){var c=Math.abs(this._state.percentage[0]-b),d=Math.abs(this._state.percentage[1]-b);this._state.dragged=d>c?0:1,this._adjustPercentageForRangeSliders(b)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var e=this._calculateValue();return this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(a){if(void 0===a.changedTouches)return void this._mousedown(a);var b=a.changedTouches[0];this.touchX=b.pageX,this.touchY=b.pageY},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed;(d||e)&&(c=-c)}var f=this._state.value[a]+c*this.options.step;return this.options.range&&(f=[a?this._state.value[0]:f,a?f:this._state.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._setDataVal(f),this._trigger("slideStop",f),this._layout(),this._pauseEvent(b),!1}},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;var b=this._getPercentage(a);this._adjustPercentageForRangeSliders(b),this._state.percentage[this._state.dragged]=b,this._layout();var c=this._calculateValue(!0);return this.setValue(c,!0,!0),!1},_touchmove:function(a){if(void 0!==a.changedTouches){var b=a.changedTouches[0],c=b.pageX-this.touchX,d=b.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&5>=c&&c>=-5&&(d>=15||-15>=d)?this._mousedown(a):5>=d&&d>=-5&&(c>=15||-15>=c)&&this._mousedown(a))}},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a);b=b?b-1:0;var c=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],b)>c&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._setDataVal(a),this._trigger("slideStop",a),!1},_calculateValue:function(a){var b;if(this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(var c=[b,1/0],d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=c[1]&&(c=[this.options.ticks[d],e])}if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=a[this.mousePos],c=this._state.offset[this.stylePos],d=b-c,e=d/this._state.size*100;return e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(g.formatInvalidInputErrorMsg(a))},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!=typeof c)throw new Error(g.formatInvalidInputErrorMsg(c))}},_setDataVal:function(a){this.element.setAttribute("data-value",a),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];f(c)}a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.textContent?a.textContent=b:"undefined"!=typeof a.innerText&&(a.innerText=b)},_removeClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)");d=d.replace(g," ")}a.className=d.trim()},_addClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d);h||(d+=" "+f)}a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop,"BODY"!==a.tagName&&(b-=a.scrollTop);return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b=this.options.tooltip_position||"right",c="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b),a.style[c]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?a.forEach(function(a){this._addClass(a,"bottom"),a.style.top="22px"}.bind(this)):a.forEach(function(a){this._addClass(a,"top"),a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},a&&!function(){var f=void 0;a.fn.slider?(e&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),f=c):(a.bridget(b,d),f=b),a.bridget(c,d),a(function(){a("input[data-provide=slider]")[f]()})}()}(a),d})},{jquery:23}],4:[function(a,b,c){!function(a){"use strict";function b(b,c){this.isInit=!0,this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(c),this.isInit=!1}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?i.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function g(b,c){var d=!1;return a.each(c,function(a,c){if("number"==typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}}),d}var h={tagClass:function(a){return"label label-info"},itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};b.prototype={constructor:b,add:function(b,c,d){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags)&&(b===!1||b)){if("string"==typeof b&&f.options.trimValue&&(b=a.trim(b)),"object"==typeof b&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if(f.isSelect&&!f.multiple&&f.itemsArray.length>0&&f.remove(f.itemsArray[0]),"string"==typeof b&&"INPUT"===this.$element[0].tagName){var g=f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter,h=b.split(g);if(h.length>1){for(var i=0;i<h.length;i++)this.add(h[i],!0);return void(c||f.pushVal())}}var j=f.options.itemValue(b),k=f.options.itemText(b),l=f.options.tagClass(b),m=f.options.itemTitle(b),n=a.grep(f.itemsArray,function(a){return f.options.itemValue(a)===j})[0];if(!n||f.options.allowDuplicates){if(!(f.items().toString().length+b.length+1>f.options.maxInputLength)){var o=a.Event("beforeItemAdd",{item:b,cancel:!1,options:d});if(f.$element.trigger(o),!o.cancel){f.itemsArray.push(b);var p=a('<span class="tag '+e(l)+(null!==m?'" title="'+m:"")+'">'+e(k)+'<span data-role="remove"></span></span>');p.data("item",b),f.findInputWrapper().before(p),p.after(" ");var q=a('option[value="'+encodeURIComponent(j)+'"]',f.$element).length||a('option[value="'+e(j)+'"]',f.$element).length;if(f.isSelect&&!q){var r=a("<option selected>"+e(k)+"</option>");r.data("item",b),r.attr("value",j),f.$element.append(r)}c||f.pushVal(),(f.options.maxTags===f.itemsArray.length||f.items().toString().length===f.options.maxInputLength)&&f.$container.addClass("bootstrap-tagsinput-max"),a(".typeahead, .twitter-typeahead",f.$container).length&&f.$input.typeahead("val",""),this.isInit?f.$element.trigger(a.Event("itemAddedOnInit",{item:b,options:d})):f.$element.trigger(a.Event("itemAdded",{item:b,options:d}))}}}else if(f.options.onTagExists){var s=a(".tag",f.$container).filter(function(){return a(this).data("item")===n});f.options.onTagExists(b,s)}}}},remove:function(b,c,d){var e=this;if(e.objectItems&&(b="object"==typeof b?a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==e.options.itemValue(b)}):a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==b}),b=b[b.length-1]),b){var f=a.Event("beforeItemRemove",{item:b,cancel:!1,options:d});if(e.$element.trigger(f),f.cancel)return;a(".tag",e.$container).filter(function(){return a(this).data("item")===b}).remove(),a("option",e.$element).filter(function(){return a(this).data("item")===b}).remove(),-1!==a.inArray(b,e.itemsArray)&&e.itemsArray.splice(a.inArray(b,e.itemsArray),1)}c||e.pushVal(),e.options.maxTags>e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max"),e.$element.trigger(a.Event("itemRemoved",{item:b,options:d}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal()},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),d=c.data("item"),f=b.options.itemValue(d),g=b.options.itemText(d),h=b.options.tagClass(d);if(c.attr("class",null),c.addClass("tag "+e(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===d});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0).trigger("change")},build:function(b){var e=this;if(e.options=a.extend({},h,b),e.objectItems&&(e.options.freeInput=!1),c(e.options,"itemValue"),c(e.options,"itemText"),d(e.options,"tagClass"),e.options.typeahead){var i=e.options.typeahead||{};d(i,"source"),e.$input.typeahead(a.extend({},i,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=i.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){return e.add(this.map[a]),this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var j=null,k={},l=e.options.typeaheadjs;a.isArray(l)?(j=l[0],k=l[1]):k=l,e.$input.typeahead(j,k).on("typeahead:selected",a.proxy(function(a,b){k.valueKey?e.add(b[k.valueKey]):e.add(b),e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",a.proxy(function(b){0===a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),d=e.findInputWrapper();if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");switch(b.which){case 8:if(0===f(c[0])){var g=d.prev();g.length&&e.remove(g.data("item"))}break;case 46:if(0===f(c[0])){var h=d.next();h.length&&e.remove(h.data("item"))}break;case 37:var i=d.prev();0===c.val().length&&i[0]&&(i.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus())}var k=c.val().length;Math.ceil(k/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("keypress","input",a.proxy(function(b){var c=a(b.target);if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");var d=c.val(),f=e.options.maxChars&&d.length>=e.options.maxChars;e.options.freeInput&&(g(b,e.options.confirmKeys)||f)&&(0!==d.length&&(e.add(f?d.substr(0,e.options.maxChars):d),c.val("")),e.options.cancelConfirmKeysOnEmpty===!1&&b.preventDefault());var h=c.val().length;Math.ceil(h/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d,e){var f=[];return this.each(function(){var g=a(this).data("tagsinput");if(g)if(c||d){if(void 0!==g[c]){if(3===g[c].length&&void 0!==e)var h=g[c](d,null,e);else var h=g[c](d);void 0!==h&&f.push(h)}}else f.push(g);else g=new b(this,c),a(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?f.length>1?f:f[0]:f},a.fn.tagsinput.Constructor=b;var i=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery)},{}],5:[function(a,b,c){a("../../js/transition.js"),a("../../js/alert.js"),a("../../js/button.js"),a("../../js/carousel.js"),a("../../js/collapse.js"),a("../../js/dropdown.js"),a("../../js/modal.js"),a("../../js/tooltip.js"),a("../../js/popover.js"),a("../../js/scrollspy.js"),a("../../js/tab.js"),a("../../js/affix.js")},{"../../js/affix.js":6,"../../js/alert.js":7,"../../js/button.js":8,"../../js/carousel.js":9,"../../js/collapse.js":10,"../../js/dropdown.js":11,"../../js/modal.js":12,"../../js/popover.js":13,"../../js/scrollspy.js":14,"../../js/tab.js":15,"../../js/tooltip.js":16,"../../js/transition.js":17}],6:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery)},{}],7:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery)},{}],8:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery)},{}],9:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery)},{}],10:[function(a,b,c){+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;
var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery)},{}],11:[function(a,b,c){+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery)},{}],12:[function(a,b,c){+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery)},{}],13:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery)},{}],14:[function(a,b,c){+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery)},{}],15:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery)},{}],16:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery)},{}],17:[function(a,b,c){+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery)},{}],18:[function(a,b,c){!function(){"use strict";function a(b,c){function e(a,b){return function(){return a.apply(b,arguments)}}var f;if(c=c||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=c.touchBoundary||10,this.layer=b,this.tapDelay=c.tapDelay||200,this.tapTimeout=c.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=e(h[g[i]],h);d&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var c=navigator.userAgent.indexOf("Windows Phone")>=0,d=navigator.userAgent.indexOf("Android")>0&&!c,e=/iP(ad|hone|od)/.test(navigator.userAgent)&&!c,f=e&&/OS 4_\d(_\d)?/.test(navigator.userAgent),g=e&&/OS [6-7]_\d/.test(navigator.userAgent),h=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(e&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!d;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return d&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;e&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],e){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!f){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,c,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,g&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),d)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-c>100||e&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),e&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return e&&!f&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),
b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;d&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,c,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!d)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(h&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof b&&b.exports?(b.exports=a.attach,b.exports.FastClick=a):window.FastClick=a}()},{}],19:[function(a,b,c){!function(a){function b(a,b,c){"undefined"==typeof c&&(c=6371),this._lat="number"==typeof a?a:"string"==typeof a&&""!==a.trim()?+a:NaN,this._lon="number"==typeof b?b:"string"==typeof b&&""!==b.trim()?+b:NaN,this._radius="number"==typeof c?c:"string"==typeof c&&""!==trim(b)?+c:NaN}function c(a,b){this.easting=parseInt(a,10),this.northing=parseInt(b,10)}var d={};d.parseDMS=function(a){if("object"==typeof c)throw new TypeError("Geo.parseDMS - dmsStr is [DOM?] object");if("number"==typeof a&&isFinite(a))return Number(a);var b=String(a).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""===b[b.length-1]&&b.splice(b.length-1),""===b)return NaN;var c;switch(b.length){case 3:c=b[0]/1+b[1]/60+b[2]/3600;break;case 2:c=b[0]/1+b[1]/60;break;case 1:c=b[0];break;default:return NaN}return/^-|[WS]$/i.test(a.trim())&&(c=-c),Number(c)},d.toDMS=function(a,b,c){if("object"==typeof a)throw new TypeError("Geo.toDMS - deg is [DOM?] object");if(isNaN(a))return null;if("undefined"==typeof b&&(b="dms"),"undefined"==typeof c)switch(b){case"d":c=4;break;case"dm":c=2;break;case"dms":c=0;break;default:b="dms",c=0}a=Math.abs(a);var d,e,f;switch(b){case"d":d=a.toFixed(c),100>d&&(d="0"+d),10>d&&(d="0"+d);var g=d+"°";break;case"dm":var h=(60*a).toFixed(c);d=Math.floor(h/60),e=(h%60).toFixed(c),100>d&&(d="0"+d),10>d&&(d="0"+d),10>e&&(e="0"+e),g=d+"°"+e+"′";break;case"dms":var i=(3600*a).toFixed(c);d=Math.floor(i/3600),e=Math.floor(i/60)%60,f=(i%60).toFixed(c),100>d&&(d="0"+d),10>d&&(d="0"+d),10>e&&(e="0"+e),10>f&&(f="0"+f),g=d+"°"+e+"′"+f+"″"}return g},d.toLat=function(a,b,c){var e=d.toDMS(a,b,c);return null==e?"â€“":e.slice(1)+(0>a?"S":"N")},d.toLon=function(a,b,c){var e=d.toDMS(a,b,c);return null==e?"â€“":e+(0>a?"W":"E")},d.toBrng=function(a,b,c){a=(Number(a)+360)%360;var e=d.toDMS(a,b,c);return null==e?"â€“":e.replace("360","0")},window.console||(window.console={log:function(){}}),b.prototype.distanceTo=function(a,b){"undefined"==typeof b&&(b=4);var c=this._radius,d=this._lat.toRad(),e=this._lon.toRad(),f=a._lat.toRad(),g=a._lon.toRad(),h=f-d,i=g-e,j=Math.sin(h/2)*Math.sin(h/2)+Math.cos(d)*Math.cos(f)*Math.sin(i/2)*Math.sin(i/2),k=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)),l=c*k;return l.toPrecisionFixed(b)},b.prototype.bearingTo=function(a){var b=this._lat.toRad(),c=a._lat.toRad(),d=(a._lon-this._lon).toRad(),e=Math.sin(d)*Math.cos(c),f=Math.cos(b)*Math.sin(c)-Math.sin(b)*Math.cos(c)*Math.cos(d),g=Math.atan2(e,f);return(g.toDeg()+360)%360},b.prototype.finalBearingTo=function(a){var b=a._lat.toRad(),c=this._lat.toRad(),d=(this._lon-a._lon).toRad(),e=Math.sin(d)*Math.cos(c),f=Math.cos(b)*Math.sin(c)-Math.sin(b)*Math.cos(c)*Math.cos(d),g=Math.atan2(e,f);return(g.toDeg()+180)%360},b.prototype.midpointTo=function(a){var c=this._lat.toRad(),d=this._lon.toRad(),e=a._lat.toRad(),f=(a._lon-this._lon).toRad(),g=Math.cos(e)*Math.cos(f),h=Math.cos(e)*Math.sin(f),i=Math.atan2(Math.sin(c)+Math.sin(e),Math.sqrt((Math.cos(c)+g)*(Math.cos(c)+g)+h*h)),j=d+Math.atan2(h,Math.cos(c)+g);return j=(j+3*Math.PI)%(2*Math.PI)-Math.PI,new b(i.toDeg(),j.toDeg())},b.prototype.destinationPoint=function(a,c){c="number"==typeof c?c:"string"==typeof c&&""!==c.trim()?+c:NaN,c/=this._radius,a=a.toRad();var d=this._lat.toRad(),e=this._lon.toRad(),f=Math.asin(Math.sin(d)*Math.cos(c)+Math.cos(d)*Math.sin(c)*Math.cos(a)),g=e+Math.atan2(Math.sin(a)*Math.sin(c)*Math.cos(d),Math.cos(c)-Math.sin(d)*Math.sin(f));return g=(g+3*Math.PI)%(2*Math.PI)-Math.PI,new b(f.toDeg(),g.toDeg())},b.intersection=function(a,c,d,e){c="number"==typeof c?c:"string"==typeof c&&""!==trim(c)?+c:NaN,e="number"==typeof e?e:"string"==typeof e&&""!==trim(e)?+e:NaN;var f,g,h,i,j=a._lat.toRad(),k=a._lon.toRad(),l=d._lat.toRad(),m=d._lon.toRad(),n=c.toRad(),o=e.toRad(),p=l-j,q=m-k,r=2*Math.asin(Math.sqrt(Math.sin(p/2)*Math.sin(p/2)+Math.cos(j)*Math.cos(l)*Math.sin(q/2)*Math.sin(q/2)));if(0===r)return null;var s=Math.acos((Math.sin(l)-Math.sin(j)*Math.cos(r))/(Math.sin(r)*Math.cos(j)));isNaN(s)&&(s=0);var t=Math.acos((Math.sin(j)-Math.sin(l)*Math.cos(r))/(Math.sin(r)*Math.cos(l)));if(Math.sin(m-k)>0?(f=s,g=2*Math.PI-t):(f=2*Math.PI-s,g=t),h=(n-f+Math.PI)%(2*Math.PI)-Math.PI,i=(g-o+Math.PI)%(2*Math.PI)-Math.PI,0===Math.sin(h)&&0===Math.sin(i))return null;if(Math.sin(h)*Math.sin(i)<0)return null;var u=Math.acos(-Math.cos(h)*Math.cos(i)+Math.sin(h)*Math.sin(i)*Math.cos(r)),v=Math.atan2(Math.sin(r)*Math.sin(h)*Math.sin(i),Math.cos(i)+Math.cos(h)*Math.cos(u)),w=Math.asin(Math.sin(j)*Math.cos(v)+Math.cos(j)*Math.sin(v)*Math.cos(n)),x=Math.atan2(Math.sin(n)*Math.sin(v)*Math.cos(j),Math.cos(v)-Math.sin(j)*Math.sin(w)),y=k+x;return y=(y+3*Math.PI)%(2*Math.PI)-Math.PI,new b(w.toDeg(),y.toDeg())},b.prototype.rhumbDistanceTo=function(a){var b=this._radius,c=this._lat.toRad(),d=a._lat.toRad(),e=(a._lat-this._lat).toRad(),f=Math.abs(a._lon-this._lon).toRad(),g=Math.log(Math.tan(d/2+Math.PI/4)/Math.tan(c/2+Math.PI/4)),h=isFinite(e/g)?e/g:Math.cos(c);Math.abs(f)>Math.PI&&(f=f>0?-(2*Math.PI-f):2*Math.PI+f);var i=Math.sqrt(e*e+h*h*f*f)*b;return i.toPrecisionFixed(4)},b.prototype.rhumbBearingTo=function(a){var b=this._lat.toRad(),c=a._lat.toRad(),d=(a._lon-this._lon).toRad(),e=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(b/2+Math.PI/4));Math.abs(d)>Math.PI&&(d=d>0?-(2*Math.PI-d):2*Math.PI+d);var f=Math.atan2(d,e);return(f.toDeg()+360)%360},b.prototype.rhumbDestinationPoint=function(a,c){var d=this._radius,e=parseFloat(c)/d,f=this._lat.toRad(),g=this._lon.toRad();a=a.toRad();var h=e*Math.cos(a);Math.abs(h)<1e-10&&(h=0);var i=f+h,j=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),k=isFinite(h/j)?h/j:Math.cos(f),l=e*Math.sin(a)/k;return Math.abs(i)>Math.PI/2&&(i=i>0?Math.PI-i:-Math.PI-i),lon2=(g+l+3*Math.PI)%(2*Math.PI)-Math.PI,new b(i.toDeg(),lon2.toDeg())},b.prototype.rhumbMidpointTo=function(a){var c=this._lat.toRad(),d=this._lon.toRad(),e=a._lat.toRad(),f=a._lon.toRad();Math.abs(f-d)>Math.PI&&(d+=2*Math.PI);var g=(c+e)/2,h=Math.tan(Math.PI/4+c/2),i=Math.tan(Math.PI/4+e/2),j=Math.tan(Math.PI/4+g/2),k=((f-d)*Math.log(j)+d*Math.log(i)-f*Math.log(h))/Math.log(i/h);return isFinite(k)||(k=(d+f)/2),k=(k+3*Math.PI)%(2*Math.PI)-Math.PI,new b(g.toDeg(),k.toDeg())},b.prototype.lat=function(a,b){return"undefined"==typeof a?this._lat:d.toLat(this._lat,a,b)},b.prototype.lon=function(a,b){return"undefined"==typeof a?this._lon:d.toLon(this._lon,a,b)},b.prototype.toString=function(a,b){return"undefined"==typeof a&&(a="dms"),d.toLat(this._lat,a,b)+", "+d.toLon(this._lon,a,b)},"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),"undefined"==typeof Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return 180*this/Math.PI}),"undefined"==typeof Number.prototype.toPrecisionFixed&&(Number.prototype.toPrecisionFixed=function(a){var b=this.toPrecision(a);return b=b.replace(/(.+)e\+(.+)/,function(a,b,c){for(b=b.replace(/\./,""),l=b.length-1;c-->l;)b+="0";return b}),b=b.replace(/(.+)e-(.+)/,function(a,b,c){for(b=b.replace(/\./,"");c-->1;)b="0"+b;return"0."+b})}),"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),window.console||(window.console={log:function(){}}),c.latLongToOsGrid=function(a){var b=a.lat().toRad(),d=a.lon().toRad(),e=6377563.396,f=6356256.91,g=.9996012717,h=49..toRad(),i=(-2).toRad(),j=-1e5,k=4e5,l=1-f*f/(e*e),m=(e-f)/(e+f),n=m*m,o=m*m*m,p=Math.cos(b),q=Math.sin(b),r=e*g/Math.sqrt(1-l*q*q),s=e*g*(1-l)/Math.pow(1-l*q*q,1.5),t=r/s-1,u=(1+m+5/4*n+5/4*o)*(b-h),v=(3*m+3*m*m+21/8*o)*Math.sin(b-h)*Math.cos(b+h),w=(15/8*n+15/8*o)*Math.sin(2*(b-h))*Math.cos(2*(b+h)),x=35/24*o*Math.sin(3*(b-h))*Math.cos(3*(b+h)),y=f*g*(u-v+w-x),z=p*p*p,A=z*p*p,B=Math.tan(b)*Math.tan(b),C=B*B,D=y+j,E=r/2*q*p,F=r/24*q*z*(5-B+9*t),G=r/720*q*A*(61-58*B+C),H=r*p,I=r/6*z*(r/s-B),J=r/120*A*(5-18*B+C+14*t-58*B*t),K=d-i,L=K*K,M=L*K,N=M*K,O=N*K,P=O*K,Q=D+E*L+F*N+G*P,R=k+H*K+I*M+J*O;return new c(R,Q)},c.osGridToLatLong=function(a){var c=a.easting,d=a.northing,e=6377563.396,f=6356256.91,g=.9996012717,h=49*Math.PI/180,i=-2*Math.PI/180,j=-1e5,k=4e5,l=1-f*f/(e*e),m=(e-f)/(e+f),n=m*m,o=m*m*m,p=h,q=0;do{p=(d-j-q)/(e*g)+p;var r=(1+m+5/4*n+5/4*o)*(p-h),s=(3*m+3*m*m+21/8*o)*Math.sin(p-h)*Math.cos(p+h),t=(15/8*n+15/8*o)*Math.sin(2*(p-h))*Math.cos(2*(p+h)),u=35/24*o*Math.sin(3*(p-h))*Math.cos(3*(p+h));q=f*g*(r-s+t-u)}while(d-j-q>=1e-5);var v=Math.cos(p),w=Math.sin(p),x=e*g/Math.sqrt(1-l*w*w),y=e*g*(1-l)/Math.pow(1-l*w*w,1.5),z=x/y-1,A=Math.tan(p),B=A*A,C=B*B,D=C*B,E=1/v,F=x*x*x,G=F*x*x,H=G*x*x,I=A/(2*y*x),J=A/(24*y*F)*(5+3*B+z-9*B*z),K=A/(720*y*G)*(61+90*B+45*C),L=E/x,M=E/(6*F)*(x/y+2*B),N=E/(120*G)*(5+28*B+24*C),O=E/(5040*H)*(61+662*B+1320*C+720*D),P=c-k,Q=P*P,R=Q*P,S=Q*Q,T=R*Q,U=S*Q,V=T*Q;p=p-I*Q+J*S-K*U;var W=i+L*P-M*R+N*T-O*V;return new b(p.toDeg(),W.toDeg())},c.parse=function(a){a=a.trim();var b=a.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),d=a.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);b>7&&b--,d>7&&d--;var e=(b-2)%5*5+d%5,f=19-5*Math.floor(b/5)-Math.floor(d/5);if(0>e||e>6||0>f||f>12)return new c(NaN,NaN);switch(a=a.slice(2).replace(/ /g,""),e+=a.slice(0,a.length/2),f+=a.slice(a.length/2),a.length){case 0:e+="50000",f+="50000";break;case 2:e+="5000",f+="5000";break;case 4:e+="500",f+="500";break;case 6:e+="50",f+="50";break;case 8:e+="5",f+="5";break;case 10:break;default:return new c(NaN,NaN)}return new c(e,f)},c.prototype.toString=function(a){a="undefined"==typeof a?10:a;var b=this.easting,c=this.northing;if(isNaN(b)||isNaN(c))return"??";var d=Math.floor(b/1e5),e=Math.floor(c/1e5);if(0>d||d>6||0>e||e>12)return"";var f=19-e-(19-e)%5+Math.floor((d+10)/5),g=5*(19-e)%25+d%5;f>7&&f++,g>7&&g++;var h=String.fromCharCode(f+"A".charCodeAt(0),g+"A".charCodeAt(0));b=Math.floor(b%1e5/Math.pow(10,5-a/2)),c=Math.floor(c%1e5/Math.pow(10,5-a/2));var i=h+" "+b.padLz(a/2)+" "+c.padLz(a/2);return i},"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),"undefined"==typeof String.prototype.padLz&&(Number.prototype.padLz=function(a){for(var b=this.toString(),c=b.length,d=0;a-c>d;d++)b="0"+b;return b}),window.console||(window.console={log:function(){}}),function(a){function b(b,c){function d(b,c){var d,e,f=a(b.target).offset();return clearTimeout(A),A=!1,"undefined"!=typeof b.changedTouches?(d=Math.floor(b.changedTouches[0].pageX-f.left),e=Math.floor(b.changedTouches[0].pageY-f.top)):(d=Math.floor(b.pageX-f.left),e=Math.floor(b.pageY-f.top)),y.x===d&&y.y===e?!0:(null===y.x&&(y.x=d),null===y.y&&(y.y=e),c&&(e+=c),x.beginPath(),x.moveTo(y.x,y.y),x.lineTo(d,e),x.lineCap=t.penCap,x.stroke(),x.closePath(),z.push({lx:d,ly:e,mx:y.x,my:y.y}),y.x=d,void(y.y=e))}function e(){B?v.each(function(){this.ontouchmove=null}):v.unbind("mousemove.signaturepad"),y.x=null,y.y=null,z.length>0&&a(t.output,u).val(JSON.stringify(z))}function f(){return t.lineWidth?(x.beginPath(),x.lineWidth=t.lineWidth,x.strokeStyle=t.lineColour,x.moveTo(t.lineMargin,t.lineTop),x.lineTo(w.width-t.lineMargin,t.lineTop),x.stroke(),void x.closePath()):!1}function g(){e(),x.clearRect(0,0,w.width,w.height),x.fillStyle=t.bgColour,x.fillRect(0,0,w.width,w.height),t.displayOnly||f(),x.lineWidth=t.penWidth,x.strokeStyle=t.penColour,a(t.output,u).val(""),z=[]}function h(a,b){B?v.each(function(){this.addEventListener("touchmove",d,!1)}):v.bind("mousemove.signaturepad",d),d(a,1)}function i(){C=!1,B?v.each(function(){this.removeEventListener("touchstart",e),this.removeEventListener("touchend",e),this.removeEventListener("touchmove",d)}):(v.unbind("mousedown.signaturepad"),v.unbind("mouseup.signaturepad"),v.unbind("mousemove.signaturepad"),v.unbind("mouseleave.signaturepad")),a(t.clear,u).unbind("click.signaturepad")}function j(a){return C?!1:(C=!0,"undefined"!=typeof a.changedTouches&&(B=!0),void(B?(v.each(function(){this.addEventListener("touchend",e,!1),this.addEventListener("touchcancel",e,!1)}),v.unbind("mousedown.signaturepad")):(v.bind("mouseup.signaturepad",function(a){e()}),v.bind("mouseleave.signaturepad",function(a){A||(A=setTimeout(function(){e(),clearTimeout(A),A=!1},500))}),v.each(function(){this.ontouchstart=null}))))}function k(){a(t.typed,u).hide(),g(),v.each(function(){this.ontouchstart=function(a){a.preventDefault(),j(a),h(a,this)}}),v.bind("mousedown.signaturepad",function(a){j(a),h(a,this)}),a(t.clear,u).bind("click.signaturepad",function(a){a.preventDefault(),g()}),a(t.typeIt,u).bind("click.signaturepad",function(a){a.preventDefault(),l()}),a(t.drawIt,u).unbind("click.signaturepad"),a(t.drawIt,u).bind("click.signaturepad",function(a){a.preventDefault()}),a(t.typeIt,u).removeClass(t.currentClass),a(t.drawIt,u).addClass(t.currentClass),a(t.sig,u).addClass(t.currentClass),a(t.typeItDesc,u).hide(),a(t.drawItDesc,u).show(),a(t.clear,u).show()}function l(){g(),i(),a(t.typed,u).show(),a(t.drawIt,u).bind("click.signaturepad",function(a){a.preventDefault(),k()}),a(t.typeIt,u).unbind("click.signaturepad"),a(t.typeIt,u).bind("click.signaturepad",function(a){a.preventDefault()}),a(t.output,u).val(""),a(t.drawIt,u).removeClass(t.currentClass),a(t.typeIt,u).addClass(t.currentClass),a(t.sig,u).removeClass(t.currentClass),a(t.drawItDesc,u).hide(),a(t.clear,u).hide(),a(t.typeItDesc,u).show()}function m(b){for(a(t.typed,u).html(b.replace(/>/g,"&gt;").replace(/</g,"&lt;"));a(t.typed,u).width()>w.width;){var c=a(t.typed,u).css("font-size").replace(/px/,"");a(t.typed,u).css("font-size",c-1+"px")}}function n(b,c){a("p."+c.errorClass,b).remove(),b.removeClass(c.errorClass),a("input, label",b).removeClass(c.errorClass)}function o(b,c,d){b.nameInvalid&&(c.prepend(['<p class="',d.errorClass,'">',d.errorMessage,"</p>"].join("")),a(d.name,c).focus(),a(d.name,c).addClass(d.errorClass),a("label[for="+a(d.name).attr("id")+"]",c).addClass(d.errorClass)),b.drawInvalid&&c.prepend(['<p class="',d.errorClass,'">',d.errorMessageDraw,"</p>"].join(""))}function p(){var b=!0,c={drawInvalid:!1,nameInvalid:!1},d=[u,t],e=[c,u,t];return t.onBeforeValidate&&"function"==typeof t.onBeforeValidate?t.onBeforeValidate.apply(s,d):n.apply(s,d),t.drawOnly&&z.length<1&&(c.drawInvalid=!0,b=!1),""===a(t.name,u).val()&&(c.nameInvalid=!0,b=!1),t.onFormError&&"function"==typeof t.onFormError?t.onFormError.apply(s,e):o.apply(s,e),b}function q(a,b,c){for(var d in a)"object"==typeof a[d]&&(b.beginPath(),b.moveTo(a[d].mx,a[d].my),b.lineTo(a[d].lx,a[d].ly),b.lineCap=t.penCap,b.stroke(),b.closePath(),c&&z.push({lx:a[d].lx,ly:a[d].ly,mx:a[d].mx,my:a[d].my}))}function r(){parseFloat((/CPU.+OS ([0-9_]{3}).*AppleWebkit.*Mobile/i.exec(navigator.userAgent)||[0,"4_2"])[1].replace("_","."))<4.1&&(a.fn.Oldoffset=a.fn.offset,a.fn.offset=function(){var b=a(this).Oldoffset();return b.top-=window.scrollY,b.left-=window.scrollX,b}),a(t.typed,u).bind("selectstart.signaturepad",function(b){return a(b.target).is(":input")}),v.bind("selectstart.signaturepad",function(b){return a(b.target).is(":input")}),!w.getContext&&FlashCanvas&&FlashCanvas.initElement(w),w.getContext&&(x=w.getContext("2d"),a(t.sig,u).show(),t.displayOnly||(t.drawOnly||(a(t.name,u).bind("keyup.signaturepad",function(){m(a(this).val())}),a(t.name,u).bind("blur.signaturepad",function(){m(a(this).val())}),a(t.drawIt,u).bind("click.signaturepad",function(a){a.preventDefault(),k()})),t.drawOnly||"drawIt"===t.defaultAction?k():l(),t.validateFields&&(a(b).is("form")?a(b).bind("submit.signaturepad",function(){return p()}):a(b).parents("form").bind("submit.signaturepad",function(){return p()})),a(t.sigNav,u).show()))}var s=this,t=a.extend({},a.fn.signaturePad.defaults,c),u=a(b),v=a(t.canvas,u),w=v.get(0),x=null,y={x:null,y:null},z=[],A=!1,B=!1,C=!1;a.extend(s,{init:function(){r()},regenerate:function(b){s.clearCanvas(),a(t.typed,u).hide(),"string"==typeof b&&(b=JSON.parse(b)),q(b,x,!0),a(t.output,u).length>0&&a(t.output,u).val(JSON.stringify(z))},clearCanvas:function(){g()},getSignature:function(){return z},getSignatureString:function(){return JSON.stringify(z)},getSignatureImage:function(){var a=document.createElement("canvas"),b=null,c=null;return a.style.position="absolute",a.style.top="-999em",a.width=w.width,a.height=w.height,document.body.appendChild(a),!a.getContext&&FlashCanvas&&FlashCanvas.initElement(a),b=a.getContext("2d"),b.fillStyle=t.bgColour,b.fillRect(0,0,w.width,w.height),b.lineWidth=t.penWidth,b.strokeStyle=t.penColour,q(z,b),c=a.toDataURL.apply(a,arguments),document.body.removeChild(a),a=null,c}})}a.fn.signaturePad=function(a){var c=null;return this.each(function(){c=new b(this,a),c.init()}),c},a.fn.signaturePad.defaults={defaultAction:"typeIt",displayOnly:!1,drawOnly:!1,canvas:"canvas",sig:".sig",sigNav:".sigNav",bgColour:"#ffffff",penColour:"#145394",penWidth:2,penCap:"round",lineColour:"#ccc",lineWidth:2,lineMargin:5,lineTop:35,name:".name",typed:".typed",clear:".clearButton",typeIt:".typeIt a",drawIt:".drawIt a",typeItDesc:".typeItDesc",drawItDesc:".drawItDesc",output:".output",currentClass:"current",validateFields:!0,errorClass:"error",errorMessage:"Please enter your name",errorMessageDraw:"Please sign the document",onBeforeValidate:null,onFormError:null}}(jQuery);var e=(function(a,b,c){function d(b){for(var d=[],e=0,f=b.length;f>e;e+=c)d.push(a.apply(null,b.slice(e,e+c)));return d.join("")}function e(a){return[a&b,a>>8&b,a>>16&b,a>>24&b]}function f(a,b,c){for(var d,e,f,g,h,i,j=4*b,k=c-1,l=[];c--;)for(h=j*(k-c),i=j*c,d=0;b>d;d++)e=4*d,f=h+e,g=i+e,l[f]=a[g+2],l[f+1]=a[g+1],l[f+2]=a[g],l[f+3]=a[g+3];return l}function g(a){var c,g=a.width,h=a.height,i=[].concat(e(g),e(h),1,0,32,0,3,0,0,0,e(g*h*4),19,11,0,0,19,11,0,0,0,0,0,0,0,0,0,0,0,0,b,0,0,b,0,0,b,0,0,0,0,0,0,b,32,110,105,87),j=f(a.getContext("2d").getImageData(0,0,g,h).data,g,h);return i=e(i.length).concat(i),c=14+i.length,"data:image/bmp;base64,"+btoa(d([66,77].concat(e(c+j.length),0,0,0,0,e(c),i,j)))}return g}(String.fromCharCode,255,32767),function(a){return a.views={},a.models={},a.collections={},a.config={},a}(e||{})),f=Backbone.View.extend({onLoad:function(){},onLoadEnd:function(){}}),g='<script type="text/template" id="temp_form_structure"><div id="fh_appform_container" class="fh_appform_form_area col-xs-12 fh_appform_container">  <div class="fh_appform_logo_container  col-xs-12">    <div class="fh_appform_logo">    </div>  </div>  <div class="fh_appform_form_title col-xs-12 text-center">    <%= title%>  </div>  <div class="fh_appform_page_title col-xs-12 text-center">    <%= description%>  </div></div></script><script type="text/template" id="temp_form_buttons"><div id="fh_appform_navigation_buttons" class="fh_appform_button_bar btn-group btn-group-justified col-xs-12">  <div class="btn-group">    <button class="fh_appform_button_saveDraft fh_appform_button_main fh_appform_button_action btn btn-primary">Save Draft</button>  </div>  <div class="btn-group">    <button class="fh_appform_button_previous fh_appform_button_default btn btn-default">Previous</button>  </div>  <div class="btn-group">    <button class="fh_appform_button_next fh_appform_button_default btn btn-default">Next</button>  </div>  <div class="btn-group">    <button class="fh_appform_button_submit fh_appform_button_action btn btn-primary">Submit</button>  </div></div></script><script type="text/template" id="temp_page_structure"><div id="fh_appform_<%= sectionId %>" class="fh_appform_section_area panel panel-default">  <div class="panel-heading text-center col-xs-12 fh_appform_section_title" data-field="fh_appform_<%= sectionId %>_body">    <i id="fh_appform_<%= sectionId %>_body_icon" class="pull-right <%= index === 0 ? "icon-chevron-sign-down" : "icon-chevron-sign-up"%> section_icon" ></i><%=title%> <div><%=description%></div>  </div>  <div id="fh_appform_<%= sectionId %>_body" class="panel-body col-xs-12" style="<%= index === 0 ? "" : "display:none;"%>">  </div></div></script><script type="text/template" id="temp_field_structure"><div class="fh_appform_input_wrapper col-xs-12">  <% if(repeating === true){ %>    <div class="fh_appform_field_title col-xs-12">      <i class="<%= field_icon %>"><%= icon_content %></i>      <%= title %>    </div>  <%} else {%>    <div class="fh_appform_field_title col-xs-12 <%= required %>">      <i class="<%= field_icon %>"><%= icon_content %></i>      <%= title %>    </div>  <% } %>  <% if(helpText){ %>    <p class="fh_appform_field_instructions col-xs-12">      <%= helpText %>    </p>  <% } %></div><div class="fh_appform_field_button_bar col-xs-12" >  <button class="fh_appform_removeInputBtn special_button fh_appform_button_action btn btn-primary col-xs-offset-1 col-xs-5">-</button>  <button class="special_button fh_appform_addInputBtn fh_appform_button_action btn btn-primary col-xs-offset-1 col-xs-5 pull-right">+</button></div></script><script type="text/template" id="temp_field_wrapper"><div id="wrapper_<%= fieldId %>_<%= index %>" class="col-xs-12 fh_appform_field_wrapper">  <% if(repeating === true){ %>    <div class="<%= required %> fh_appform_field_title fh_appform_field_numbering col-xs-2">      <%=d_index%>.    </div>  <% } %>  <div class="fh_appform_field_input_container repeating <%= repeating === true ? "col-xs-10" : "col-xs-12"%>" >    <div class="fh_appform_field_error_container col-xs-12 fh_appform_hidden">    </div>  </div></div></script><script type="text/template" id="temp_config_camera"><div class="panel panel-default fh_appform_section_area col-xs-12" id="camera-settings">  <div class="panel-heading" data-field="camera-settings-body">    <h3 class="panel-title fh_appform_section_title"><i id="camera-settings-body-icon" class="pull-right icon-chevron-sign-down" > </i>Camera Settings</h3>  </div>  <div class="panel-body" id="camera-settings-body">    <div class="col-xs-12 fh_appform_section_area">      <div class="form-group fh_appform_field_area">        <label class="fh_appform_field_title col-xs-12" for="targetWidth">Width (px)</label>        <input type="number" class="form-control fh_appform_field_input text-center" id="targetWidth" value="<%= targetWidth %>" data-key="targetWidth">      </div>      <div class="form-group fh_appform_field_area">        <label class="fh_appform_field_title col-xs-12" for="targetHeight">Height (px)</label>        <input type="number" class="form-control fh_appform_field_input text-center" id="targetHeight" value="<%= targetHeight %>" data-key="targetHeight">      </div>      <div class="form-group fh_appform_field_area">        <label class="fh_appform_field_title col-xs-12" for="quality">Quality (%)</label>        <input type="number" class="form-control fh_appform_field_input text-center" id="quality" value="<%= quality %>" data-key="quality" min="0" max="100">      </div>    </div>  </div></div></script><script type="text/template" id="temp_config_submissions"><div class="panel panel-default fh_appform_section_area col-xs-12" id="submission-settings">  <div class="panel-heading" data-field="submission-settings-body">    <h3 class="panel-title fh_appform_section_title"><i id="submission-settings-body-icon" class="pull-right icon-chevron-sign-down" > </i>Submission Settings</h3>  </div>  <div class="panel-body" id="submission-settings-body">    <div class="col-xs-12 fh_appform_section_area">      <div class="form-group fh_appform_field_area">        <label class="fh_appform_field_title col-xs-12" for="max_retries">Max Retries</label>        <input type="number" class="form-control fh_appform_field_input text-center" id="max_retries" value="<%= max_retries %>" data-key="max_retries">      </div>      <div class="form-group fh_appform_field_area">        <label class="fh_appform_field_title col-xs-12" for="timeout">Timeout (s)</label>        <input type="number" class="form-control fh_appform_field_input text-center" id="timeout" value="<%= timeout %>" data-key="timeout">      </div>      <div class="form-group fh_appform_field_area">        <label class="fh_appform_field_title col-xs-12" for="sent_items_to_keep_list">Number of sent submissions to keep.</label>        <select id="sent_items_to_keep_list" multiple data-role="tagsinput" data-key="sent_items_to_keep_list">          <% for(var sent_item_index = 0; sent_item_index < sent_items_to_keep_list.length; sent_item_index++){ %>            <option value="<%= sent_items_to_keep_list[sent_item_index] %>"><%= sent_items_to_keep_list[sent_item_index] %></option>          <%}%>        </select>      </div>    </div>  </div></div><div class="modal fade" id="logsModal" tabindex="-1" role="dialog" aria-labelledby="logsModalLabel" aria-hidden="true">  <div class="modal-dialog">    <div class="modal-content fh_appform_section_area">      <div class="modal-header">        <h4 class="modal-title fh_appform_section_title text-center" id="logsModalLabel">Info</h4>      </div>      <div class="modal-body" id="logsModalLabelBody">      </div>      <div class="modal-footer">        <button type="button" class="btn btn-default fh_appform_button_cancel" data-dismiss="modal">Close</button>      </div>    </div>  </div></div></script><script type="text/template" id="temp_config_log"><ul class="list-group col-xs-12">  <%= listStr%></ul></script><script type="text/template" id="temp_config_log_item">  <li class="list-group-item <%= logClass %>" style="overflow:auto;"><%= message%></li></script><script type="text/template" id="temp_config_debugging"><div class="panel panel-default fh_appform_section_area col-xs-12" id="debugging-settings">  <div class="panel-heading" data-field="debugging-settings-body">    <h3 class="panel-title fh_appform_section_title"><i id="debugging-settings-body-icon" class="pull-right icon-chevron-sign-down" > </i>Debugging Options</h3>  </div>  <div class="panel-body" id="debugging-settings-body">      <div class="col-xs-12 fh_appform_section_area">          <div class="form-group fh_appform_field_area" id="log_level_div">              <label class="fh_appform_field_title col-xs-12" for="log_level">Log Level</label>              <select class="form-control fh_appform_field_input text-center" id="log_level" value="<%= log_level %>" data-key="log_level" >                <% for (var i=0;i<log_levels.length;i++){                  var val=log_levels[i];                  var selected=(i==log_level)?"selected":""; %>                  <option value="<%= i %>" <%= selected%>><%= val%></option>              <%}%>              </select>          </div>          <div class="form-group fh_appform_field_area" id="log_email_div">              <label class="fh_appform_field_title col-xs-12" for="log_email">Log Reporting Email</label>              <input type="email" class="form-control fh_appform_field_input text-center" id="log_email" value="<%= log_email %>" data-key="logger" value="<%= log_email%>">          </div>          <div class="form-group fh_appform_field_area" id="log_line_limit_div">              <label class="fh_appform_field_title col-xs-12" for="log_line_limit">Log Line Limit</label>              <input type="number" class="form-control fh_appform_field_input text-center" id="log_line_limit" value="<%= log_line_limit %>" data-key="log_line_limit" value="<%= log_line_limit%>" min="0">          </div>          <div class="btn-group-vertical col-xs-12">              <div class="btn-group" data-toggle="buttons" id="logger_wrapper_div">                <button class="btn btn-primary text-left fh_appform_button_action <%= logger?"active":"" %>" type="button" data-key="logger" id="logger"><i class="<%= logger?"icon-circle":"icon-circle-blank" %> choice_icon"></i><div id="logger_message"> <%= logger?"Logging Enabled":"Logging Disabled" %> </div>                </button>              </div>              <button class="btn btn-primary fh_appform_button_action" id="fh_appform_show_deviceId">Show Device Id</button>              <button type="button" class="btn btn-default fh_appform_button_action" id="_viewLogsBtn">View Logs</button>              <button type="button" class="btn btn-default fh_appform_button_action" id="_sendLogsBtn">Send Logs</button>              <button type="button" class="btn btn-default fh_appform_button_cancel" id="_clearLogsBtn">Clear Logs</button>          </div>      </div>  </div></div></script><script type="text/template" id="temp_config_misc">  <div class="panel panel-default fh_appform_section_area  col-xs-12 first" id="misc-settings">  <div class="panel-heading" data-field="misc-settings-body">    <h3 class="panel-title fh_appform_section_title"><i id="misc-settings-body-icon" class="pull-right icon-chevron-sign-down" > </i>Misc Settings</h3>  </div>  <div class="panel-body" id="misc-settings-body">      <div class="col-xs-12 fh_appform_section_area">          <div class="btn-group-vertical col-xs-12">              <button type="button" class="btn btn-default fh_appform_button_action" id="_refreshFormsButton">Refresh Forms</button>          </div>      </div>  </div></div></script><script type="text/template" id="forms-logo-sdk"><div class="fh_appform_logo_container  col-xs-12">  <div class="fh_appform_logo">  </div></div></script>',h=f.extend({events:{"click button#formlist_reload":"reload"},templates:{list:'<ul class="form_list fh_appform_body"></ul>',header:"<h2>Your Forms</h2><h4>Choose a form from the list below</h4>",error:'<li><button id="formlist_reload" class="button-block <%= enabledClass %> <%= dataClass %> fh_appform_button_default"><%= name %><div class="loading"></div></button></li>'},initialize:function(a){this.options=a,$fh.forms.log.l("Initialize Form List"),_.bindAll(this,"render","appendForm"),this.views=[],e.collections.forms.bind("reset",function(a,b){null!=b&&b.noFetch||e.collections.forms.each(function(a){a.fetch()})}),e.collections.forms.bind("add remove reset error",this.render,this),this.model.on("updated",this.render)},reload:function(){$fh.forms.log.l("Reload Form List");var a=this;this.onLoad(),this.model.refresh(!0,function(b,c){this.onLoadEnd(),a.model=c,a.render()})},show:function(){$(this.$el).show()},hide:function(){$(this.$el).hide()},renderErrorHandler:function(a){try{(null==a||a.match("error_ajaxfail"))&&(a="An unexpected error occurred.")}catch(b){a="An unexpected error occurred."}var c=_.template(this.templates.error);c=c({name:a+"<br/>Please Retry Later",enabledClass:"fh_appform_button_cancel",dataClass:"fetched"
}),$("ul",this.$el).append(c)},render:function(){this.options.parentEl.append(this.templates.list);var a=this.model.getFormsList();a.length>0?(this.options.parentEl.find("ul").append(this.templates.header),_(a).forEach(function(a){this.appendForm(a)},this)):this.renderErrorHandler(arguments[1])},appendForm:function(a){var b=new i({model:a});this.views.push(b),$("ul",this.options.parentEl).append(b.render().$el)},initFormList:function(a,b){var c=this;$fh.forms.getForms({fromRemote:a},function(a,d){a?b(a):(c.model=d,b(null,c))})}}),i=f.extend({events:{"click button.show.fetched":"show","click button.show.fetch_error":"fetch"},templates:{form_button:'<li><button class="show button-block <%= enabledClass %> <%= dataClass %>"><%= name %><div class="loading"></div></button></li>'},render:function(){var a,b=!0;return a=_.template(this.templates.form_button),a=a({name:this.model.name,enabledClass:b?"button-main":"",dataClass:"fetched"}),this.$el.html(a),this.$el.find("button").not(".fh_full_data_loaded"),this},unrender:function(){$(this.$el).remove()},show:function(){var a=this.model._id,b=new m({parentEl:$("#backbone #page")});b.loadForm({formId:a},function(){b.render(),Backbone.history.navigate("form",!0)})},fetch:function(){}}),j=Backbone.View.extend({className:"fh_appform_field_area col-xs-12",errMessageContainer:".fh_appform_field_error_container",requiredClassName:"fh_appform_field_required",errorClassName:"fh_appform_field_error",repeatingClassName:"repeating",nonRepeatingClassName:"non_repeating",addInputButtonClass:".fh_appform_addInputBtn",removeInputButtonClass:".fh_appform_removeInputBtn",fieldWrapper:'<div class="fh_appform_input_wrapper"></div>',input:"<input class='fh_appform_field_input <%= repeatingClassName%> col-xs-12' data-field='<%= fieldId %>' data-index='<%= index %>' value='<%= value %>' type='<%= inputType %>' />",fieldIconNames:{text:"icon-font",textarea:"icon icon-align-justify",url:"icon-link",number:"icon-number",emailAddress:"icon-envelope-alt",dropdown:"icon-caret-down",checkboxes:"icon-check",location:"icon-location-arrow",locationMap:"icon-map-marker",photo:"icon-camera",signature:"icon-pencil",file:"icon-cloud-upload",dateTime:"icon-calendar",sectionBreak:"icon-minus",radio:"icon-circle-blank",barcode:"icon-barcode",sliderNumber:"icon-number",readOnly:"icon-comment"},events:{change:"contentChanged","blur input,select,textarea":"validate","click .fh_appform_addInputBtn":"onAddInput","click .fh_appform_removeInputBtn":"onRemoveInput"},onAddInput:function(){this.addElement(),this.checkActionBar()},onRemoveInput:function(){this.removeElement(),this.checkActionBar()},checkActionBar:function(){var a=this.curRepeat,b=this.maxRepeat,c=this.initialRepeat;b>a?this.$fh_appform_fieldActionBar.find(this.addInputButtonClass).show():this.$fh_appform_fieldActionBar.find(this.addInputButtonClass).hide(),a>c?this.$fh_appform_fieldActionBar.find(this.removeInputButtonClass).show():this.$fh_appform_fieldActionBar.find(this.removeInputButtonClass).hide()},removeElement:function(){var a=this.curRepeat,b=a-1;this.getWrapper(b).remove(),this.curRepeat--},renderInput:function(a){var b=this.model.getFieldId(),c=this.getHTMLInputType(),d=this.model.isRepeating()?this.repeatingClassName:this.nonRepeatingClassName,e=_.template(this.input);return e=e({fieldId:b,index:a,inputType:c,repeatingClassName:d,value:this.model.getDefaultValue()}),$(e)},getHTMLInputType:function(){return this.type||"text"},getFieldRequired:function(a){var b="";return this.model.isRequired()&&a<this.initialRepeat&&(b=this.requiredClassName),b},addElement:function(){var a=this,b=this.curRepeat,c=this.renderInput(b),d=_.template(a.options.formView.$el.find("#temp_field_wrapper").html());d=d({index:b,d_index:b+1,required:this.model.isRequired()?a.requiredClassName:"",fieldId:this.model.getFieldId(),repeating:this.model.isRepeating()}),d=$(d),d.find(".fh_appform_field_input_container").prepend(c),this.$fieldWrapper.append(d),this.curRepeat++,this.onElementShow(b)},onElementShow:function(a){$fh.forms.log.d("Show done for field "+a)},render:function(){var a=this;this.initialRepeat=1,this.maxRepeat=1,this.curRepeat=0;var b=_.template(a.options.formView.$el.find("#temp_field_structure").html());b=b({title:this.model.getName(),helpText:this.model.getHelpText(),required:this.model.isRequired()?a.requiredClassName:"",repeating:this.model.isRepeating(),field_icon:this.fieldIconNames[this.model.getType()],icon_content:"number"===this.model.getType()?123:""}),b=$(b),this.$fieldWrapper=$(b[0]),this.$fh_appform_fieldActionBar=$(b[1]),this.readonly&&this.$fh_appform_fieldActionBar.hide(),this.model.isRepeating()&&(this.initialRepeat=this.model.getMinRepeat(),this.maxRepeat=this.model.getMaxRepeat());for(var c=0;c<this.initialRepeat;c++)this.addElement();this.$el.append(b),this.$el.attr("data-field",this.model.getFieldId()),this.options.parentEl.append(this.$el),this.$el.hasClass("hide")&&this.hide(!0);var d=this.options.formView.getSubmission();d&&(this.submission=d,this.submission.getInputValueByFieldId(this.model.get("_id"),function(b,c){a.value(c)})),this.show(),this.checkActionBar(),this.onRender()},onRender:function(){},initialize:function(a){this.options=a,this.readonly=a.formView.readonly,_.bindAll(this,"dumpContent","clearError","onAddInput","onRemoveInput","contentChanged"),this.render()},dumpContent:function(){$fh.forms.log.d("Value changed :: "+JSON.stringify(this.value()))},getTopView:function(){var a,b=this.options.parentView;do a=b.options.parentView,a&&(b=a);while(a);return b},validate:function(){},validateElement:function(a,b,c){var d=this,e=d.model.getFieldId();d.model.validate(b,a,function(b,f){if(b)d.setErrorText(a,"Error validating field: "+b),c&&c(b);else{var g=f.validation[e];if(g.valid)d.clearError(a),c&&c();else{var h=g.errorMessages.join(", ");d.setErrorText(a,h),c&&c(h)}}})},setValueToSubmission:function(a,b){var c=this;c.options.formView.addFieldInputValue(a,b)},removeValueFromSubmission:function(a){this.options.formView.removeFieldInputValue(a)},setErrorText:function(a,b){var c=this.getWrapper(a);c.find(this.errMessageContainer).text(b),c.find(this.errMessageContainer).show(),c.find(this.errMessageContainer).addClass(this.errorClassName),0===c.find("input[type='checkbox']").length&&c.find("input,textarea,select").addClass(this.errorClassName)},contentChanged:function(a){var b=this;a.preventDefault(),b.options.formView.markFormEdited();var c=$(a.currentTarget),d=$(a.target),e=c.data().index||d.data().index,f=b.valueFromElement(e);b.validateElement(e,f),b.updateOrRemoveValue({index:e,value:f,isStore:!0,fieldId:b.model.getFieldId()},function(){b.checkRules()})},checkRules:function(){this.trigger("checkrules")},updateOrRemoveValue:function(a,b){var c=this;return a.value?void c.setValueToSubmission(a,b):(c.removeValueFromSubmission(a),b())},isRequired:function(){return this.model.isRequired()},hide:function(a){this.$el.hide()},renderButton:function(a,b,c){var d=$("<button>");return d.addClass("special_button fh_appform_button_action col-xs-12"),d.addClass(c),d.attr("data-index",a),d.html(" "+b),this.htmlFromjQuery(d)},addButton:function(a,b,c){var d=this,e=$("<button>");return e.addClass("special_button fh_appform_button_action col-xs-12"),e.addClass(b),e.html(" "+c),e.click(function(a){return d.action(this),a.preventDefault(),!1}),a.append(e),e},show:function(){this.$el.show()},defaultValue:function(){var a={};return a[this.model.get("_id")]=this.model.get("DefaultVal"),a},htmlFromjQuery:function(a){return $("<div>").append(a.clone()).html()},value:function(a){var b=this;return a&&!_.isEmpty(a)&&b.valuePopulate(a),b.getValue()},getValue:function(){for(var a=[],b=this.curRepeat,c=0;b>c;c++)a[c]=this.valueFromElement(c);return a},valueFromElement:function(a){var b=this.getWrapper(a);return b.find("input,select,textarea").val()||""},valuePopulate:function(a){for(var b=a.length;b>this.curRepeat;)this.addElement();for(var c=0;c<a.length;c++){var d=a[c];null!==d&&"undefined"!=typeof d&&this.valuePopulateToElement(c,d)}},valuePopulateToElement:function(a,b){var c=this.getWrapper(a);c.find("input,select,textarea").val(b)},getWrapper:function(a){var b=this.model.getFieldId();return this.$fieldWrapper.find("#wrapper_"+b+"_"+a)},fillArray:function(a,b){for(var c=0;c<a.length;c++)a[c]||(a[c]=b)},clearError:function(a){var b=this.getWrapper(a);b.find(this.errMessageContainer).hide(),b.find("."+this.errorClassName).removeClass(this.errorClassName)}});FieldCameraView=j.extend({input:"<img class='imageThumb' width='100%' data-field='<%= fieldId %>' data-index='<%= index %>'  type='<%= inputType %>'>",html5Cam:'<div class="html5Cam"><div class="camActionBar"><button class="camCancel camBtn fh_appform_button_cancel">Cancel</button><button class="camOk camBtn fh_appform_button_action">Ok</button></div><div class="cam"></div></div>',onElementShow:function(a){var b=$(this.renderButton(a,"<i class='icon-camera'></i>&nbsp;Capture Photo From Camera","fhcam")),c=$(this.renderButton(a,"<i class='icon-folder-open'></i>&nbsp;Choose Photo from Library","fhcam_lib")),d=$(this.renderButton(a,"<i class='icon-remove-circle'></i>&nbsp;Remove Photo","remove")),e=this.model.getPhotoOptions();if(!this.readonly){this.getWrapper(a).append(b),this.getWrapper(a).append(c),this.getWrapper(a).append(d);var f=this;b.on("click",function(b){f.addFromCamera(b,a)}),c.on("click",function(b){f.addFromLibrary(b,a)}),d.on("click",function(b){f.removeThumb(b,a)}),d.hide(),"library"===e.pictureSource?b.hide():"camera"===e.pictureSource&&c.hide()}},setImage:function(a,b){var c=this.getWrapper(a),d=c.find("img.imageThumb");d.attr("src",b).show(),c.find("button").hide(),c.find(".remove").show()},getImageThumb:function(a){var b=this.getWrapper(a),c=b.find("img.imageThumb");return c},getCameraBtn:function(a){var b=this.getWrapper(a);return b.find("button.fhcam")},getLibBtn:function(a){var b=this.getWrapper(a);return b.find("button.fhcam_lib")},getRemoveBtn:function(a){var b=this.getWrapper(a);return b.find("button.remove")},removeThumb:function(a,b){a.preventDefault();var c=this.getImageThumb(b);c.removeAttr("src").hide(),this.getLibBtn(b).show(),this.getCameraBtn(b).show(),this.getRemoveBtn(b).hide()},addFromCamera:function(a,b){a.preventDefault();var c=this,d={};if(d=this.model.getPhotoOptions(),d.cancelHtml5Camera=!0,this.model.utils.isPhoneGapCamAvailable())this.model.utils.takePhoto(d,function(a,d){a?$fh.forms.log.e("Error Taking Photo",a):c.setImage(b,d)});else if(this.model.utils.isHtml5CamAvailable()){var e=$(c.html5Cam),f=e.find(".camActionBar");e.css({position:"fixed",top:0,bottom:0,left:0,right:0,background:"#000","z-index":9999}),f.css({"text-align":"center",padding:"10px",background:"#999"}),f.find("button").css({width:"80px",height:"30px","margin-right":"8px","font-size":"1.3em"}),c.$el.append(e),f.find(".camCancel").on("click",function(){c.model.utils.cancelHtml5Camera(),e.remove()}),this.model.utils.initHtml5Camera(d,function(a,g){a?($fh.forms.log.e(a),e.remove()):($(g).css("width","100%"),e.find(".cam").append(g),f.find(".camOk").on("click",function(){c.model.utils.takePhoto(d,function(a,d){e.remove(),a?$fh.forms.log.e(a):c.setImage(b,d)})}))})}},addFromLibrary:function(a,b){var c=this,d={};if(c.model.utils.isPhoneGapCamAvailable())a.preventDefault(),d.sourceType=Camera.PictureSourceType.PHOTOLIBRARY,c.model.utils.takePhoto(d,function(a,d){a&&$fh.forms.log.e("error occured with take photo ",JSON.stringify(a)),d&&c.setImage(b,d)});else{var e=document.createElement("input");e.type="file";var f=$(e);f.hide(),c.$el.find('input[type="file"]').length>0?f=$(c.$el.find('input[type="file"]')[0]):(c.$el.append(f),f=$(c.$el.find('input[type="file"]')[0])),f.off("click"),f.on("click",function(a){}),f.off("change"),f.on("change",function(){var a=f[0];a.files&&a.files.length>0&&(a=a.files[0],f.remove(),c.model.utils.fileSystem.fileToBase64(a,function(a,d){a?$fh.forms.log.e(a):c.setImage(b,d,!0)}))}),f.trigger("click")}},valueFromElement:function(a){var b=this.getImageThumb(a);return b.attr("src")},valuePopulateToElement:function(a,b){if(b.localURI)this.setImage(a,b.localURI);else if(b.data){var c=null;if(b.imgHeader){c=b.data;var d=b.imgHeader+c;this.setImage(a,d)}else this.setImage(a,b.data)}else $fh.forms.log.e("No image parameters present to populate image data: "+JSON.stringify(b))}}),FieldCheckboxView=j.extend({checkboxes:'<div class="btn-group-vertical fh_appform_field_input col-xs-12 <%= repeatingClassName%>" data-toggle="buttons-checkbox"></div>',choice:'<button class="btn btn-primary text-left fh_appform_button_action col-xs-12" type="button" value="<%= value %>" name="<%= fieldId %>[]" data-field="<%= fieldId %>" data-index="<%= index %>"><i class="icon-check-empty choice_icon"></i><%= choice %></button>',renderInput:function(a){var b=this,c=this.model.getCheckBoxOptions(),d=this.model.getFieldId(),e="",f=(this.getFieldRequired(a),this.model.isRepeating()?this.repeatingClassName:this.nonRepeatingClassName);return e=_.template(this.checkboxes),e=e({repeatingClassName:f}),e=$(e),$.each(c,function(c,f){var g=_.template(b.choice);g=g({fieldId:d,index:a,choice:f.label,value:f.label,checked:f.checked?"checked='checked'":""}),g=$(g),f.checked===!0&&(g.addClass("active"),g.addClass("option-checked"),g.find(".choice_icon").removeClass("icon-check-empty"),g.find(".choice_icon").addClass("icon-check")),g.off("click"),g.on("click",function(a){$(this).toggleClass("option-checked"),$(this).find(".choice_icon").toggleClass("icon-check-empty"),$(this).find(".choice_icon").toggleClass("icon-check"),$(this).trigger("change")}),e.append(g)}),e},valueFromElement:function(a){var b={selections:[]},c=this.getWrapper(a),d=c.find("button.option-checked");return d.each(function(){b.selections.push($(this).val())}),b},valuePopulateToElement:function(a,b){var c=this.getWrapper(a);if(b&&b instanceof Array){c.find("button.option-checked").removeClass("active"),c.find("button .choice_icon").addClass("icon-check-empty"),c.find("button .choice_icon").removeClass("icon-check");for(var d=0;d<b.length;d++){var e=b[d];c.find("button[value='"+e+"']").addClass("active"),c.find("button[value='"+e+"'] .choice_icon").removeClass("icon-check-empty"),c.find("button[value='"+e+"'] .choice_icon").addClass("icon-check")}}}}),FieldEmailView=j.extend({type:"email"}),FieldFileView=j.extend({input:"<button data-field='<%= fieldId %>' class='special_button fh_appform_button_action select col-xs-12' data-index='<%= index %>'  type='<%= inputType %>'><i class='icon-folder-openSelect'></i> A File</button><button data-field='<%= fieldId %>' class='special_button fh_appform_button_action remove col-xs-12' data-index='<%= index %>'  type='<%= inputType %>'><i class='icon-remove-circle'></i>&nbsp;Remove File Entry</button><input class='fh_appform_field_input' data-field='<%= fieldId %>' data-index='<%= index %>' type='<%= inputType %>' style=''/>",type:"file",initialize:function(){var a=this;a.fileObjs=[],j.prototype.initialize.apply(a,arguments)},contentChanged:function(a){var b=this,c=a.target,d=$(c),e=d.data().index,f=c.files?c.files[0]:null;b.updateOrRemoveValue({fieldId:b.model.getFieldId(),value:f,isStore:!0,index:e},function(){b.checkRules(),f?b.validateAndUpdateButtons(e,f):b.showButton(e,null)})},validateAndUpdateButtons:function(a,b){var c=this;c.validateElement(a,b,function(d){if(d)filejQ.val(""),c.showButton(a,null);else{var e={fileName:b.name,fileSize:b.size,fileType:b.type};c.showButton(a,e)}})},valueFromElement:function(a){var b=this.getWrapper(a),c=b.find(".fh_appform_field_input")[0];return c.files&&c.files.length>0?c.files[0]:this.fileObjs[a]},showButton:function(a,b){var c=this,d=this.getWrapper(a),e=d.find("button.select"),f=d.find("button.remove"),g=d.find(".fh_appform_field_input");e.show(),null==b?(e.text("Select A File"),f.hide()):(e.text(b.fileName+"("+b.fileSize+")"),f.show()),this.readonly&&f.hide(),navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)&&($(e).text("File upload not supported"),$(e).attr("disabled",!0),e.off("click")),f.off("click"),f.on("click",function(){var a=$(this).data().index;c.fileObjs&&c.fileObjs[a]&&(c.fileObjs[a]=null),c.resetFormElement(g),c.showButton(a,null)})},resetFormElement:function(a){a.wrap("<form>").closest("form").get(0).reset(),a.unwrap()},valuePopulateToElement:function(a,b){b&&(this.fileObjs[a]=b,this.showButton(a,b))},onElementShow:function(a){this.showButton(a,null)}}),FieldGeoView=j.extend({input:"<input class='fh_appform_field_input col-xs-12 text-center <%= repeatingClassName%>' data-field='<%= fieldId %>' data-index='<%= index %>'  type='<%= inputType %>' disabled/>",buttonHtml:"<i class='icon-location-arrow'></i>&nbsp<%= buttonText %>",type:"text",initialize:function(){this.geoValues=[],this.locationUnit=this.model.getFieldDefinition().locationUnit,j.prototype.initialize.apply(this,arguments)},renderInput:function(a){var b=this.model.isRepeating()?this.repeatingClassName:this.nonRepeatingClassName,c=_.template(this.input);return c=c({fieldId:this.model.getFieldId(),index:a,inputType:"text",repeatingClassName:b}),$(c)},onElementShow:function(a){var b=this,c=$(this.renderButton(a,"<i class='icon-remove-circle'></i>&nbsp;Remove Location","remove")),d="latlong"===this.locationUnit?"Capture Location (Lat/Lon)":"Capture Location (East/North)",e=_.template(this.buttonHtml);e=e({buttonText:d});var f=$(this.renderButton(a,e,"fhgeo"));this.readonly||(this.getWrapper(a).append(f),this.getWrapper(a).append(c),f.on("click",function(c){b.getLocation(c,a)}),c.on("click",function(d){b.clearLocation(d,a),c.hide()}),c.hide())},clearLocation:function(a,b){var c=this.getWrapper(b).find(".fh_appform_field_input");c.val(""),this.geoValues.splice(b,1)},convertLocation:function(a){var b=a.lat,d=a.lon,e={lat:function(){return b},lon:function(){return d}};return c.latLongToOsGrid(e)},renderElement:function(a){var b=this.geoValues[a],c="",d=this.getWrapper(a),e=d.find(".fh_appform_field_input");b?("latlong"===this.locationUnit?(c="("+b.lat+", "+b["long"]+")",d.find(".remove").show()):"eastnorth"===this.locationUnit?(c="("+b.zone+" "+b.eastings+", "+b.northings+")",d.find(".remove").show()):$fh.forms.log.e("FieldGeo: Invalid location unit: "+c),e.val(c)):d.find(".remove").hide(),e.blur()},valuePopulateToElement:function(a,b){this.geoValues[a]=b,this.renderElement(a)},valueFromElement:function(a){return this.geoValues[a]},getLocation:function(a,b){var c=this;a.preventDefault();var d=c.getWrapper(b),e=d.find(".fh_appform_field_input");return $fh.geo&&$fh.geo(function(a){if(a.lat=Number(Number(a.lat).toFixed(4)),a.lon=Number(Number(a.lon).toFixed(4)),"latlong"===c.locationUnit)c.geoValues[b]={lat:a.lat,"long":a.lon};else if("eastnorth"===c.locationUnit){var d=c.convertLocation(a),e=d.toString().split(" ");c.geoValues[b]={zone:e[0],eastings:e[1],northings:e[2]}}else $fh.forms.log.e("FieldGeo: Invalid location unit: "+locStr);c.renderElement(b)},function(a,b){e.attr("placeholder","Location could not be determined")}),!1}}),FieldMapView=j.extend({extension_type:"fhmap",input:"<div data-index='<%= index %>' id='<%= id%>' class='fh_map_canvas' style='width:<%= width%>; height:<%= height%>;'></div>",initialize:function(){this.mapInited=0,this.maps=[],this.mapData=[],this.markers=[],this.allMapInitFunc=[],this.loadingIntervals=[],this.mapSettings={mapWidth:"100%",mapHeight:"300px",defaultZoom:16,location:{lon:-5.80078125,lat:53.12040528310657}},j.prototype.initialize.apply(this,arguments)},renderInput:function(a){var b=_.template(this.input);return b=b({width:this.mapSettings.mapWidth,height:this.mapSettings.mapHeight,index:a,id:Math.random()}),$(b)},show:function(){this.$el.show(),this.mapResize()},onMapInit:function(a){this.mapInited++,this.mapInited===this.curRepeat&&this.allMapInit()},allMapInit:function(){for(var a=this.allMapInitFunc.shift();"undefined"!=typeof a;)"function"==typeof a?(a(),a=this.allMapInitFunc.shift()):a=this.allMapInitFunc.shift();this.mapResize()},onAllMapInit:function(a){this.mapInited===this.curRepeat?(a(),this.mapResize()):-1===this.allMapInitFunc.indexOf(a)&&this.allMapInitFunc.push(a)},getPosition:function(a){function b(b){return a(null,b)}function c(b){return a(b)}return navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?void navigator.geolocation.getCurrentPosition(b,c,{timeout:2e4,enableHighAccuracy:!0}):a(new Error("No Location Available"))},stopLoadingText:function(a){clearInterval(this.loadingIntervals[a])},startLoadingText:function(a){var b=this.getWrapper(a),c=$(b.find(".fh_map_canvas")[0]);c.html("Getting Position "),this.stopLoadingText(a),this.loadingIntervals[a]=setInterval(function(){c.html(c.html()+".")},1e3)},onElementShow:function(a){var b=this.getWrapper(a),c=this,d=b.find(".fh_map_canvas")[0];c.startLoadingText(a),c.getPosition(function(b,e){function f(b){c.maps[a]=b.map;var d=new google.maps.Marker({position:c.maps[a].getCenter(),map:c.maps[a],draggable:!c.readonly,animation:google.maps.Animation.DROP,title:"Drag this to set position"});c.markers[a]=d,c.mapData[a]={lat:d.getPosition().lat(),"long":d.getPosition().lng(),zoom:c.mapSettings.defaultZoom},c.onMapInit(a)}function g(b){$fh.forms.log.e("Error getting map: ",b),c.setErrorText(a,b)}b?($fh.forms.log.e("Error getting location: ",b.message),c.setErrorText(a,b.message)):c.clearError(a),c.stopLoadingText(a),e=e||{};var h=e.coords||{},i={lat:h.latitude||c.mapSettings.location.lon,lon:h.longitude||c.mapSettings.location.lat};$fh.map({target:d,lon:i.lon,lat:i.lat,zoom:c.mapSettings.defaultZoom,draggable:!c.readonly},f,g)})},mapResize:function(){var a=this;if(a.maps.length>0)for(var b=0;b<a.maps.length;b++){var c=this.maps[b];c&&(google.maps.event.trigger(c,"resize"),c.setCenter(new google.maps.LatLng(a.mapData[b].lat,a.mapData[b]["long"])))}},onRender:function(){this.mapResize()},valueFromElement:function(a){var b=this.maps[a],c=this.markers[a];return b&&c?{lat:c.getPosition().lat(),"long":c.getPosition().lng(),zoom:b.getZoom()}:null},valuePopulateToElement:function(a,b){function c(){var c=d.maps[a],e=new google.maps.LatLng(b.lat,b["long"]);d.mapData[a].lat=b.lat,d.mapData[a]["long"]=b["long"],c.setCenter(e),c.setZoom(b.zoom),d.markers[a].setPosition(e)}var d=this;b&&this.onAllMapInit(c)}}),FieldNumberView=j.extend({type:"number",getHTMLInputType:function(){return"number"}}),FieldPhoneView=j.extend({type:"tel"}),FieldRadioView=j.extend({choice:'<button class="btn btn-primary text-left fh_appform_button_action" type="button" data-field="<%= fieldId %>" data-index="<%= index %>" data-value="<%= choice %>"><i class="icon-circle-blank choice_icon"></i><%= choice %></button>',radio:'<div class="btn-group-vertical fh_appform_field_input col-xs-12 <%= repeatingClassName%>" data-toggle="buttons-radio"></div>',renderInput:function(a){var b=this.model.getRadioOption(),c=this,d=this.model.isRepeating()?this.repeatingClassName:this.nonRepeatingClassName,e=_.template(c.radio);e=e({repeatingClassName:d}),e=$(e);var f=this.model.getFieldId();return $.each(b,function(b,d){var g=_.template(c.choice);g=g({fieldId:f,choice:d.label,value:d.label,index:a}),g=$(g),d.checked===!0&&(g.addClass("active"),g.addClass("option-checked"),g.find(".choice_icon").removeClass("icon-circle-blank"),g.find(".choice_icon").addClass("icon-circle")),g.off("click"),g.on("click",function(a){$(this).parent().find(".option-checked").removeClass("option-checked"),$(this).parent().find(".active").removeClass("active"),$(this).parent().find(".choice_icon").removeClass("icon-circle"),$(this).parent().find(".choice_icon").addClass("icon-circle-blank"),$(this).addClass("option-checked"),$(this).find(".choice_icon").removeClass("icon-circle-blank"),$(this).find(".choice_icon").addClass("icon-circle"),$(this).trigger("change")}),e.append(g)}),e},valuePopulateToElement:function(a,b){var c=this.getWrapper(a),d=c.find("button[data-value='"+b+"']");$(c).find("button.active").removeClass("active"),$(c).find("button.option-checked").removeClass("option-checked"),$(d).parent().find(".choice_icon").removeClass("icon-circle"),$(d).parent().find(".choice_icon").addClass("icon-circle-blank"),0===d.length&&(d=c.find("button:first-child")),d.addClass("active"),d.addClass("option-checked"),d.find(".choice_icon").removeClass("icon-circle-blank"),d.find(".choice_icon").addClass("icon-circle"),$(d).trigger("change")},valueFromElement:function(a){var b=this.getWrapper(a),c=b.find("button.option-checked").data();return c?b.find("button.option-checked").data().value:null},onElementShow:function(a){}}),FieldSelectView=j.extend({select:"<select class='fh_appform_field_input form-control <%= repeatingClassName%> col-xs-12' data-field='<%= fieldId %>' data-index='<%= index %>'><%= options %></select>",option:'<option value="<%= value %>" <%= selected %>><%= value %></option>',renderInput:function(a){var b=this,c=this.model.getFieldId(),d=this.model.getDropdownOptions?this.model.getDropdownOptions():[],e="",f=this.model.isRepeating()?this.repeatingClassName:this.nonRepeatingClassName,g=_.template(b.option);return $.each(d,function(a,b){e+=g({value:b.label,selected:b.checked?"selected='selected'":""})}),$(_.template(this.select)({fieldId:c,index:a,options:e,repeatingClassName:f}))}}),FieldSignatureView=j.extend({extension_type:"fhsig",input:"<img class='sigImage img-responsive' data-field='<%= fieldId %>' data-index='<%= index %>'/>",templates:{signaturePad:['<div class="sigPad">','<div class="sigPad_header col-xs-12">','<button class="clearButton fh_appform_button_cancel btn btn-danger col-xs-5 col-xs-offset-1">Clear</button><button class="cap_sig_done_btn fh_appform_button_action btn btn-primary col-xs-5 col-xs-offset-1 pull-right">Done</button>','<br style="clear:both;" />',"</div>",'<div class="sig sigWrapper">','<canvas class="pad" width="<%= canvasWidth %>" height="<%= canvasHeight %>"></canvas>',"</div>","</div>"]},initialize:function(a){j.prototype.initialize.call(this,a),this.on("visible",this.clearError)},onElementShow:function(a){if(this.readonly)this.$el.append("<img class='sigImage img-responsive'/>");else{var b=$(this.renderButton(a,"<i class='icon-pencil'></i>&nbsp;Capture Signature",this.extension_type));this.getWrapper(a).append(b);var c=this;b.on("click",function(){c.showSignatureCapture(a)})}},showSignatureCapture:function(a){var b=this,c=$(window).height(),d=$(window).width(),e=c-70,f=d-2,g=e-20;this.$el.append(_.template(this.templates.signaturePad.join(""))({canvasHeight:e,canvasWidth:f}));var h=$(".sigPad",this.$el),i=0;navigator.userAgent.match(/IEMobile\/10\.0/)&&(i=$(window).height()-window.outerHeight);var j=""+i+"px";h.css({position:"fixed","z-index":9999,bottom:"0px",right:"0px",top:j,left:"0px","background-color":"#fff"});var k=$(".sigNav",this.$el).outerHeight();$(".sigPad",this.$el).css({width:"100%",height:c+"px"}),$(".sigWrapper",this.$el).css({height:c-k-20+"px"}),sigPad=$(".sigPad",this.$el).signaturePad({drawOnly:!0,lineTop:g}),$(this.$el).data("sigpadInited",!0),$(".cap_sig_done_btn",this.$el).unbind("click").bind("click",function(c){c.preventDefault();var d=sigPad.getSignature();if(d&&d.length){var e=sigPad.getSignatureImage();b.isEmptyImage(e)&&(e=b.toBmp()),b.setSignature(a,e)}$(".sigPad",b.$el).hide()})},setSignature:function(a,b){var c=this,d=this.getWrapper(a);c.updateOrRemoveValue({fieldId:c.model.getFieldId(),index:a,isStore:!0,value:b},function(){d.find("img.sigImage").attr("src",b)})},valueFromElement:function(a){var b=this.getWrapper(a),c=b.find("img.sigImage");return c.attr("src")},valuePopulateToElement:function(a,b){var c,d=this.getWrapper(a);if(b.localURI)c=d.find("img.sigImage"),c.attr("src",b.localURI);else if(b.data){var e=b.data,f=b.imgHeader+e;c=d.find("img.sigImage"),c.attr("src",f)}else $fh.forms.log.e("No image parameters present to populate image data: "+JSON.stringify(b))},dbgImage:function(a,b){$fh.forms.log.d(a+(b?b.substring(0,b.indexOf(","))+"[len="+b.length+"]":" empty"))},toBmp:function(a){a=_.extend({},a||{},{quality:100,width:248,height:100});var b,c=$(".sigPad",self.$el).find("canvas")[0],d=this.scaleCanvas(c,a.width,a.height),e=this.readCanvasData(d),f=this.createBMP(e);return b=this.makeDataURI(f,"image/bmp")},readCanvasData:function(a){var b=parseInt(a.width,10),c=parseInt(a.height,10);return a.getContext("2d").getImageData(0,0,b,c)},encodeData:function(a){var b="";if("string"==typeof a)b=a;else for(var c=a,d=0;d<c.length;d++)b+=String.fromCharCode(c[d]);return btoa(b)},createBMP:function(a){var b=[],c=a.width,d=a.height;b.push(66),b.push(77);var e=c*d*3+54;b.push(e%256),e=Math.floor(e/256),b.push(e%256),e=Math.floor(e/256),b.push(e%256),e=Math.floor(e/256),b.push(e%256),b.push(0),b.push(0),b.push(0),b.push(0),b.push(54),b.push(0),b.push(0),b.push(0);var f=[];f.push(40),f.push(0),f.push(0),f.push(0);var g=c;f.push(g%256),g=Math.floor(g/256),f.push(g%256),g=Math.floor(g/256),f.push(g%256),g=Math.floor(g/256),f.push(g%256);var h=d;f.push(h%256),h=Math.floor(h/256),f.push(h%256),h=Math.floor(h/256),f.push(h%256),h=Math.floor(h/256),f.push(h%256),f.push(1),f.push(0),f.push(24),f.push(0),f.push(0),f.push(0),f.push(0),f.push(0);var i=c*d*3;f.push(i%256),i=Math.floor(i/256),f.push(i%256),i=Math.floor(i/256),f.push(i%256),i=Math.floor(i/256),f.push(i%256);for(var j=0;16>j;j++)f.push(0);var k=(4-3*c%4)%4,l=a.data,m="",n=d;do{for(var o=c*(n-1)*4,p="",q=0;c>q;q++){var r=4*q;p+=String.fromCharCode(l[o+r+2]),p+=String.fromCharCode(l[o+r+1]),p+=String.fromCharCode(l[o+r])}for(var s=0;k>s;s++)p+=String.fromCharCode(0);m+=p}while(--n);var t=this.encodeData(b.concat(f))+this.encodeData(m);return t},makeDataURI:function(a,b){return"data:"+b+";base64,"+a},scaleCanvas:function(a,b,c){if(b&&c){var d=document.createElement("canvas");d.width=b,d.height=c,d.style.width=b+"px",d.style.height=c+"px";var e=d.getContext("2d");return e.drawImage(a,0,0,a.width,a.height,0,0,b,c),d}return a},isEmptyImage:function(a){return null===a||""===a||"data:,"===a},splitImage:function(a){var b="data:",c=";base64,",d=a.indexOf(b),e="image/bmp",f="bmp";if(d>=0){var g=a.indexOf(c,d)+1;e=a.substring(d,g-1),f=e.split("/")[1]}return[e,f]}}),FieldTextView=j.extend({}),FieldTextareaView=j.extend({input:"<textarea class='fh_appform_field_input col-xs-12' data-field='<%= fieldId %>' data-index='<%= index %>'  ></textarea>"}),FieldSectionBreak=j.extend({className:"fh_appform_section_break panel panel-default",templates:{sectionBreak:'<div class="panel-heading"><%= sectionTitle %></div>'},renderEle:function(){return _.template(this.templates.sectionBreak)({sectionTitle:this.model.getName(),sectionDescription:this.model.getHelpText()})},renderTitle:function(){return""},renderHelpText:function(){return""}}),FieldDateTimeView=j.extend({extension_type:"fhdate",inputTime:"<input class='fh_appform_field_input col-xs-12 text-center <%= repeatingClassName%>' data-field='<%= fieldId %>' data-index='<%= index %>' type='time'>",inputDate:"<input class='fh_appform_field_input col-xs-12 text-center   <%= repeatingClassName%>' data-field='<%= fieldId %>' data-index='<%= index %>' type='date'>",inputDateTime:"<input class='fh_appform_field_input col-xs-12 text-center   <%= repeatingClassName%>' data-field='<%= fieldId %>' data-index='<%= index %>' placeholder='<%= placeholderText %>' type='text'>",renderInput:function(a){var b=this.model.getFieldId(),c=this.model.isRepeating()?this.repeatingClassName:this.nonRepeatingClassName,d="",e=this.getUnit(),f="",g="";"datetime"===e?(f=this.inputDateTime,d=this.getDateTimeFormat(),g="<i class='icon-calendar'></i> <i class='icon-time'></i>&nbspGet Current Date & Time"):"date"===e?(f=this.inputDate,g="<i class='icon-calendar'></i>&nbspGet Current Date"):"time"===e&&(f=this.inputTime,g="<i class='icon-time'></i>&nbspGet Current Time");var h=_.template(f)({fieldId:b,index:a,repeatingClassName:c,placeholderText:d});return this.readonly||(h+=this.renderButton(a,g,"fhdate")),$(h)},
getDateTimeFormat:function(){return this.model.getFieldDefinition().dateTimeFormat||"YYYY-MM-DD HH:mm:ss"},getUnit:function(){var a=this.model.getFieldDefinition();return a.datetimeUnit},onRender:function(){var a=this;this.readonly||this.$el.on("click","button",function(){a.action(this)})},action:function(a){var b=$(a).data().index,c=this,d=new Date;"datetime"===c.getUnit()?$('input[data-index="'+b+'"]',this.$el).val(c.generateDateTimeText(d)).blur():"date"===c.getUnit()?$('input[data-index="'+b+'"]',this.$el).val(c.getDate(d)).blur():"time"===c.getUnit()&&$('input[data-index="'+b+'"]',this.$el).val(c.getTime(d)).blur()},generateDateTimeText:function(a){return this.replaceTimeText(this.getDateTimeFormat(),a)},replaceTimeText:function(a,b){return a.replace("YYYY",b.getFullYear()).replace("MM",this.twoDigi(b.getMonth()+1)).replace("DD",this.twoDigi(b.getDate())).replace("HH",this.twoDigi(b.getHours())).replace("mm",this.twoDigi(b.getMinutes())).replace("ss",this.twoDigi(b.getSeconds()))},getDate:function(a){return this.replaceTimeText("YYYY-MM-DD",a)},getTime:function(a){return this.replaceTimeText("HH:mm:ss",a)},twoDigi:function(a){return 10>a?"0"+a.toString():a.toString()}}),FieldUrlView=j.extend({type:"url"}),FieldBarcodeView=j.extend({type:"barcode",input:"<button data-field='<%= fieldId %>' class='special_button fh_appform_button_action select col-xs-12' data-index='<%= index %>'  type='<%= inputType %>'>Scan Barcode</button><button data-field='<%= fieldId %>' class='special_button fh_appform_button_action remove col-xs-12' data-index='<%= index %>'  type='<%= inputType %>'><i class='icon-remove-circle'></i>&nbsp;Remove Barcode Entry</button><input class='fh_appform_field_input col-xs-12' data-field='<%= fieldId %>' data-index='<%= index %>' data-bfield='text' type='text' placeholder='Barcode Value' style='margin-top:5px' disabled/><input class='fh_appform_field_input col-xs-12' data-field='<%= fieldId %>' data-index='<%= index %>' data-bfield='format' type='text' placeholder='Barcode Format' style='margin-top:5px' disabled/>",initialize:function(){var a=this;a.barcodeObjects=[],j.prototype.initialize.apply(a,arguments)},contentChanged:function(a){var b=this;a.preventDefault();var c=$(a.target),d=c.data("index"),e=b.getWrapper(d),f=e.find("input[data-bfield='text']"),g=e.find("input[data-bfield='format']"),h={text:f.val(),format:g.val()};b.barcodeObjects[d]=h,b.updateOrRemoveValue({fieldId:b.model.getFieldId(),index:d,value:h,isStore:!0},function(){b.validateElement(d,h),b.checkRules()})},valueFromElement:function(a){var b=this;return b.barcodeObjects[a]||{}},showButton:function(a,b){var c=this,d=c.getWrapper(a),e=d.find("button.select"),f=d.find("button.remove"),g=d.find("input[data-bfield='text']"),h=d.find("input[data-bfield='format']");return c.model.utils.isPhoneGapCamAvailable()?(e.show(),null==b?f.hide():(g.val(b.text),h.val(b.format),f.show()),this.readonly&&(e.hide(),f.hide()),f.off("click"),f.on("click",function(a){var b=$(a.target).data("index");c.removeBarcode(b)}),e.off("click"),void(c.model.utils.isPhoneGapCamAvailable()&&e.on("click",function(b){c.scanBarcode(b,a)}))):(d.find("input[data-bfield='text']").attr("disabled",!1),d.find("input[data-bfield='format']").attr("disabled",!1),e.text("Barcode Scanning Not Available"),e.attr("disabled",!0),void f.hide())},removeBarcode:function(a){var b=this;if("number"==typeof a){b.barcodeObjects[a]=null;var c=b.getWrapper(a);c.find("input[data-bfield='text']").val(""),c.find("input[data-bfield='format']").val(""),b.showButton(a,null)}else $fh.forms.log.e("Error: No index when removing barcode element")},scanBarcode:function(a,b){function c(){e.model.utils.captureBarcode({},function(a,c){a?($fh.forms.log.e("Error scanning barcode: "+a),e.showButton(b,null)):c.text&&c.format?($fh.forms.log.d("Got Barcode Result: "+JSON.stringify(c)),e.barcodeObjects[b]={text:c.text.toString(),format:c.format.toString()},e.showButton(b,e.barcodeObjects[b])):($fh.forms.log.d("Barcode Scan Cancelled: "+JSON.stringify(c)),e.showButton(b,null))})}function d(){$fh.forms.backbone.alert("Barcode Decoding Only Available On-Device"),$fh.forms.log.e("Web barcode decoding not currently supported")}var e=this;$fh.forms.log.d("Scanning barcode"),e.model.utils.isPhoneGapCamAvailable()?c():d()},valuePopulateToElement:function(a,b){var c=this;b&&(c.barcodeObjects[a]=b,c.showButton(a,b))},onElementShow:function(a){this.showButton(a,null)}}),FieldSliderNumberView=j.extend({type:"sliderNumber",input:"<div class='col-xs-12 text-center fh_appform_field_input slideValue'></div><b class='pull-left fh_appform_field_instructions slider-label'><%= min%></b><b class='pull-right fh_appform_field_instructions slider-label'><%= max%></b><input class='fh_appform_field_input slideInput' data-field='<%= fieldId %>' data-index='<%= index %>' type='range' min='<%= min%>' max='<%= max%>' step='<%= step%>' data-slider-min='<%= min%>' data-slider-max='<%= max%>' data-slider-step='<%= step%>' data-slider-value='<%= value%>'/>",renderInput:function(a){var b=this,c=b.model.getFieldId(),d=b.model.getFieldValidation(),e=b.model.getFieldDefinition(),f=b.model.getDefaultValue(),g={fieldId:c,index:a,min:d.min||0,max:d.max||10,step:e.stepSize||1,value:f},h=$(_.template(this.input)(g));return h},onElementShow:function(a){var b=this,c=b.model.getFieldId(),d=b.model.getFieldValidation(),e=b.model.getFieldDefinition(),f=b.model.getDefaultValue()||d.min||0,g={enabled:!b.readonly,tooltip:"hide",fieldId:c,index:a,min:d.min||0,max:d.max||10,step:e.stepSize||1,value:f||d.min||0,formatter:function(a){return"Current value: "+a}},h=this.getWrapper(a),i=$(h.find("input[type='range']"));h.find(".slideValue").html("Selected Value: "+f),("function"==typeof i.slider||"function"==typeof i.bootstrapSlider)&&(i.bootstrapSlider?(i.bootstrapSlider(g),this.readonly):i.slider(g)),i.on("slide",b.contentChanged)},valueFromElement:function(a){var b=this.getWrapper(a);return b.find("input[type='range']").attr("value")||""},valuePopulateToElement:function(a,b){var c=this.getWrapper(a),d=$(c.find("input[type='range']"));b&&(d.val(b),d.slider("setValue",parseInt(b),!0),c.find(".slideValue").html("Selected Value: "+b))},contentChanged:function(a){var b=this,c=a.target,d=$(c),e=d.data().index,f=this.getWrapper(e),g=$(f.find("input[type='range']")),h=g.attr("value")||g.val();b.updateOrRemoveValue({fieldId:b.model.getFieldId(),index:e,value:h,isStore:!0},function(){f.find(".slideValue").html("Selected Value: "+h),b.validateElement(e,h),b.checkRules()})},getHTMLInputType:function(){return"text"}}),FieldReadOnlyView=j.extend({type:"readOnly",readOnlyElement:'<div class="fh_appform_field_input"> </div>',readOnlySingleField:"<%= text %> <br/>",renderInput:function(){var a=this,b=$(this.readOnlyElement),c=this.model.getCheckBoxOptions(),d=_.template(a.readOnlySingleField);return _.each(c,function(a){b.append(d({text:a.label}))}),b}});var k=f.extend({viewMap:{text:FieldTextView,number:FieldNumberView,textarea:FieldTextareaView,radio:FieldRadioView,checkboxes:FieldCheckboxView,dropdown:FieldSelectView,file:FieldFileView,emailAddress:FieldEmailView,phone:FieldPhoneView,location:FieldGeoView,photo:FieldCameraView,signature:FieldSignatureView,locationMap:FieldMapView,dateTime:FieldDateTimeView,sectionBreak:FieldSectionBreak,url:FieldUrlView,barcode:FieldBarcodeView,sliderNumber:FieldSliderNumberView,readOnly:FieldReadOnlyView},templates:{pageTitle:'<div class="fh_appform_page_title text-center"><%= pageTitle %></div>',pageDescription:'<div class="fh_appform_page_description text-center"><h4><%= pageDescription%></h4></div>',section:""},initialize:function(a){this.options=a;var b=this;_.bindAll(this,"render","show","hide"),this.model.on("visible",b.show),this.model.on("hidden",b.hide),this.render()},render:function(){function a(a){a&&($("#"+a).slideToggle(600),$("#"+a+"_icon").toggleClass("icon-chevron-sign-up"),$("#"+a+"_icon").toggleClass("icon-chevron-sign-down"))}var b=this;this.fieldViews={},this.sectionViews={},this.$el.empty().addClass("fh_appform_page fh_appform_hidden col-xs-12"),this.options.parentEl.append(this.$el);var c=this.model.getFieldModelList(),d=this.model.getSections();if(null!=d){var e,f=0,g=$('<div class="panel-group" id="accordion"></div>');for(e in d){var h=$(_.template(b.options.formView.$el.find("#temp_page_structure").html())({sectionId:e,title:d[e].title,description:d[e].description,index:f})),i="#fh_appform_"+e+"_body_icon";f++,h.find(".panel-heading").off("click"),h.find(i).off("click"),h.find(i).on("click",function(b){var c=$(this).parent().data().field;a(c)}),h.find(".panel-heading").on("click",function(b){$(b.target).data()&&$(b.target).data().field&&a($(b.target).data().field)}),g.append(h),d[e].fields.forEach(function(a,c){var d=a.getType();b.viewMap[d]?($fh.forms.log.l("*- "+d),"sectionBreak"!==d&&(b.fieldViews[a.get("_id")]=new b.viewMap[d]({parentEl:h.find(".panel-body"),parentView:b,model:a,formView:b.options.formView,sectionName:e}))):$fh.forms.log.w("FIELD NOT SUPPORTED:"+d)})}this.$el.append(g)}else c.forEach(function(a,c){if(a){var d=a.getType();b.viewMap[d]?($fh.forms.log.l("*- "+d),b.fieldViews[a.get("_id")]=new b.viewMap[d]({parentEl:b.$el,parentView:b,model:a,formView:b.options.formView})):console.warn("FIELD NOT SUPPORTED:"+d)}})},expandSection:function(a){var b=this.model.getSections(),c=!1,d="";for(var e in b)b[e].fields.forEach(function(b,f){b.get("_id")===a&&(c=!0,d=e)});c&&($("#fh_appform_"+d+"_body").slideDown(20),$("#fh_appform_"+d+"_body_icon").removeClass("icon-minus"),$("#fh_appform_"+d+"_body_icon").hasClass("icon-plus")||$("#fh_appform_"+d+"_body_icon").addClass("icon-plus"))},show:function(){var a=this;a.$el.show();for(var b in a.fieldViews)a.fieldViews[b].mapResize&&a.fieldViews[b].mapResize()},hide:function(){this.$el.hide()},showField:function(a){this.fieldViews[a]&&this.fieldViews[a].show()},hideField:function(a){this.fieldViews[a]&&this.fieldViews[a].hide()},isValid:function(){var a=this.$el.find(".fh_appform_field_input").not(".validate_ignore]:hidden");return a.length?a.valid():!0}}),m=f.extend({pageNum:0,pageCount:0,pageViews:[],submission:null,fieldValue:[],templates:{formLogo:'<div class="fh_appform_logo_container col-xs-12"><div class="fh_appform_logo"></div></div>',formTitle:'<div class="fh_appform_form_title col-xs-12 text-center"><h1><%= title %></h1></div>'},events:{},elementNames:{formContainer:"#fh_appform_container"},initialize:function(a){var b=this;b.formEdited=!1,b.options=b.options||a,b.readonly=b.options.readOnly,_.bindAll(this,"checkRules","onValidateError"),b.$el=b.options.parentEl,b.fieldModels=[],b.pageViewStatus={},b.$el.empty()},loadForm:function(a,b){var c=this;a.formId?(c.onLoad(),$fh.forms.getForm(a,function(d,e){if(d)throw d.body;c.form=e,c.params=a,c.initWithForm(e,a),b()})):a.form&&(c.form=a.form,c.params=a,c.initWithForm(a.form,a),b())},readOnly:function(){this.readonly=!0;for(var a=0;a<this.fieldViews.length;a++){var b=this.fieldViews[a];b.$el.find("button,input,textarea,select").attr("disabled","disabled")}this.$el.find("button.fh_appform_button_saveDraft").hide(),this.$el.find(" button.fh_appform_button_submit").hide()},markFormEdited:function(){this.formEdited=!0},isFormEdited:function(){return this.formEdited},disableDrafts:function(){this.$el.find("button.fh_appform_button_saveDraft").prop("disabled",!0)},onValidateError:function(a){var b=this,c=null,d=null;if(b.fieldViews.forEach(function(e){var f=e.model.getFieldId();if(a.hasOwnProperty(f)){var g=a[f];if(g.errorMessages=g.errorMessages||[],g.fieldErrorMessage=g.fieldErrorMessage||[],!g.valid){null===c&&(c=f,d=b.form.getPageNumberByFieldId(c));for(var h=0;h<g.errorMessages.length;h++)g.errorMessages[h]&&e.setErrorText(h,g.errorMessages[h]);for(h=0;h<g.fieldErrorMessage.length;h++)g.fieldErrorMessage[h]&&e.setErrorText(h,g.fieldErrorMessage[h])}}}),null!==c&&null!==d){var e=this.getDisplayIndex(d)+1;b.goToPage(d,!1),b.pageViews[d].expandSection(c),$("html, body").animate({scrollTop:$("[data-field='"+c+"']").offset().top-100},1e3),this.$el.find("#fh_appform_page_error").html("Unable to submit form. Validation error on page "+e),this.$el.find("#fh_appform_page_error").show()}},initWithForm:function(a,b){var c,d=this;d.formId=a.getFormId(),d.$el.empty(),d.$el.append("<div id='fh_appform_templates' style='display:none;'>"+g+"</div>"),d.model=a;var e=_.template(d.$el.find("#temp_form_structure").html())({title:d.model.getName(),description:d.model.getDescription()});d.$el.append(e),b.submission||(b.submission=d.model.newSubmission()),d.submission=b.submission,d.submission.on("validationerror",d.onValidateError);var f=a.getPageModelList(),h=[];d.steps=new StepsView({parentEl:d.$el.find(this.elementNames.formContainer),parentView:d,model:d.model});for(var i=0;i<f.length;i++){var j=f[i],l=j.getPageId();d.pageViewStatus[l]={targetId:l,action:"show"};var m=j.getFieldModelList();d.fieldModels=d.fieldModels.concat(m),c=new k({model:j,parentEl:d.$el.find(this.elementNames.formContainer),formView:d}),h.push(c)}var n=[];for(i=0;i<h.length;i++){c=h[i];var o=c.fieldViews;for(var p in o){var q=o[p];n.push(q),q.on("checkrules",d.checkRules),d.readonly&&q.$el.find("input,button,textarea,select").attr("disabled","disabled")}}d.fieldViews=n,d.pageViews=h,d.pageCount=h.length;var r=_.template(d.$el.find("#temp_form_buttons").html())();this.$el.find("#fh_appform_container.fh_appform_form_area").append(r)},checkRules:function(a){var b=this;a=a||{};var c=b.submission;c.checkRules(function(a,c){if(a)console.error(a);else{var d,e=c.actions;for(d in e.pages)b.pageViewStatus[d]=e.pages[d];var f=e.fields;for(d in f)b.performRuleAction("field",d,f[d].action)}b.checkPages(),b.steps.activePageChange(b)})},performRuleAction:function(a,b,c){var d=null;if("field"===a&&(d=this.getFieldViewById(b)),null===d)return void console.error("cannot find target with id:"+b);switch(c){case"show":d.$el.show();break;case"hide":d.$el.hide();break;default:console.error("action not defined:"+c)}},rebindButtons:function(){var a=this;this.$el.find("button.fh_appform_button_next").unbind().bind("click",function(){a.nextPage()}),this.$el.find("button.fh_appform_button_previous").unbind().bind("click",function(){a.prevPage()}),this.$el.find("button.fh_appform_button_saveDraft").unbind().bind("click",function(){$fh.forms.config.isStudioMode()?$fh.forms.backbone.alert("Please create a project and interact with the form there."):a.saveToDraft()}),this.$el.find("button.fh_appform_button_submit").unbind().bind("click",function(){$fh.forms.config.isStudioMode()?$fh.forms.backbone.alert("Please create a project and interact with the form there."):a.submit()})},setSubmission:function(a){this.submission=a},getSubmission:function(){return this.submission},getPageIndexById:function(a){for(var b=0;b<this.pageViews.length;b++){var c=this.pageViews[b],d=c.model.getPageId();if(d===a)return b}return null},getPageViewById:function(a){for(var b=0;b<this.pageViews.length;b++){var c=this.pageViews[b],d=c.model.getPageId();if(d===a)return c}return null},getFieldViewById:function(a){for(var b=0;b<this.fieldViews.length;b++){var c=this.fieldViews[b],d=c.model.getFieldId();if(d===a)return c}return null},checkPages:function(){var a=this.getNumDisplayedPages(),b=this.getDisplayIndex(),c=this.$el.find("button.fh_appform_button_previous").parent(),d=this.$el.find("button.fh_appform_button_next").parent(),e=this.$el.find(" button.fh_appform_button_submit").parent(),f=this.$el.find("button.fh_appform_button_saveDraft").parent();0===b&&b===a-1?(c.hide(),d.hide(),f.show(),e.show(),this.readonly&&this.$el.find("#fh_appform_navigation_buttons").hide()):0===b?(c.hide(),d.show(),f.show(),e.hide()):b===a-1?(c.show(),d.hide(),f.show(),e.show()):(c.show(),d.show(),f.show(),e.hide()),this.readonly&&(f.hide(),e.hide())},render:function(){return this.rebindButtons(),this.hideAllPages(),this.pageViews[0].show(),this.pageNum=0,this.steps.activePageChange(this),this.checkRules({initialising:!1}),this},getNextPageIndex:function(a){var b=this;if(c>=this.pageViews.length)return this.pageViews.length-1;for(var c=a+1;c<this.pageViews.length;c+=1){var d=this.pageViews[c].model.getPageId(),e=b.pageViewStatus[d].action;if("show"===e)return c}},getPrevPageIndex:function(a){var b=this;if(0>=a)return 0;for(var c=a-1;c>=0;c--){var d=b.pageViews[c].model.getPageId(),e=b.pageViewStatus[d].action;if("show"===e)return c}},getDisplayIndex:function(a){for(var b=this,c=null===a||"undefined"==typeof a?this.pageNum:a,d=this.pageNum;d>0;d--){var e=this.pageViews[d].model.getPageId(),f=b.pageViewStatus[e].action;"hide"===f&&(c-=1)}return c},getNumDisplayedPages:function(){return this.getDisplayedPages().length},getDisplayedPages:function(){for(var a=this,b=[],c=0;c<a.pageViews.length;c++){var d=this.pageViews[c].model.getPageId(),e=a.pageViewStatus[d].action;"show"===e&&b.push(d)}return b},displayCurrentPage:function(a){this.hideAllPages(),this.pageViews[this.pageNum].show(),this.steps.activePageChange(this),this.checkPages(),a&&this.scrollToTop()},goToPage:function(a,b){_.isFinite(a)?(this.pageNum=parseInt(a),this.displayCurrentPage(b)):$fh.forms.log.e("Error switching page: Invalid argument ",a)},nextPage:function(){this.pageNum=this.getNextPageIndex(this.pageNum),this.displayCurrentPage(!0)},prevPage:function(){this.pageNum=this.getPrevPageIndex(this.pageNum),this.displayCurrentPage(!0)},scrollToTop:function(){$("html, body").animate({scrollTop:0},500,function(){window.scrollTo(0,0)})},backEvent:function(){var a=this;return this.pageNum<=0?!1:(a.prevPage(),!0)},hideAllPages:function(){this.pageViews.forEach(function(a){a.hide()})},validateForm:function(a){var b=this;this.populateFieldViewsToSubmission(function(){b.submission.validateSubmission(a)})},submit:function(a){var b=this;this.populateFieldViewsToSubmission(function(){b.submission.submit(function(c,d){c?($fh.forms.log.e("Error Submitting Form:",c),"function"==typeof a&&a(c)):b.submission.upload(function(c,d){c&&$fh.forms.log.e("Error Uploading Form:",c),"function"==typeof a&&a(),b.$el.empty()})})})},saveToDraft:function(a){var b=this;this.populateFieldViewsToSubmission(function(){b.submission.saveDraft(function(c,d){c?$fh.forms.log.e(c):b.formEdited=!1,"function"==typeof a&&a(c)})})},addFieldInputValue:function(a,b){b=b||function(){},this.submission.addInputValue(a,b)},removeFieldInputValue:function(a){this.submission.removeFieldValue(a.fieldId,a.index)},populateFieldViewsToSubmission:function(a,b){"undefined"==typeof b&&(b=a,a=!0);for(var c,d=this.submission,e=this.fieldViews,f=[],g=0;g<e.length;g++){var h=e[g],i=h.value();c=h.model.getFieldId();var j=h.model.getType();if("sectionBreak"!==j&&"readOnly"!==j)for(var k=0;k<i.length;k++){var l=i[k];f.push({id:c,value:l,index:k})}}var m=f.length;for(g=0;g<f.length;g++){var n=f[g];c=n.id;var o=n.value,p=n.index;null===o||"undefined"==typeof o?(d.removeFieldValue(c,p),$fh.forms.log.e("Input value for fieldId "+c+" was not defined"),m--,0===m&&b()):d.addInputValue({fieldId:c,value:o,index:p,isStore:a},function(a,c){a&&console.error(a),m--,0===m&&b()})}},setInputValue:function(a,b){for(var c=0;c<this.fieldValue.length;c++){var d=this.fieldValue[c];d.id===a&&this.fieldValue.splice(c,1)}for(c=0;c<b.length;c++){var e=b[c];this.fieldValue.push({id:a,value:e})}}});f.extend({events:{"click button#convert":"convert"},templates:{body:'<h1>Insert JSON</h1><textarea id="jsonBox" rows="30" cols="50"></textarea><button id="convert">Convert</button><div id="resultArea"></div>'},el:"#jsonPage",initialize:function(a){this.options=a,_.bindAll(this,"render")},show:function(){$(this.$el).show()},hide:function(){$(this.$el).hide()},render:function(){$(this.$el).html(this.templates.body),this.show()},convert:function(){var a,b=$("#jsonBox").val();try{a=JSON.parse(b)}catch(c){throw $fh.forms.log.d("Error parsing json: ",c),"Invalid JSON object"}var d={formId:(new Date).getTime(),rawMode:!0,rawData:a},e=new m({parentEl:$("#backbone #resultArea")});e.loadForm(d,function(a){e.render()})}});SectionView=f.extend({initialize:function(a){this.options=a,_.bindAll(this,"render")},render:function(){this.options.parentEl.append(this.$el)}}),StepsView=Backbone.View.extend({className:"fh_appform_progress_steps col-xs-12",templates:{table:'<ul class="pagination pagination-lg col-xs-12"></ul>',step:'<li data-index="<%= index %>"><span class="number_container text-center" style="width: <%= width %>%;"><%= step_num %></span></li>',page_title:'<div class="col-xs-12 text-center"><h3 class="fh_appform_page_title"></h3></div>',page_description:'<div class="col-xs-12 text-center"><h3 class="fh_appform_page_description"></h3></div>'},events:{"click li":"switchPage"},initialize:function(a){this.options=a;_.bindAll(this,"render"),this.parentView=this.options.parentView,this.options.parentEl.append(this.$el)},render:function(){var a=this;this.$el.empty();var b=$(a.templates.table),c=this.parentView.getDisplayedPages(),d=100;return c.length>0&&(d=100/c.length),c.length>1&&(c.forEach(function(c,e){var f=a.parentView.getPageViewById(c).model,g=$(_.template(a.templates.step)({step_name:f.getName(),step_num:e+1,index:a.parentView.getPageIndexById(c),width:d}));$(b).append(g)}),this.$el.append(b)),this.$el.append(a.templates.page_title),this.$el.append(a.templates.page_description),this},switchPage:function(a){var b=0;a&&$(a.currentTarget).data()&&(b=$(a.currentTarget).data().index,"undefined"!=typeof b&&this.parentView.goToPage(b,!1))},activePageChange:function(){var a=this;a.render(),a.$el.find("li").removeClass("active");var b=a.parentView.getDisplayIndex(),c=a.parentView.pageViews[a.parentView.pageNum].model,d=c.getName(),e=c.getDescription();a.$el.find("li:eq("+b+")").addClass("active");var f=0!==d.length,g=this.parentView.getDisplayedPages();(g.length>1||f)&&(f||(d="Page "+(b+1)),a.$el.find(".fh_appform_page_title").html(d)),e.length>0?a.$el.find(".fh_appform_page_description").html(e):a.$el.find(".fh_appform_page_description").hide()}});var n=Backbone.View.extend({templates:{},_events:{"click #_viewLogsBtn":"viewLogs","click #_clearLogsBtn":"clearLogs","click #_sendLogsBtn":"sendLogs","click #_closeViewBtn":"closeViewLogs","click #fh_appform_show_deviceId":"showDeviceId","click #logger":"toggleLogging"},toggleLogging:function(){var a=$fh.forms.config.getConfig().logger;a=!a,$fh.forms.config.set("logger",a);var b=a?"Logging Enabled":"Logging Disabled";a?(this.$el.find(".choice_icon").addClass("icon-circle"),this.$el.find(".choice_icon").removeClass("icon-circle-blank")):(this.$el.find(".choice_icon").addClass("icon-circle-blank"),this.$el.find(".choice_icon").removeClass("icon-circle")),this.$el.find("#logger_message").html(b)},showDeviceId:function(){this.$el.find("#logsModalLabelBody").html("Device Id: "+$fh.forms.config.getDeviceId()),this.$el.find("#logsModal").modal()},viewLogs:function(){var a=this.getPolishedLogs();this.$el.find("#logsModalLabelBody").html(a),this.$el.find("#logsModal").modal()},getPolishedLogs:function(){for(var a=$fh.forms.log.getLogs(),b=[{reg:/^.+\sERROR\s.*/,classStyle:"list-group-item-danger"},{reg:/^.+\sWARNING\s.*/,classStyle:"list-group-item-warning"},{reg:/^.+\sLOG\s.*/,classStyle:"list-group-item-info"},{reg:/^.+\sDEBUG\s.*/,classStyle:"list-group-item-success"},{reg:/^.+\sUNKNOWN\s.*/,classStyle:"list-group-item-warning"}],c="",d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++){var g=b[f];if(g.reg.test(e)){c+=_.template($("#temp_config_log_item").html())({logClass:g.classStyle,message:e});break}}var h=_.template($("#temp_config_log").html())({listStr:c});return h},clearLogs:function(){var a=this;$fh.forms.log.clearLogs(function(){a.$el.find("#_logViewDiv").html(""),$fh.forms.backbone.alert("Logs cleared.")})},sendLogs:function(){$fh.forms.log.sendLogs(function(a){var b;b=a?a:"Log has been sent to : "+$fh.forms.config.get("log_email"),$fh.forms.backbone.alert(b)})},closeViewLogs:function(){this.$el.find("#_logsViewPanel").hide()},initialize:function(a){this.options=a,this.events=_.extend({},this._events,this.events)},render:function(){this.$el.empty(),this.$el.append("<div id='fh_appform_templates' style='display:none;'>"+g+"</div>"),this.$el.append(_.template(this.$el.find("#forms-logo-sdk").html())());var a=$fh.forms.config.getConfig(),b=_.template(this.$el.find("#temp_config_camera").html())(a),c=_.template(this.$el.find("#temp_config_submissions").html())(a),d=_.template(this.$el.find("#temp_config_debugging").html())(a),e=_.template(this.$el.find("#temp_config_misc").html())(a);return this.$el.append(e),this.$el.append(d),this.$el.append(b),this.$el.append(c),this.$el.find("#sent_items_to_keep_list").tagsinput("items"),this.$el.find(".bootstrap-tagsinput").addClass("fh_appform_field_input"),this.$el.find(".panel-heading").click(function(a){var b=$(a.currentTarget).data().field;$("#"+b).slideToggle(),$("#"+b+"-icon").toggleClass("icon-chevron-sign-up"),$("#"+b+"-icon").toggleClass("icon-chevron-sign-down")}),$fh.forms.config.editAllowed()||(this.$el.find("#camera-settings").hide(),this.$el.find("#submission-settings").hide(),this.$el.find("#log_level_div").hide(),this.$el.find("#log_email_div").hide(),this.$el.find("#log_line_limit_div").hide(),this.$el.find("#logger_wrapper_div").hide()),this},save:function(a){$fh.forms.log.l("Saving config");var b=this.$el.find("input,select,textarea,button[data-key='logger']");$fh.forms.config.editAllowed()?(b.each(function(){var a=$(this).data().key,b=$(this).val();if("logger"===a&&(b=$(this).hasClass("active")?!0:!1),"sent_items_to_keep_list"===a){if(!b||!b.filter)return;b=b.filter(function(a){return a=parseInt(a),!isNaN(a)}),b=_.map(b,function(a){return parseInt(a)}),b.sort(function(a,b){return a-b})}$fh.forms.config.set(a,b)}),$fh.forms.config.saveConfig(a)):$fh.forms.backbone.alert("Editing config not permitted.")}});"undefined"==typeof $fh&&($fh={}),$fh.forms||($fh.forms={}),$fh.forms.renderForm=function(a,b){var c=a.container,d=(a.formId,a.fromRemote||!1,a.type||"backbone"),e=new m({parentEl:c});e.loadForm(a,function(){"backbone"===d?b(null,e):"html"===d&&b(null,e)})},$fh.forms.renderFormFromJSON=function(a){if(!a)throw new Error("params cannot be empty");if(!a.rawData)throw new Error("raw json data must be passed in the params.rawData");if(!a.container)throw new Error("a container element must be passed in the params.container");a.formId=(new Date).getTime(),a.rawMode=!0;var b=new m({parentEl:a.container});b.loadForm(a,function(a){a&&console.error("error loading form for renderFormFromJSON ",a),b.render()})},$fh.forms.renderFormList=function(a,b){var c=a.fromRemote||!1,d=a.parentEl;$fh.forms.getForms({fromRemote:c},function(a,b){formListView=new h({model:b,parentEl:d}),formListView.render()})},$fh.forms.backbone={},$fh.forms.backbone.alert=function(a){navigator&&navigator.notification&&navigator.notification.alert?navigator.notification.alert(a):alert(a)},$fh.forms.backbone.FormView=m,$fh.forms.backbone.ConfigView=n}(window||b.exports)},{}],20:[function(require,module,exports){(function(global){!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.feedhenry=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f=f||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);!function(){var a=f,b=a.lib,c=b.WordArray,d=a.enc;d.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;c>f;f+=3)for(var g=b[f>>>2]>>>24-f%4*8&255,h=b[f+1>>>2]>>>24-(f+1)%4*8&255,i=b[f+2>>>2]>>>24-(f+2)%4*8&255,j=g<<16|h<<8|i,k=0;4>k&&c>f+.75*k;k++)e.push(d.charAt(j>>>6*(3-k)&63));var l=d.charAt(64);if(l)for(;e.length%4;)e.push(l);return e.join("")},parse:function(a){var b=a.length,d=this._map,e=d.charAt(64);if(e){var f=a.indexOf(e);-1!=f&&(b=f)}for(var g=[],h=0,i=0;b>i;i++)if(i%4){var j=d.indexOf(a.charAt(i-1))<<i%4*2,k=d.indexOf(a.charAt(i))>>>6-i%4*2;g[h>>>2]|=(j|k)<<24-h%4*8,h++}return c.create(g,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),f.lib.Cipher||function(a){var b=f,c=b.lib,d=c.Base,e=c.WordArray,g=c.BufferedBlockAlgorithm,h=b.enc,i=(h.Utf8,h.Base64),j=b.algo,k=j.EvpKDF,l=c.Cipher=g.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b);
},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function a(a){return"string"==typeof a?x:u}return function(b){return{encrypt:function(c,d,e){return a(d).encrypt(b,c,d,e)},decrypt:function(c,d,e){return a(d).decrypt(b,c,d,e)}}}}()}),m=(c.StreamCipher=l.extend({_doFinalize:function(){var a=this._process(!0);return a},blockSize:1}),b.mode={}),n=c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}}),o=m.CBC=function(){function b(b,c,d){var e=this._iv;if(e){var f=e;this._iv=a}else var f=this._prevBlock;for(var g=0;d>g;g++)b[c+g]^=f[g]}var c=n.extend();return c.Encryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize;b.call(this,a,c,e),d.encryptBlock(a,c),this._prevBlock=a.slice(c,c+e)}}),c.Decryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize,f=a.slice(c,c+e);d.decryptBlock(a,c),b.call(this,a,c,e),this._prevBlock=f}}),c}(),p=b.pad={},q=p.Pkcs7={pad:function(a,b){for(var c=4*b,d=c-a.sigBytes%c,f=d<<24|d<<16|d<<8|d,g=[],h=0;d>h;h+=4)g.push(f);var i=e.create(g,d);a.concat(i)},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},r=(c.BlockCipher=l.extend({cfg:l.cfg.extend({mode:o,padding:q}),reset:function(){l.reset.call(this);var a=this.cfg,b=a.iv,c=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var d=c.createEncryptor;else{var d=c.createDecryptor;this._minBufferSize=1}this._mode=d.call(c,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else{var b=this._process(!0);a.unpad(b)}return b},blockSize:4}),c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}})),s=b.format={},t=s.OpenSSL={stringify:function(a){var b=a.ciphertext,c=a.salt;if(c)var d=e.create([1398893684,1701076831]).concat(c).concat(b);else var d=b;return d.toString(i)},parse:function(a){var b=i.parse(a),c=b.words;if(1398893684==c[0]&&1701076831==c[1]){var d=e.create(c.slice(2,4));c.splice(0,4),b.sigBytes-=16}return r.create({ciphertext:b,salt:d})}},u=c.SerializableCipher=d.extend({cfg:d.extend({format:t}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d),f=e.finalize(b),g=e.cfg;return r.create({ciphertext:f,key:c,iv:g.iv,algorithm:a,mode:g.mode,padding:g.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=a.createDecryptor(c,d).finalize(b.ciphertext);return e},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),v=b.kdf={},w=v.OpenSSL={execute:function(a,b,c,d){d||(d=e.random(8));var f=k.create({keySize:b+c}).compute(a,d),g=e.create(f.words.slice(b),4*c);return f.sigBytes=4*b,r.create({key:f,iv:g,salt:d})}},x=c.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:w}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=e.iv;var f=u.encrypt.call(this,a,b,e.key,d);return f.mixIn(e),f},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=e.iv;var f=u.decrypt.call(this,a,b,e.key,d);return f}})}(),function(){var a=f,b=a.lib,c=b.BlockCipher,d=a.algo,e=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[];!function(){for(var a=[],b=0;256>b;b++)128>b?a[b]=b<<1:a[b]=b<<1^283;for(var c=0,d=0,b=0;256>b;b++){var f=d^d<<1^d<<2^d<<3^d<<4;f=f>>>8^255&f^99,e[c]=f,g[f]=c;var p=a[c],q=a[p],r=a[q],s=257*a[f]^16843008*f;h[c]=s<<24|s>>>8,i[c]=s<<16|s>>>16,j[c]=s<<8|s>>>24,k[c]=s;var s=16843009*r^65537*q^257*p^16843008*c;l[f]=s<<24|s>>>8,m[f]=s<<16|s>>>16,n[f]=s<<8|s>>>24,o[f]=s,c?(c=p^a[a[a[r^p]]],d^=a[a[d]]):c=d=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],q=d.AES=c.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,d=this._nRounds=c+6,f=4*(d+1),g=this._keySchedule=[],h=0;f>h;h++)if(c>h)g[h]=b[h];else{var i=g[h-1];h%c?c>6&&h%c==4&&(i=e[i>>>24]<<24|e[i>>>16&255]<<16|e[i>>>8&255]<<8|e[255&i]):(i=i<<8|i>>>24,i=e[i>>>24]<<24|e[i>>>16&255]<<16|e[i>>>8&255]<<8|e[255&i],i^=p[h/c|0]<<24),g[h]=g[h-c]^i}for(var j=this._invKeySchedule=[],k=0;f>k;k++){var h=f-k;if(k%4)var i=g[h];else var i=g[h-4];4>k||4>=h?j[k]=i:j[k]=l[e[i>>>24]]^m[e[i>>>16&255]]^n[e[i>>>8&255]]^o[e[255&i]]}},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,h,i,j,k,e)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,l,m,n,o,g);var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++){var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],s=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++];j=p,k=q,l=r,m=s}var p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],s=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++];a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=s},keySize:8});a.AES=c._createHelper(q)}(),function(a){function b(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+e+g;return(h<<f|h>>>32-f)+b}function c(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+e+g;return(h<<f|h>>>32-f)+b}function d(a,b,c,d,e,f,g){var h=a+(b^c^d)+e+g;return(h<<f|h>>>32-f)+b}function e(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+e+g;return(h<<f|h>>>32-f)+b}var g=f,h=g.lib,i=h.WordArray,j=h.Hasher,k=g.algo,l=[];!function(){for(var b=0;64>b;b++)l[b]=4294967296*a.abs(a.sin(b+1))|0}();var m=k.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var j=this._hash.words,k=a[f+0],m=a[f+1],n=a[f+2],o=a[f+3],p=a[f+4],q=a[f+5],r=a[f+6],s=a[f+7],t=a[f+8],u=a[f+9],v=a[f+10],w=a[f+11],x=a[f+12],y=a[f+13],z=a[f+14],A=a[f+15],B=j[0],C=j[1],D=j[2],E=j[3];B=b(B,C,D,E,k,7,l[0]),E=b(E,B,C,D,m,12,l[1]),D=b(D,E,B,C,n,17,l[2]),C=b(C,D,E,B,o,22,l[3]),B=b(B,C,D,E,p,7,l[4]),E=b(E,B,C,D,q,12,l[5]),D=b(D,E,B,C,r,17,l[6]),C=b(C,D,E,B,s,22,l[7]),B=b(B,C,D,E,t,7,l[8]),E=b(E,B,C,D,u,12,l[9]),D=b(D,E,B,C,v,17,l[10]),C=b(C,D,E,B,w,22,l[11]),B=b(B,C,D,E,x,7,l[12]),E=b(E,B,C,D,y,12,l[13]),D=b(D,E,B,C,z,17,l[14]),C=b(C,D,E,B,A,22,l[15]),B=c(B,C,D,E,m,5,l[16]),E=c(E,B,C,D,r,9,l[17]),D=c(D,E,B,C,w,14,l[18]),C=c(C,D,E,B,k,20,l[19]),B=c(B,C,D,E,q,5,l[20]),E=c(E,B,C,D,v,9,l[21]),D=c(D,E,B,C,A,14,l[22]),C=c(C,D,E,B,p,20,l[23]),B=c(B,C,D,E,u,5,l[24]),E=c(E,B,C,D,z,9,l[25]),D=c(D,E,B,C,o,14,l[26]),C=c(C,D,E,B,t,20,l[27]),B=c(B,C,D,E,y,5,l[28]),E=c(E,B,C,D,n,9,l[29]),D=c(D,E,B,C,s,14,l[30]),C=c(C,D,E,B,x,20,l[31]),B=d(B,C,D,E,q,4,l[32]),E=d(E,B,C,D,t,11,l[33]),D=d(D,E,B,C,w,16,l[34]),C=d(C,D,E,B,z,23,l[35]),B=d(B,C,D,E,m,4,l[36]),E=d(E,B,C,D,p,11,l[37]),D=d(D,E,B,C,s,16,l[38]),C=d(C,D,E,B,v,23,l[39]),B=d(B,C,D,E,y,4,l[40]),E=d(E,B,C,D,k,11,l[41]),D=d(D,E,B,C,o,16,l[42]),C=d(C,D,E,B,r,23,l[43]),B=d(B,C,D,E,u,4,l[44]),E=d(E,B,C,D,x,11,l[45]),D=d(D,E,B,C,A,16,l[46]),C=d(C,D,E,B,n,23,l[47]),B=e(B,C,D,E,k,6,l[48]),E=e(E,B,C,D,s,10,l[49]),D=e(D,E,B,C,z,15,l[50]),C=e(C,D,E,B,q,21,l[51]),B=e(B,C,D,E,x,6,l[52]),E=e(E,B,C,D,o,10,l[53]),D=e(D,E,B,C,v,15,l[54]),C=e(C,D,E,B,m,21,l[55]),B=e(B,C,D,E,t,6,l[56]),E=e(E,B,C,D,A,10,l[57]),D=e(D,E,B,C,r,15,l[58]),C=e(C,D,E,B,y,21,l[59]),B=e(B,C,D,E,p,6,l[60]),E=e(E,B,C,D,w,10,l[61]),D=e(D,E,B,C,n,15,l[62]),C=e(C,D,E,B,u,21,l[63]),j[0]=j[0]+B|0,j[1]=j[1]+C|0,j[2]=j[2]+D|0,j[3]=j[3]+E|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296),g=d;c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8),b.sigBytes=4*(c.length+1),this._process();for(var h=this._hash,i=h.words,j=0;4>j;j++){var k=i[j];i[j]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}return h},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}});g.MD5=j._createHelper(m),g.HmacMD5=j._createHmacHelper(m)}(Math),function(){var a=f,b=a.lib,c=b.WordArray,d=b.Hasher,e=a.algo,g=[],h=e.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)g[j]=0|a[b+j];else{var k=g[j-3]^g[j-8]^g[j-14]^g[j-16];g[j]=k<<1|k>>>31}var l=(d<<5|d>>>27)+i+g[j];l+=20>j?(e&f|~e&h)+1518500249:40>j?(e^f^h)+1859775393:60>j?(e&f|e&h|f&h)-1894007588:(e^f^h)-899497514,i=h,h=f,f=e<<30|e>>>2,e=d,d=l}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(h),a.HmacSHA1=d._createHmacHelper(h)}(),function(a){var b=f,c=b.lib,d=c.Base,e=c.WordArray,g=b.x64={};g.Word=d.extend({init:function(a,b){this.high=a,this.low=b}}),g.WordArray=d.extend({init:function(b,c){b=this.words=b||[],c!=a?this.sigBytes=c:this.sigBytes=8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;b>d;d++){var f=a[d];c.push(f.high),c.push(f.low)}return e.create(c,this.sigBytes)},clone:function(){for(var a=d.clone.call(this),b=a.words=this.words.slice(0),c=b.length,e=0;c>e;e++)b[e]=b[e].clone();return a}})}(),function(a){var b=f,c=b.lib,d=c.WordArray,e=c.Hasher,g=b.algo,h=[],i=[];!function(){function b(b){for(var c=a.sqrt(b),d=2;c>=d;d++)if(!(b%d))return!1;return!0}function c(a){return 4294967296*(a-(0|a))|0}for(var d=2,e=0;64>e;)b(d)&&(8>e&&(h[e]=c(a.pow(d,.5))),i[e]=c(a.pow(d,1/3)),e++),d++}();var j=[],k=g.SHA256=e.extend({_doReset:function(){this._hash=new d.init(h.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],l=c[6],m=c[7],n=0;64>n;n++){if(16>n)j[n]=0|a[b+n];else{var o=j[n-15],p=(o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3,q=j[n-2],r=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;j[n]=p+j[n-7]+r+j[n-16]}var s=h&k^~h&l,t=d&e^d&f^e&f,u=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),v=(h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25),w=m+v+s+i[n]+j[n],x=u+t;m=l,l=k,k=h,h=g+w|0,g=f,f=e,e=d,d=w+x|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+g|0,c[4]=c[4]+h|0,c[5]=c[5]+k|0,c[6]=c[6]+l|0,c[7]=c[7]+m|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(k),b.HmacSHA256=e._createHmacHelper(k)}(Math),function(){function a(){return g.create.apply(g,arguments)}var b=f,c=b.lib,d=c.Hasher,e=b.x64,g=e.Word,h=e.WordArray,i=b.algo,j=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],k=[];!function(){for(var b=0;80>b;b++)k[b]=a()}();var l=i.SHA512=d.extend({_doReset:function(){this._hash=new h.init([new g.init(1779033703,4089235720),new g.init(3144134277,2227873595),new g.init(1013904242,4271175723),new g.init(2773480762,1595750129),new g.init(1359893119,2917565137),new g.init(2600822924,725511199),new g.init(528734635,4215389547),new g.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],l=c[6],m=c[7],n=d.high,o=d.low,p=e.high,q=e.low,r=f.high,s=f.low,t=g.high,u=g.low,v=h.high,w=h.low,x=i.high,y=i.low,z=l.high,A=l.low,B=m.high,C=m.low,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w,N=x,O=y,P=z,Q=A,R=B,S=C,T=0;80>T;T++){var U=k[T];if(16>T)var V=U.high=0|a[b+2*T],W=U.low=0|a[b+2*T+1];else{var X=k[T-15],Y=X.high,Z=X.low,$=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,_=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),aa=k[T-2],ba=aa.high,ca=aa.low,da=(ba>>>19|ca<<13)^(ba<<3|ca>>>29)^ba>>>6,ea=(ca>>>19|ba<<13)^(ca<<3|ba>>>29)^(ca>>>6|ba<<26),fa=k[T-7],ga=fa.high,ha=fa.low,ia=k[T-16],ja=ia.high,ka=ia.low,W=_+ha,V=$+ga+(_>>>0>W>>>0?1:0),W=W+ea,V=V+da+(ea>>>0>W>>>0?1:0),W=W+ka,V=V+ja+(ka>>>0>W>>>0?1:0);U.high=V,U.low=W}var la=L&N^~L&P,ma=M&O^~M&Q,na=D&F^D&H^F&H,oa=E&G^E&I^G&I,pa=(D>>>28|E<<4)^(D<<30|E>>>2)^(D<<25|E>>>7),qa=(E>>>28|D<<4)^(E<<30|D>>>2)^(E<<25|D>>>7),ra=(L>>>14|M<<18)^(L>>>18|M<<14)^(L<<23|M>>>9),sa=(M>>>14|L<<18)^(M>>>18|L<<14)^(M<<23|L>>>9),ta=j[T],ua=ta.high,va=ta.low,wa=S+sa,xa=R+ra+(S>>>0>wa>>>0?1:0),wa=wa+ma,xa=xa+la+(ma>>>0>wa>>>0?1:0),wa=wa+va,xa=xa+ua+(va>>>0>wa>>>0?1:0),wa=wa+W,xa=xa+V+(W>>>0>wa>>>0?1:0),ya=qa+oa,za=pa+na+(qa>>>0>ya>>>0?1:0);R=P,S=Q,P=N,Q=O,N=L,O=M,M=K+wa|0,L=J+xa+(K>>>0>M>>>0?1:0)|0,J=H,K=I,H=F,I=G,F=D,G=E,E=wa+ya|0,D=xa+za+(wa>>>0>E>>>0?1:0)|0}o=d.low=o+E,d.high=n+D+(E>>>0>o>>>0?1:0),q=e.low=q+G,e.high=p+F+(G>>>0>q>>>0?1:0),s=f.low=s+I,f.high=r+H+(I>>>0>s>>>0?1:0),u=g.low=u+K,g.high=t+J+(K>>>0>u>>>0?1:0),w=h.low=w+M,h.high=v+L+(M>>>0>w>>>0?1:0),y=i.low=y+O,i.high=x+N+(O>>>0>y>>>0?1:0),A=l.low=A+Q,l.high=z+P+(Q>>>0>A>>>0?1:0),C=m.low=C+S,m.high=B+R+(S>>>0>C>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32,b[(d+128>>>10<<5)+30]=Math.floor(c/4294967296),b[(d+128>>>10<<5)+31]=c,a.sigBytes=4*b.length,this._process();var e=this._hash.toX32();return e},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32});b.SHA512=d._createHelper(l),b.HmacSHA512=d._createHmacHelper(l)}(),function(a){var b=f,c=b.lib,d=c.WordArray,e=c.Hasher,g=b.x64,h=g.Word,i=b.algo,j=[],k=[],l=[];!function(){for(var a=1,b=0,c=0;24>c;c++){j[a+5*b]=(c+1)*(c+2)/2%64;var d=b%5,e=(2*a+3*b)%5;a=d,b=e}for(var a=0;5>a;a++)for(var b=0;5>b;b++)k[a+5*b]=b+(2*a+3*b)%5*5;for(var f=1,g=0;24>g;g++){for(var i=0,m=0,n=0;7>n;n++){if(1&f){var o=(1<<n)-1;32>o?m^=1<<o:i^=1<<o-32}128&f?f=f<<1^113:f<<=1}l[g]=h.create(i,m)}}();var m=[];!function(){for(var a=0;25>a;a++)m[a]=h.create()}();var n=i.SHA3=e.extend({cfg:e.cfg.extend({outputLength:512}),_doReset:function(){for(var a=this._state=[],b=0;25>b;b++)a[b]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(a,b){for(var c=this._state,d=this.blockSize/2,e=0;d>e;e++){var f=a[b+2*e],g=a[b+2*e+1];f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),g=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8);var h=c[e];h.high^=g,h.low^=f}for(var i=0;24>i;i++){for(var n=0;5>n;n++){for(var o=0,p=0,q=0;5>q;q++){var h=c[n+5*q];o^=h.high,p^=h.low}var r=m[n];r.high=o,r.low=p}for(var n=0;5>n;n++)for(var s=m[(n+4)%5],t=m[(n+1)%5],u=t.high,v=t.low,o=s.high^(u<<1|v>>>31),p=s.low^(v<<1|u>>>31),q=0;5>q;q++){var h=c[n+5*q];h.high^=o,h.low^=p}for(var w=1;25>w;w++){var h=c[w],x=h.high,y=h.low,z=j[w];if(32>z)var o=x<<z|y>>>32-z,p=y<<z|x>>>32-z;else var o=y<<z-32|x>>>64-z,p=x<<z-32|y>>>64-z;var A=m[k[w]];A.high=o,A.low=p}var B=m[0],C=c[0];B.high=C.high,B.low=C.low;for(var n=0;5>n;n++)for(var q=0;5>q;q++){var w=n+5*q,h=c[w],D=m[w],E=m[(n+1)%5+5*q],F=m[(n+2)%5+5*q];h.high=D.high^~E.high&F.high,h.low=D.low^~E.low&F.low}var h=c[0],G=l[i];h.high^=G.high,h.low^=G.low}},_doFinalize:function(){var b=this._data,c=b.words,e=(8*this._nDataBytes,8*b.sigBytes),f=32*this.blockSize;c[e>>>5]|=1<<24-e%32,c[(a.ceil((e+1)/f)*f>>>5)-1]|=128,b.sigBytes=4*c.length,this._process();for(var g=this._state,h=this.cfg.outputLength/8,i=h/8,j=[],k=0;i>k;k++){var l=g[k],m=l.high,n=l.low;m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),j.push(n),j.push(m)}return new d.init(j,h)},clone:function(){for(var a=e.clone.call(this),b=a._state=this._state.slice(0),c=0;25>c;c++)b[c]=b[c].clone();return a}});b.SHA3=e._createHelper(n),b.HmacSHA3=e._createHmacHelper(n)}(Math),e("undefined"!=typeof f?f:window.CryptoJS)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f=function(a,b){if(!(this instanceof f))return new f(a,b);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&arguments.length>0))throw"Incorrect # of ctor args!";if(b="function"==typeof arguments[0]?arguments[0]:arguments[1],a="function"==typeof arguments[0]?{}:arguments[0],"function"!=typeof b)throw"No callback was provided";this.record=a.record||"record",this.name=a.name||"records";var c;if(a.adapter){"string"==typeof a.adapter&&(a.adapter=[a.adapter]);for(var d=0,e=a.adapter.length;e>d;d++){for(var g=f.adapters.length-1;g>=0&&(f.adapters[g].adapter!==a.adapter[d]||!(c=f.adapters[g].valid()?f.adapters[g]:void 0));g--);if(c)break}}else for(var g=0,h=f.adapters.length;h>g&&!(c=f.adapters[g].valid()?f.adapters[g]:void 0);g++);if(!c)throw"No valid adapter.";for(var d in c)this[d]=c[d];for(var g=0,h=f.plugins.length;h>g;g++)f.plugins[g].call(this);this.init(a,b)};f.adapters=[],f.adapter=function(a,b){b.adapter=a;var c="adapter valid init keys save batch get exists all remove nuke".split(" "),d=this.prototype.indexOf;for(var e in b)if(-1===d(c,e))throw"Invalid adapter! Nonstandard method: "+e;f.adapters.splice(0,0,b)},f.plugins=[],f.plugin=function(a){for(var b in a)"init"===b?f.plugins.push(a[b]):this.prototype[b]=a[b]},f.prototype={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b,c,d){if(a.indexOf)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},lambda:function(a){return this.fn(this.record,a)},fn:function(a,b){return"string"==typeof b?new Function(a,b):b},uuid:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},each:function(a){var b=this.lambda(a);if(this.__results)for(var c=0,d=this.__results.length;d>c;c++)b.call(this,this.__results[c],c);else this.all(function(a){for(var c=0,d=a.length;d>c;c++)b.call(this,a[c],c)});return this}},f.adapter("window-name",function(){"undefined"==typeof window&&(window={top:{}});var a={};try{a=JSON.parse(window.top.name)}catch(b){}return{valid:function(){return"undefined"!=typeof window.top.name},init:function(b,c){return a[this.name]=a[this.name]||{index:[],store:{}},this.index=a[this.name].index,this.store=a[this.name].store,this.fn(this.name,c).call(this,this),this},keys:function(a){return this.fn("keys",a).call(this,this.index),this},save:function(b,c){var d=b.key||this.uuid();return this.exists(d,function(e){e||(b.key&&delete b.key,this.index.push(d)),this.store[d]=b;try{window.top.name=JSON.stringify(a)}catch(f){throw e||(this.index.pop(),delete this.store[d]),f}c&&(b.key=d,this.lambda(c).call(this,b))}),this},batch:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)this.save(a[d],function(a){c.push(a)});return b&&this.lambda(b).call(this,c),this},get:function(a,b){var c;if(this.isArray(a)){c=[];for(var d=0,e=a.length;e>d;d++)c.push(this.store[a[d]])}else c=this.store[a],c&&(c.key=a);return b&&this.lambda(b).call(this,c),this},exists:function(a,b){return this.lambda(b).call(this,!!this.store[a]),this},all:function(a){for(var b=[],c=0,d=this.index.length;d>c;c++){var e=this.store[this.index[c]];e.key=this.index[c],b.push(e)}return this.fn(this.name,a).call(this,b),this},remove:function(b,c){for(var d=this.isArray(b)?b:[b],e=0,f=d.length;f>e;e++){var g=d[e].key?d[e].key:d[e],h=this.indexOf(this.index,g);0>h||(delete this.store[g],this.index.splice(h,1))}return window.top.name=JSON.stringify(a),c&&this.lambda(c).call(this),this},nuke:function(b){return this.store=a[this.name].store={},this.index=a[this.name].index=[],window.top.name=JSON.stringify(a),b&&this.lambda(b).call(this),this}}}()),f.adapter("dom",function(){var a=null;try{a=window.localStorage}catch(b){}var c=function(b){return{key:b+"._index_",all:function(){var b=a.getItem(this.key);return b&&(b=JSON.parse(b)),null===b&&a.setItem(this.key,JSON.stringify([])),JSON.parse(a.getItem(this.key))},add:function(b){var c=this.all();c.push(b),a.setItem(this.key,JSON.stringify(c))},del:function(b){for(var c=this.all(),d=[],e=0,f=c.length;f>e;e++)c[e]!=b&&d.push(c[e]);a.setItem(this.key,JSON.stringify(d))},find:function(a){for(var b=this.all(),c=0,d=b.length;d>c;c++)if(a===b[c])return c;return!1}}};return{valid:function(){return!!a&&function(){var b=!0,c=Math.random();try{a.setItem(c,c)}catch(d){b=!1}return a.removeItem(c),b}()},init:function(a,b){this.indexer=c(this.name),b&&this.fn(this.name,b).call(this,this)},save:function(b,c){var d=b.key?this.name+"."+b.key:this.name+"."+this.uuid();return delete b.key,a.setItem(d,JSON.stringify(b)),this.indexer.find(d)===!1&&this.indexer.add(d),b.key=d.slice(this.name.length+1),c&&this.lambda(c).call(this,b),this},batch:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)this.save(a[d],function(a){c.push(a)});return b&&this.lambda(b).call(this,c),this},keys:function(a){if(a){var b=this.name,c=this.indexer.all(),d=[];if(Array.prototype.map)d=c.map(function(a){return a.replace(b+".","")});else for(var e in c)d.push(e.replace(b+".",""));this.fn("keys",a).call(this,d)}return this},get:function(b,c){if(this.isArray(b)){for(var d=[],e=0,f=b.length;f>e;e++){var g=this.name+"."+b[e],h=a.getItem(g);h&&(h=JSON.parse(h),h.key=b[e]),d.push(h)}c&&this.lambda(c).call(this,d)}else{var g=this.name+"."+b,h=a.getItem(g);h&&(h=JSON.parse(h),h.key=b),c&&this.lambda(c).call(this,h)}return this},exists:function(a,b){var c=this.indexer.find(this.name+"."+a)===!1?!1:!0;return this.lambda(b).call(this,c),this},all:function(b){for(var c,d,e=this.indexer.all(),f=[],g=0,h=e.length;h>g;g++)d=e[g],c=JSON.parse(a.getItem(d)),c.key=d.replace(this.name+".",""),f.push(c);return b&&this.fn(this.name,b).call(this,f),this},remove:function(b,c){var d=this;if(this.isArray(b)){var e,f=b.length,g=function(a){d.remove(b[a],function(){--f>0||c&&d.lambda(c).call(d)})};for(e=0;e<b.length;e++)g(e);return this}var h=this.name+"."+(b.key?b.key:b);return this.indexer.del(h),a.removeItem(h),c&&this.lambda(c).call(this),this},nuke:function(a){return this.all(function(b){for(var c=0,d=b.length;d>c;c++)this.remove(b[c]);a&&this.lambda(a).call(this)}),this}}}()),f.adapter("webkit-sqlite",function(){var a=function(a,b){console&&console.log("error in sqlite adaptor!",a,b)},b=function(){return new Date};return{valid:function(){return!!window.openDatabase},init:function(b,c){var d=this,e=d.fn(d.name,c),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",g=function(){return e.call(d,d)};b&&"function"==typeof b.fail&&(a=b.fail),this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(b){b.executeSql(f,[],g,a)})},keys:function(b){var c=this.lambda(b),d=this,e="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(b){var f=function(a,b){if(0==b.rows.length)c.call(d,[]);else{for(var e=[],f=0,g=b.rows.length;g>f;f++)e.push(b.rows.item(f).id);c.call(d,e)}};b.executeSql(e,[],f,a)}),this},save:function(c,d,e){var f=this;objs=(this.isArray(c)?c:[c]).map(function(a){return a.key||(a.key=f.uuid()),a}),ins="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",win=function(){d&&f.lambda(d).call(f,f.isArray(c)?objs:objs[0])},e=e||function(){},insvals=[],ts=b();try{for(var g=0,h=objs.length;h>g;g++)insvals[g]=[JSON.stringify(objs[g]),ts,objs[g].key]}catch(i){throw a(i),i}return f.db.transaction(function(a){for(var b=0,c=objs.length;c>b;b++)a.executeSql(ins,insvals[b])},function(b,c){a(b,c)},win),this},batch:function(a,b){return this.save(a,b)},get:function(b,c){var d=this,e="",f=this.isArray(b)?b:[b];e="SELECT id, value FROM "+this.record+" WHERE id IN ("+f.map(function(){return"?"}).join(",")+")";var g=function(a,e){for(var g,h,i={},j=0,k=e.rows.length;k>j;j++)g=JSON.parse(e.rows.item(j).value),g.key=e.rows.item(j).id,i[g.key]=g;h=f.map(function(a){return i[a]}),d.isArray(b)||(h=h.length?h[0]:null),c&&d.lambda(c).call(d,h)};return this.db.readTransaction(function(b){b.executeSql(e,f,g,a)}),this},exists:function(b,c){var d="SELECT * FROM "+this.record+" WHERE id = ?",e=this,f=function(a,b){c&&e.fn("exists",c).call(e,b.rows.length>0)};return this.db.readTransaction(function(c){c.executeSql(d,[b],f,a)}),this},all:function(b){var c=this,d="SELECT * FROM "+this.record,e=[],f=this.fn(this.name,b)||void 0,g=function(a,b){if(0!=b.rows.length)for(var d=0,g=b.rows.length;g>d;d++){var h=JSON.parse(b.rows.item(d).value);h.key=b.rows.item(d).id,e.push(h)}f&&f.call(c,e)};return this.db.readTransaction(function(b){b.executeSql(d,[],g,a)}),this},remove:function(b,c){var d,e=this,f="DELETE FROM "+this.record+" WHERE id ",g=function(){c&&e.lambda(c).call(e)};return this.isArray(b)?(d=b,f+="IN ("+d.map(function(){return"?"}).join(",")+")"):(f+="= ?",d=[b]),d=d.map(function(a){return a.key?a.key:a}),this.db.transaction(function(b){b.executeSql(f,d,g,a)}),this},nuke:function(b){var c="DELETE FROM "+this.record,d=this,e=b?function(){d.lambda(b).call(d)}:function(){};return this.db.transaction(function(b){b.executeSql(c,[],e,a)}),this}}}()),f.adapter("indexed-db",function(){function a(a,b){console&&console.log("error in indexed-db adapter!"+a.message,a,b)}function b(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB}return{valid:function(){return!!b()},init:function(c,d){this.idb=b(),this.waiting=[];var e=this.idb.open(this.name,2),f=this,g=f.fn(f.name,d),h=function(){return g.call(f,f)};c&&"function"==typeof c.fail&&(a=c.fail),e.onupgradeneeded=function(a){f.store=e.result.createObjectStore("teststore",{autoIncrement:!0});for(var b=0;b<f.waiting.length;b++)f.waiting[b].call(f);f.waiting=[],h()},e.onsuccess=function(b){if(f.db=e.result,"2.0"!=f.db.version){if("function"==typeof f.db.setVersion){var c=f.db.setVersion("2.0");c.onsuccess=function(a){f.store=f.db.createObjectStore("teststore",{autoIncrement:!0});for(var b=0;b<f.waiting.length;b++)f.waiting[b].call(f);f.waiting=[],h()},c.onerror=function(b){a(b)}}}else{f.store={};for(var d=0;d<f.waiting.length;d++)f.waiting[d].call(f);f.waiting=[],h()}},e.onerror=a},save:function(b,c){if(!this.store)return void this.waiting.push(function(){this.save(b,c)});var d=this,e=function(a){c&&(b.key=a.target.result,d.lambda(c).call(d,b))},f="readwrite",g=this.db.transaction(["teststore"],f),h=g.objectStore("teststore"),i=b.key?h.put(b,b.key):h.put(b);return i.onsuccess=e,i.onerror=a,this},batch:function(a,b){for(var c=[],d=!1,e=this,f=function(b){c.push(b),d=c.length===a.length},g=setInterval(function(){d&&(b&&e.lambda(b).call(e,c),clearInterval(g))},200),h=0,i=a.length;i>h;h++)this.save(a[h],f);return this},get:function(b,c){if(!this.store||!this.db)return void this.waiting.push(function(){this.get(b,c)});var d=this,e=function(a){c&&d.lambda(c).call(d,a.target.result)};if(this.isArray(b))for(var f=[],g=!1,h=b,i=function(a){f.push(a),g=f.length===h.length},j=setInterval(function(){g&&(c&&d.lambda(c).call(d,f),clearInterval(j))},200),k=0,l=h.length;l>k;k++)this.get(h[k],i);else{var m=this.db.transaction("teststore").objectStore("teststore").get(b);m.onsuccess=e,m.onerror=function(b){a(b)}}return this},all:function(a){if(!this.store)return void this.waiting.push(function(){this.all(a)});var b=this.fn(this.name,a)||void 0,c=this,d=this.db.transaction("teststore").objectStore("teststore"),e=[];return d.openCursor().onsuccess=function(a){var d=a.target.result;d?(e.push(d.value),d["continue"]()):b&&b.call(c,e)},this},remove:function(b,c){if(!this.store)return void this.waiting.push(function(){this.remove(b,c)});"object"==typeof b&&(b=b.key);var d=this,e=function(){c&&d.lambda(c).call(d)},f=this.db.transaction(["teststore"],"readwrite").objectStore("teststore")["delete"](b);return f.onsuccess=e,f.onerror=a,this},nuke:function(b){if(!this.store)return void this.waiting.push(function(){this.nuke(b)});var c=this,d=b?function(){c.lambda(b).call(c)}:function(){};try{this.db.transaction(["teststore"],"readwrite").objectStore("teststore").clear().onsuccess=d}catch(e){a()}return this}}}()),f.adapter("html5-filesystem",function(a){var b=function(a){console&&console.error(a,a.name)},c=function(a,d,e){var f=e||[];a.readEntries(function(b){b.length?c(a,d,f.concat(Array.prototype.slice.call(b))):d&&d(f.map(function(a){return a.name}))},b)},d={},e=function(a,b){var c=d[a.name];c?b(c):setTimeout(function(){e(a,b)},10)},f=function(){var a=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");return a?!0:!1},g=function(a){var b;if(f())b=a;else{var c="application/json";try{b=new Blob([a],{type:c})}catch(d){var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"==d.name&&e){var g=new e;g.append([a.buffer]),b=g.getBlob(c)}else b=a}}return b};return{valid:function(){var b=a.requestFileSystem||a.webkitRequestFileSystem||a.moz_requestFileSystem;return!!b},init:function(c,e){function f(b){var c=a.requestFileSystem||a.webkitRequestFileSystem||a.moz_requestFileSystem,f=window.PERSISTENT;"undefined"!=typeof LocalFileSystem&&"undefined"!=typeof LocalFileSystem.PERSISTENT&&(f=LocalFileSystem.PERSISTENT),c(f,b,function(a){a.root.getDirectory(j,{create:!0},function(a){d[j]=a,e&&g.fn(g.name,e).call(g,g);
},function(a){h(a)})},function(a){h(a)})}var g=this,h=function(a){b(a),e&&g.fn(g.name,e).call(g,g)},i=c.size||104857600,j=this.name;g.backup=!1,"undefined"!=typeof c.backup&&(g.backup=c.backup),"undefined"!=typeof navigator.webkitPersistentStorage?navigator.webkitPersistentStorage.requestQuota(i,f,function(){logger.warn("User declined file storage"),h("User declined file storage")}):f(0)},keys:function(a){var b=this;return e(this,function(d){c(d.createReader(),function(c){a&&b.fn("keys",a).call(b,c)})}),this},save:function(a,c){var d=this,f=a.key||this.uuid();a.key=f;var h=function(a){b(a),c&&d.lambda(c).call(d)};return e(this,function(b){var e=function(b,e){b.createWriter(function(b){b.onerror=e,b.onwriteend=function(){this.onwriteend=null,this.truncate(this.position),c&&d.lambda(c).call(d,a)};var f=JSON.stringify(a),h=g(f);b.write(h)},e)};b.getFile(f,{create:!0},function(a){"function"!=typeof a.setMetadata||d.backup!==!1&&"false"!==d.backup?e(a,h):a.setMetadata(function(){e(a,h)},function(){e(a,h)},{"com.apple.MobileBackup":1})},h)}),this},batch:function(a,b){for(var c=this,d=[],e=0,f=a.length;f>e;e++)c.save(a[e],function(a){d.push(a),d.length===f&&b&&c.lambda(b).call(c,d)});return this},get:function(a,c){var d=this;if(this.isArray(a))for(var f=[],g=0,h=a.length;h>g;g++)d.get(a[g],function(a){a&&f.push(a),f.length===h&&c&&d.lambda(c).call(d,f)});else{var i=function(a){b(a),c&&d.lambda(c).call(d)};e(this,function(b){b.getFile(a,{create:!1},function(b){b.file(function(b){var e=new FileReader;e.onerror=i,e.onload=function(b){var e={};try{e=JSON.parse(b.target.result),e.key=a}catch(b){e={key:a}}c&&d.lambda(c).call(d,e)},e.readAsText(b)},i)},i)})}return this},exists:function(a,b){var c=this;return e(this,function(d){d.getFile(a,{create:!1},function(){b&&c.lambda(b).call(c,!0)},function(){b&&c.lambda(b).call(c,!1)})}),this},all:function(a){var b=this;return a&&this.keys(function(c){c.length?b.get(c,function(c){b.fn(b.name,a).call(b,c)}):b.fn(b.name,a).call(b,[])}),this},remove:function(a,c){var d=this,f=function(a){b(a),c&&d.lambda(c).call(d)};return e(this,function(b){b.getFile("string"==typeof a?a:a.key,{create:!1},function(a){a.remove(function(){c&&d.lambda(c).call(d)},f)},f)}),this},nuke:function(a){var b=this,c=0;return this.keys(function(d){if(d.length)for(var e=0,f=d.length;f>e;e++)b.remove(d[e],function(){c++,c===f&&a&&b.lambda(a).call(b)});else a&&b.lambda(a).call(b)}),this}}}(this)),f.adapter("memory",function(){var a={};return{valid:function(){return!0},init:function(b,c){a[this.name]=a[this.name]||{index:[],store:{}},this.index=a[this.name].index,this.store=a[this.name].store;var d=this.fn(this.name,c);return d&&d.call(this,this),this},keys:function(a){return this.fn("keys",a).call(this,this.index),this},save:function(a,b){var c=a.key||this.uuid();return this.exists(c,function(d){d||(a.key&&delete a.key,this.index.push(c)),this.store[c]=a,b&&(a.key=c,this.lambda(b).call(this,a))}),this},batch:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)this.save(a[d],function(a){c.push(a)});return b&&this.lambda(b).call(this,c),this},get:function(a,b){var c;if(this.isArray(a)){c=[];for(var d=0,e=a.length;e>d;d++)c.push(this.store[a[d]])}else c=this.store[a],c&&(c.key=a);return b&&this.lambda(b).call(this,c),this},exists:function(a,b){return this.lambda(b).call(this,!!this.store[a]),this},all:function(a){for(var b=[],c=0,d=this.index.length;d>c;c++){var e=this.store[this.index[c]];e.key=this.index[c],b.push(e)}return this.fn(this.name,a).call(this,b),this},remove:function(a,b){for(var c=this.isArray(a)?a:[a],d=0,e=c.length;e>d;d++){var f=c[d].key?c[d].key:c[d],g=this.indexOf(this.index,f);0>g||(delete this.store[f],this.index.splice(g,1))}return b&&this.lambda(b).call(this),this},nuke:function(b){return this.store=a[this.name].store={},this.index=a[this.name].index=[],b&&this.lambda(b).call(this),this}}}()),e("undefined"!=typeof f?f:window.Lawnchair)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){function d(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function e(){return new d(null)}function f(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e}function g(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e}function h(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e}function i(a){return oa.charAt(a)}function j(a,b){var c=pa[a.charCodeAt(b)];return null==c?-1:c}function k(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function l(a){this.t=1,this.s=0>a?-1:0,a>0?this[0]=a:-1>a?this[0]=a+DV:this.t=0}function m(a){var b=e();return b.fromInt(a),b}function n(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var e=a.length,f=!1,g=0;--e>=0;){var h=8==c?255&a[e]:j(a,e);0>h?"-"==a.charAt(e)&&(f=!0):(f=!1,0==g?this[this.t++]=h:g+c>this.DB?(this[this.t-1]|=(h&(1<<this.DB-g)-1)<<g,this[this.t++]=h>>this.DB-g):this[this.t-1]|=h<<g,g+=c,g>=this.DB&&(g-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,g>0&&(this[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),f&&d.ZERO.subTo(this,this)}function o(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function p(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0)for(h<this.DB&&(c=this[g]>>h)>0&&(e=!0,f=i(c));g>=0;)b>h?(c=(this[g]&(1<<h)-1)<<b-h,c|=this[--g]>>(h+=this.DB-b)):(c=this[g]>>(h-=b)&d,0>=h&&(h+=this.DB,--g)),c>0&&(e=!0),e&&(f+=i(c));return e?f:"0"}function q(){var a=e();return d.ZERO.subTo(this,a),a}function r(){return this.s<0?this.negate():this}function s(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=c-a.t,0!=b)return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0}function t(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function u(){return this.t<=0?0:this.DB*(this.t-1)+t(this[this.t-1]^this.s&this.DM)}function v(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function w(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function x(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function y(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function z(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function A(a,b){var c=this.abs(),e=a.abs(),f=c.t;for(b.t=f+e.t;--f>=0;)b[f]=0;for(f=0;f<e.t;++f)b[f+c.t]=c.am(0,e[f],b,f,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&d.ZERO.subTo(b,b)}function B(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function C(a,b,c){var f=a.abs();if(!(f.t<=0)){var g=this.abs();if(g.t<f.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=e());var h=e(),i=this.s,j=a.s,k=this.DB-t(f[f.t-1]);k>0?(f.lShiftTo(k,h),g.lShiftTo(k,c)):(f.copyTo(h),g.copyTo(c));var l=h.t,m=h[l-1];if(0!=m){var n=m*(1<<this.F1)+(l>1?h[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,r=c.t,s=r-l,u=null==b?e():b;for(h.dlShiftTo(s,u),c.compareTo(u)>=0&&(c[c.t++]=1,c.subTo(u,c)),d.ONE.dlShiftTo(l,u),u.subTo(h,h);h.t<l;)h[h.t++]=0;for(;--s>=0;){var v=c[--r]==m?this.DM:Math.floor(c[r]*o+(c[r-1]+q)*p);if((c[r]+=h.am(0,v,c,s,0,l))<v)for(h.dlShiftTo(s,u),c.subTo(u,c);c[r]<--v;)c.subTo(u,c)}null!=b&&(c.drShiftTo(l,b),i!=j&&d.ZERO.subTo(b,b)),c.t=l,c.clamp(),k>0&&c.rShiftTo(k,c),0>i&&d.ZERO.subTo(c,c)}}}function D(a){var b=e();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(d.ZERO)>0&&a.subTo(b,b),b}function E(a){this.m=a}function F(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function G(a){return a}function H(a){a.divRemTo(this.m,null,a)}function I(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function J(a,b){a.squareTo(b),this.reduce(b)}function K(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function L(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function M(a){var b=e();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(d.ZERO)>0&&this.m.subTo(b,b),b}function N(a){var b=e();return a.copyTo(b),this.reduce(b),b}function O(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function P(a,b){a.squareTo(b),this.reduce(b)}function Q(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function R(){return 0==(this.t>0?1&this[0]:this.s)}function S(a,b){if(a>4294967295||1>a)return d.ONE;var c=e(),f=e(),g=b.convert(this),h=t(a)-1;for(g.copyTo(c);--h>=0;)if(b.sqrTo(c,f),(a&1<<h)>0)b.mulTo(f,g,c);else{var i=c;c=f,f=i}return b.revert(c)}function T(a,b){var c;return c=256>a||b.isEven()?new E(b):new L(b),this.exp(a,c)}function U(){this.i=0,this.j=0,this.S=new Array}function V(a){var b,c,d;for(b=0;256>b;++b)this.S[b]=b;for(c=0,b=0;256>b;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.i=0,this.j=0}function W(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]}function X(){return new U}function Y(a){ra[sa++]^=255&a,ra[sa++]^=a>>8&255,ra[sa++]^=a>>16&255,ra[sa++]^=a>>24&255,sa>=ta&&(sa-=ta)}function Z(){Y((new Date).getTime())}function $(){if(null==qa){for(Z(),qa=X(),qa.init(ra),sa=0;sa<ra.length;++sa)ra[sa]=0;sa=0}return qa.next()}function _(a){var b;for(b=0;b<a.length;++b)a[b]=$()}function aa(){}function ba(a,b){return new d(a,b)}function ca(a){return 16>a?"0"+a.toString(16):a.toString(16)}function da(a,b){if(b<a.length+11)return alert("Message too long for RSA"),null;for(var c=new Array,e=a.length-1;e>=0&&b>0;){var f=a.charCodeAt(e--);128>f?c[--b]=f:f>127&&2048>f?(c[--b]=63&f|128,c[--b]=f>>6|192):(c[--b]=63&f|128,c[--b]=f>>6&63|128,c[--b]=f>>12|224)}c[--b]=0;for(var g=new aa,h=new Array;b>2;){for(h[0]=0;0==h[0];)g.nextBytes(h);c[--b]=h[0]}return c[--b]=2,c[--b]=0,new d(c)}function ea(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function fa(a,b){null!=a&&null!=b&&a.length>0&&b.length>0?(this.n=ba(a,16),this.e=parseInt(b,16)):alert("Invalid RSA public key")}function ga(a){return a.modPowInt(this.e,this.n)}function ha(a){var b=da(a,this.n.bitLength()+7>>3);if(null==b)return null;var c=this.doPublic(b);if(null==c)return null;var d=c.toString(16);return 0==(1&d.length)?d:"0"+d}var ia,ja=0xdeadbeefcafe,ka=15715070==(16777215&ja);ka&&"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=g,ia=30):ka&&"Netscape"!=navigator.appName?(d.prototype.am=f,ia=26):(d.prototype.am=h,ia=28),d.prototype.DB=ia,d.prototype.DM=(1<<ia)-1,d.prototype.DV=1<<ia;var la=52;d.prototype.FV=Math.pow(2,la),d.prototype.F1=la-ia,d.prototype.F2=2*ia-la;var ma,na,oa="0123456789abcdefghijklmnopqrstuvwxyz",pa=new Array;for(ma="0".charCodeAt(0),na=0;9>=na;++na)pa[ma++]=na;for(ma="a".charCodeAt(0),na=10;36>na;++na)pa[ma++]=na;for(ma="A".charCodeAt(0),na=10;36>na;++na)pa[ma++]=na;E.prototype.convert=F,E.prototype.revert=G,E.prototype.reduce=H,E.prototype.mulTo=I,E.prototype.sqrTo=J,L.prototype.convert=M,L.prototype.revert=N,L.prototype.reduce=O,L.prototype.mulTo=Q,L.prototype.sqrTo=P,d.prototype.copyTo=k,d.prototype.fromInt=l,d.prototype.fromString=n,d.prototype.clamp=o,d.prototype.dlShiftTo=v,d.prototype.drShiftTo=w,d.prototype.lShiftTo=x,d.prototype.rShiftTo=y,d.prototype.subTo=z,d.prototype.multiplyTo=A,d.prototype.squareTo=B,d.prototype.divRemTo=C,d.prototype.invDigit=K,d.prototype.isEven=R,d.prototype.exp=S,d.prototype.toString=p,d.prototype.negate=q,d.prototype.abs=r,d.prototype.compareTo=s,d.prototype.bitLength=u,d.prototype.mod=D,d.prototype.modPowInt=T,d.ZERO=m(0),d.ONE=m(1),U.prototype.init=V,U.prototype.next=W;var qa,ra,sa,ta=256;if(null==ra){ra=new Array,sa=0;var ua;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var va=window.crypto.random(32);for(ua=0;ua<va.length;++ua)ra[sa++]=255&va.charCodeAt(ua)}for(;ta>sa;)ua=Math.floor(65536*Math.random()),ra[sa++]=ua>>>8,ra[sa++]=255&ua;sa=0,Z()}aa.prototype.nextBytes=_,ea.prototype.doPublic=ga,ea.prototype.setPublic=fa,ea.prototype.encrypt=ha,b.exports={SecureRandom:aa,byte2Hex:ca,RSAKey:ea}},{}],4:[function(a,b,c){function d(a,b){return n.isUndefined(b)?""+b:!n.isNumber(b)||!isNaN(b)&&isFinite(b)?n.isFunction(b)||n.isRegExp(b)?b.toString():b:b.toString()}function e(a,b){return n.isString(a)?a.length<b?a:a.slice(0,b):a}function f(a){return e(JSON.stringify(a.actual,d),128)+" "+a.operator+" "+e(JSON.stringify(a.expected,d),128)}function g(a,b,c,d,e){throw new q.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function h(a,b){a||g(a,!0,b,"==",q.ok)}function i(a,b){if(a===b)return!0;if(n.isBuffer(a)&&n.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return n.isDate(a)&&n.isDate(b)?a.getTime()===b.getTime():n.isRegExp(a)&&n.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:n.isObject(a)||n.isObject(b)?k(a,b):a==b}function j(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function k(a,b){if(n.isNullOrUndefined(a)||n.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(j(a))return j(b)?(a=o.call(a),b=o.call(b),i(a,b)):!1;try{var c,d,e=r(a),f=r(b)}catch(g){return!1}if(e.length!=f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!i(a[c],b[c]))return!1;return!0}function l(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function m(a,b,c,d){var e;n.isString(c)&&(d=c,c=null);try{b()}catch(f){e=f}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&g(e,c,"Missing expected exception"+d),!a&&l(e,c)&&g(e,c,"Got unwanted exception"+d),a&&e&&c&&!l(e,c)||!a&&e)throw e}var n=a("util/"),o=Array.prototype.slice,p=Object.prototype.hasOwnProperty,q=b.exports=h;q.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var b=a.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=b.name,h=d.indexOf("\n"+e);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},n.inherits(q.AssertionError,Error),q.fail=g,q.ok=h,q.equal=function(a,b,c){a!=b&&g(a,b,c,"==",q.equal)},q.notEqual=function(a,b,c){a==b&&g(a,b,c,"!=",q.notEqual)},q.deepEqual=function(a,b,c){i(a,b)||g(a,b,c,"deepEqual",q.deepEqual)},q.notDeepEqual=function(a,b,c){i(a,b)&&g(a,b,c,"notDeepEqual",q.notDeepEqual)},q.strictEqual=function(a,b,c){a!==b&&g(a,b,c,"===",q.strictEqual)},q.notStrictEqual=function(a,b,c){a===b&&g(a,b,c,"!==",q.notStrictEqual)},q["throws"]=function(a,b,c){m.apply(this,[!0].concat(o.call(arguments)))},q.doesNotThrow=function(a,b){m.apply(this,[!1].concat(o.call(arguments)))},q.ifError=function(a){if(a)throw a};var r=Object.keys||function(a){var b=[];for(var c in a)p.call(a,c)&&b.push(c);return b}},{"util/":29}],5:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],6:[function(a,b,c){(function(c){function d(){}function e(){m.log.apply(m,arguments)}function f(){m.log.apply(m,arguments)}function g(){m.warn.apply(m,arguments)}function h(a){p[a]=Date.now()}function i(a){var b=p[a];if(!b)throw new Error("No such label: "+a);var c=Date.now()-b;m.log(a+": "+c+"ms")}function j(){var a=new Error;a.name="Trace",a.message=n.format.apply(null,arguments),m.error(a.stack)}function k(a){m.log(n.inspect(a)+"\n")}function l(a){if(!a){var b=o.call(arguments,1);l.ok(!1,n.format.apply(null,b))}}var m,n=a("util"),l=a("assert"),o=Array.prototype.slice,p={};m="undefined"!=typeof c&&c.console?c.console:"undefined"!=typeof window&&window.console?window.console:{};for(var q=[[d,"log"],[e,"info"],[f,"warn"],[g,"error"],[h,"time"],[i,"timeEnd"],[j,"trace"],[k,"dir"],[l,"assert"]],r=0;r<q.length;r++){var s=q[r],t=s[0],u=s[1];m[u]||(m[u]=t)}b.exports=m}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:4,util:29}],7:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],8:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f=f||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);f.lib.Cipher||function(a){var b=f,c=b.lib,d=c.Base,e=c.WordArray,g=c.BufferedBlockAlgorithm,h=b.enc,i=(h.Utf8,h.Base64),j=b.algo,k=j.EvpKDF,l=c.Cipher=g.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function a(a){return"string"==typeof a?x:u}return function(b){return{encrypt:function(c,d,e){return a(d).encrypt(b,c,d,e)},decrypt:function(c,d,e){return a(d).decrypt(b,c,d,e)}}}}()}),m=(c.StreamCipher=l.extend({_doFinalize:function(){var a=this._process(!0);return a},blockSize:1}),b.mode={}),n=c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}}),o=m.CBC=function(){function b(b,c,d){var e=this._iv;if(e){var f=e;this._iv=a}else var f=this._prevBlock;for(var g=0;d>g;g++)b[c+g]^=f[g]}var c=n.extend();return c.Encryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize;b.call(this,a,c,e),d.encryptBlock(a,c),this._prevBlock=a.slice(c,c+e)}}),c.Decryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize,f=a.slice(c,c+e);d.decryptBlock(a,c),b.call(this,a,c,e),this._prevBlock=f}}),c}(),p=b.pad={},q=p.Pkcs7={pad:function(a,b){for(var c=4*b,d=c-a.sigBytes%c,f=d<<24|d<<16|d<<8|d,g=[],h=0;d>h;h+=4)g.push(f);var i=e.create(g,d);a.concat(i)},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},r=(c.BlockCipher=l.extend({cfg:l.cfg.extend({mode:o,padding:q}),reset:function(){l.reset.call(this);var a=this.cfg,b=a.iv,c=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var d=c.createEncryptor;else{var d=c.createDecryptor;this._minBufferSize=1}this._mode=d.call(c,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else{var b=this._process(!0);a.unpad(b)}return b},blockSize:4}),c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}})),s=b.format={},t=s.OpenSSL={stringify:function(a){var b=a.ciphertext,c=a.salt;if(c)var d=e.create([1398893684,1701076831]).concat(c).concat(b);else var d=b;return d.toString(i)},parse:function(a){var b=i.parse(a),c=b.words;if(1398893684==c[0]&&1701076831==c[1]){var d=e.create(c.slice(2,4));c.splice(0,4),b.sigBytes-=16}return r.create({ciphertext:b,salt:d})}},u=c.SerializableCipher=d.extend({cfg:d.extend({format:t}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d),f=e.finalize(b),g=e.cfg;return r.create({ciphertext:f,key:c,iv:g.iv,algorithm:a,mode:g.mode,padding:g.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=a.createDecryptor(c,d).finalize(b.ciphertext);return e},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),v=b.kdf={},w=v.OpenSSL={execute:function(a,b,c,d){d||(d=e.random(8));var f=k.create({keySize:b+c}).compute(a,d),g=e.create(f.words.slice(b),4*c);return f.sigBytes=4*b,r.create({key:f,iv:g,salt:d})}},x=c.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:w}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=e.iv;var f=u.encrypt.call(this,a,b,e.key,d);return f.mixIn(e),f},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=e.iv;var f=u.decrypt.call(this,a,b,e.key,d);return f}})}(),function(){var a=f,b=a.lib,c=b.WordArray,d=b.Hasher,e=a.algo,g=[],h=e.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)g[j]=0|a[b+j];else{var k=g[j-3]^g[j-8]^g[j-14]^g[j-16];g[j]=k<<1|k>>>31}var l=(d<<5|d>>>27)+i+g[j];l+=20>j?(e&f|~e&h)+1518500249:40>j?(e^f^h)+1859775393:60>j?(e&f|e&h|f&h)-1894007588:(e^f^h)-899497514,i=h,h=f,f=e<<30|e>>>2,e=d,d=l}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(h),a.HmacSHA1=d._createHmacHelper(h)}(),function(a){var b=f,c=b.lib,d=c.Base,e=c.WordArray,g=b.x64={};g.Word=d.extend({init:function(a,b){this.high=a,this.low=b}}),g.WordArray=d.extend({init:function(b,c){b=this.words=b||[],c!=a?this.sigBytes=c:this.sigBytes=8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;b>d;d++){var f=a[d];c.push(f.high),c.push(f.low)}return e.create(c,this.sigBytes)},clone:function(){for(var a=d.clone.call(this),b=a.words=this.words.slice(0),c=b.length,e=0;c>e;e++)b[e]=b[e].clone();return a}})}(),e("undefined"!=typeof f?f:window.CryptoJS)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){b.exports=a(2)},{}],10:[function(a,b,c){var d=a("./v1"),e=a("./v4"),f=e;f.v1=d,f.v4=e,b.exports=f},{"./v1":13,"./v4":14}],11:[function(a,b,c){function d(a,b){var c=b||0,d=e;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}for(var e=[],f=0;256>f;++f)e[f]=(f+256).toString(16).substr(1);b.exports=d},{}],12:[function(a,b,c){(function(a){var c,d=a.crypto||a.msCrypto;if(d&&d.getRandomValues){var e=new Uint8Array(16);c=function(){return d.getRandomValues(e),
e}}if(!c){var f=new Array(16);c=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),f[b]=a>>>((3&b)<<3)&255;return f}}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b,c){function d(a,b,c){var d=b&&c||0,e=b||[];a=a||{};var g=void 0!==a.clockseq?a.clockseq:i,l=void 0!==a.msecs?a.msecs:(new Date).getTime(),m=void 0!==a.nsecs?a.nsecs:k+1,n=l-j+(m-k)/1e4;if(0>n&&void 0===a.clockseq&&(g=g+1&16383),(0>n||l>j)&&void 0===a.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");j=l,k=m,i=g,l+=122192928e5;var o=(1e4*(268435455&l)+m)%4294967296;e[d++]=o>>>24&255,e[d++]=o>>>16&255,e[d++]=o>>>8&255,e[d++]=255&o;var p=l/4294967296*1e4&268435455;e[d++]=p>>>8&255,e[d++]=255&p,e[d++]=p>>>24&15|16,e[d++]=p>>>16&255,e[d++]=g>>>8|128,e[d++]=255&g;for(var q=a.node||h,r=0;6>r;++r)e[d+r]=q[r];return b?b:f(e)}var e=a("./lib/rng"),f=a("./lib/bytesToUuid"),g=e(),h=[1|g[0],g[1],g[2],g[3],g[4],g[5]],i=16383&(g[6]<<8|g[7]),j=0,k=0;b.exports=d},{"./lib/bytesToUuid":11,"./lib/rng":12}],14:[function(a,b,c){function d(a,b,c){var d=b&&c||0;"string"==typeof a&&(b="binary"==a?new Array(16):null,a=null),a=a||{};var g=a.random||(a.rng||e)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,b)for(var h=0;16>h;++h)b[d+h]=g[h];return b||f(g)}var e=a("./lib/rng"),f=a("./lib/bytesToUuid");b.exports=d},{"./lib/bytesToUuid":11,"./lib/rng":12}],15:[function(a,b,c){function d(){if(window&&window.device)return window.device.uuid;if(navigator&&navigator.device)return navigator.device.uuid;if(window&&window.localStorage){var a=window.localStorage.getItem(f);return a||(a=e(),localStorage.setItem(f,a)),a}throw Error("Cannot create and store client id")}var e=a("uuid").v1,f="feedhenry_sync_client";b.exports={getClientId:d}},{uuid:10}],16:[function(a,b,c){var d,e,f=a("./clientIdProvider"),g=function(a,b,c){e||(e="/sync/");var g=d+e+a.dataset_id,h=a.req;h.__fh={cuid:f.getClientId()};var i=JSON.stringify(h),j=new XMLHttpRequest;j.open("POST",g,!0),j.setRequestHeader("Content-type","application/json; charset=utf-8"),j.onreadystatechange=function(){if(j.readyState===XMLHttpRequest.DONE)if(j.status>=200&&j.status<300||304===j.status){var a;try{j.responseText&&(a=JSON.parse(j.responseText))}catch(d){return c(d)}b(a)}else c(j.responseText)},j.send(i)},h=function(a,b){d=a,e=b};b.exports={handler:g,init:h}},{"./clientIdProvider":15}],17:[function(a,b,c){var d=a("./sync-client"),e=window.$fh=window.$fh||{};e.sync=d,b.exports=e.sync},{"./sync-client":18}],18:[function(a,b,c){var d=a("../libs/generated/crypto"),e=a("../libs/generated/lawnchair"),f=a("./cloudHandler"),g={defaults:{sync_frequency:10,auto_sync_local_updates:!0,notify_client_storage_failed:!0,notify_sync_started:!0,notify_sync_complete:!0,notify_offline_update:!0,notify_collision_detected:!0,notify_remote_update_failed:!0,notify_local_update_applied:!0,notify_remote_update_applied:!0,notify_delta_received:!0,notify_record_delta_received:!0,notify_sync_failed:!0,do_console_log:!1,crashed_count_wait:10,resend_crashed_updates:!0,sync_active:!0,storage_strategy:"html5-filesystem",file_system_quota:61644800,icloud_backup:!1},notifications:{CLIENT_STORAGE_FAILED:"client_storage_failed",SYNC_STARTED:"sync_started",SYNC_COMPLETE:"sync_complete",OFFLINE_UPDATE:"offline_update",COLLISION_DETECTED:"collision_detected",REMOTE_UPDATE_FAILED:"remote_update_failed",REMOTE_UPDATE_APPLIED:"remote_update_applied",LOCAL_UPDATE_APPLIED:"local_update_applied",DELTA_RECEIVED:"delta_received",RECORD_DELTA_RECEIVED:"record_delta_received",SYNC_FAILED:"sync_failed"},datasets:{},config:void 0,notify_callback:void 0,notify_callback_map:{},init_is_called:!1,uid_map:{},init:function(a){g.consoleLog("sync - init called"),g.config=JSON.parse(JSON.stringify(g.defaults));for(var b in a)g.config[b]=a[b];g.init_is_called||(g.init_is_called=!0,g.datasetMonitor()),f.init(g.config.cloudUrl,g.config.cloudPath)},notify:function(a,b){1===arguments.length&&"function"==typeof a?g.notify_callback=a:g.notify_callback_map[a]=b},manage:function(a,b,c,d,e){g.consoleLog("manage - START"),g.config||(g.config=JSON.parse(JSON.stringify(g.defaults)));var f=b||{},h=function(b){g.consoleLog("doManage dataset :: initialised = "+b.initialised+" :: "+a+" :: "+JSON.stringify(f));var h=b.config?b.config:g.config,i=g.setOptions(h,f);b.query_params=c||b.query_params||{},b.meta_data=d||b.meta_data||{},b.config=i,b.syncRunning=!1,b.syncPending=!0,b.initialised=!0,"undefined"==typeof b.meta&&(b.meta={}),g.saveDataSet(a,function(){e&&e()})};g.getDataSet(a,function(a){g.consoleLog("manage - dataset already loaded"),h(a)},function(b){g.consoleLog("manage - dataset not loaded... trying to load"),g.loadDataSet(a,function(b){g.consoleLog("manage - dataset loaded from local storage"),g.doNotify(a,null,g.notifications.LOCAL_UPDATE_APPLIED,"load"),h(b)},function(b){g.consoleLog("manage - Creating new dataset for id "+a);var c={};c.data={},c.pending={},c.meta={},g.datasets[a]=c,h(c)})})},setOptions:function(a,b){a||(a=JSON.parse(JSON.stringify(g.defaults)));var c=JSON.parse(JSON.stringify(a)),d=JSON.parse(JSON.stringify(b));for(var e in d)c[e]=d[e];return c},list:function(a,b,c){g.getDataSet(a,function(a){if(a&&a.data){var d=JSON.parse(JSON.stringify(a.data));b(d)}else c&&c("no_data")},function(a,b){c&&c(a,b)})},getUID:function(a){var b=g.uid_map[a];return b||0===b?b:a},create:function(a,b,c,d){return null==b&&d?d("null_data"):void g.addPendingObj(a,null,b,"create",c,d)},read:function(a,b,c,d){g.getDataSet(a,function(a){b=g.getUID(b);var e=a.data[b];if(e){var f=JSON.parse(JSON.stringify(e));c(f)}else d("unknown_uid")},function(a,b){d&&d(a,b)})},update:function(a,b,c,d,e){b=g.getUID(b),g.addPendingObj(a,b,c,"update",d,e)},"delete":function(a,b,c,d){b=g.getUID(b),g.addPendingObj(a,b,null,"delete",c,d)},getPending:function(a,b){g.getDataSet(a,function(a){var c;a&&(c=a.pending),b(c)},function(a,b){g.consoleLog(a)})},clearPending:function(a,b){g.getDataSet(a,function(c){c.pending={},g.saveDataSet(a,b)})},listCollisions:function(a,b,c){g.getDataSet(a,function(d){g.doCloudCall({dataset_id:a,req:{fn:"listCollisions",meta_data:d.meta_data}},b,c)},c)},removeCollision:function(a,b,c,d){g.getDataSet(a,function(e){g.doCloudCall({dataset_id:a,req:{fn:"removeCollision",hash:b,meta_data:e.meta_data}},c,d)})},isOnline:function(a){var b=!0;if("undefined"!=typeof navigator.onLine&&(b=navigator.onLine),b&&"undefined"!=typeof navigator.network&&"undefined"!=typeof navigator.network.connection){var c=navigator.network.connection.type;("none"===c||null===c)&&(b=!1)}return a(b)},doNotify:function(a,b,c,d){if(g.notify_callback||g.notify_callback_map[a]){var e=g.notify_callback_map[a]||g.notify_callback;if(g.config["notify_"+c]){var f={dataset_id:a,uid:b,code:c,message:d};setTimeout(function(){e(f)},0)}}},getDataSet:function(a,b,c){var d=g.datasets[a];d?b(d):c&&c("unknown_dataset "+a,a)},getQueryParams:function(a,b,c){var d=g.datasets[a];d?b(d.query_params):c&&c("unknown_dataset "+a,a)},setQueryParams:function(a,b,c,d){var e=g.datasets[a];e?(e.query_params=b,g.saveDataSet(a),c&&c(e.query_params)):d&&d("unknown_dataset "+a,a)},getMetaData:function(a,b,c){var d=g.datasets[a];d?b(d.meta_data):c&&c("unknown_dataset "+a,a)},setMetaData:function(a,b,c,d){var e=g.datasets[a];e?(e.meta_data=b,g.saveDataSet(a),c&&c(e.meta_data)):d&&d("unknown_dataset "+a,a)},getConfig:function(a,b,c){var d=g.datasets[a];d?b(d.config):c&&c("unknown_dataset "+a,a)},setConfig:function(a,b,c,d){var e=g.datasets[a];if(e){var f=g.setOptions(e.config,b);e.config=f,g.saveDataSet(a),c&&c(e.config)}else d&&d("unknown_dataset "+a,a)},stopSync:function(a,b,c){g.setConfig(a,{sync_active:!1},function(){b&&b()},c)},startSync:function(a,b,c){g.setConfig(a,{sync_active:!0},function(){b&&b()},c)},doSync:function(a,b,c){var d=g.datasets[a];d?(d.syncPending=!0,g.saveDataSet(a),b&&b()):c&&c("unknown_dataset "+a,a)},forceSync:function(a,b,c){var d=g.datasets[a];d?(d.syncForced=!0,g.saveDataSet(a),b&&b()):c&&c("unknown_dataset "+a,a)},sortObject:function(a){if("object"!=typeof a||null===a)return a;var b=[];return Object.keys(a).sort().forEach(function(c){b.push({key:c,value:g.sortObject(a[c])})}),b},sortedStringify:function(a){var b="";try{b=JSON.stringify(g.sortObject(a))}catch(c){console.error("Error stringifying sorted object:"+c)}return b},generateHash:function(a){var b=g.getHashMethod(g.sortedStringify(a));return b.toString()},addPendingObj:function(a,b,c,d,e,f){function h(c){c.hash=c.hash||g.generateHash(c),g.getDataSet(a,function(f){f.pending[c.hash]=c,g.updateDatasetFromLocal(f,c),g.config.auto_sync_local_updates&&(f.syncPending=!0),g.saveDataSet(a),g.doNotify(a,b,g.notifications.LOCAL_UPDATE_APPLIED,d),e(c)},function(a,b){f&&f(a,b)})}g.isOnline(function(c){c||g.doNotify(a,b,g.notifications.OFFLINE_UPDATE,d)});var i={};i.inFlight=!1,i.action=d,i.post=JSON.parse(JSON.stringify(c)),i.postHash=g.generateHash(i.post),i.timestamp=(new Date).getTime(),"create"===d?(i.hash=g.generateHash(i),i.uid=i.hash,h(i)):g.read(a,b,function(a){i.uid=b,i.pre=a.data,i.preHash=g.generateHash(a.data),h(i)},function(a,b){f&&f(a,b)})},syncLoop:function(a){g.getDataSet(a,function(b){b.syncPending=!1,b.syncRunning=!0,b.syncLoopStart=(new Date).getTime(),g.doNotify(a,null,g.notifications.SYNC_STARTED,null),g.isOnline(function(c){if(c){var d={};d.fn="sync",d.dataset_id=a,d.query_params=b.query_params,d.config=b.config,d.meta_data=b.meta_data,d.dataset_hash=b.hash,d.acknowledgements=b.acknowledgements||[];var e=b.pending,f=[];for(var h in e)e[h].inFlight||e[h].crashed||e[h].delayed||(e[h].inFlight=!0,e[h].inFlightDate=(new Date).getTime(),f.push(e[h]));d.pending=f,f.length>0&&g.consoleLog("Starting sync loop - global hash = "+b.hash+" :: params = "+JSON.stringify(d,null,2)),g.doCloudCall({dataset_id:a,req:d},function(c){function d(c,d,f){if(c)for(var h in c)e=c[h],f.push(e),b.pending[h]&&b.pending[h].inFlight&&(delete b.pending[h],g.doNotify(a,e.uid,d,e))}var e;if(g.updateCrashedInFlightFromNewData(a,b,c),g.updateDelayedFromNewData(a,b,c),g.updateMetaFromNewData(a,b,c),c.updates){var f=[];g.checkUidChanges(b,c.updates.applied),d(c.updates.applied,g.notifications.REMOTE_UPDATE_APPLIED,f),d(c.updates.failed,g.notifications.REMOTE_UPDATE_FAILED,f),d(c.updates.collisions,g.notifications.COLLISION_DETECTED,f),b.acknowledgements=f}c.hash&&c.hash!==b.hash?(g.consoleLog("Local dataset stale - syncing records :: local hash= "+b.hash+" - remoteHash="+c.hash),g.syncRecords(a)):(g.consoleLog("Local dataset up to date"),g.syncComplete(a,"online",g.notifications.SYNC_COMPLETE))},function(c,d){g.markInFlightAsCrashed(b),g.consoleLog("syncLoop failed : msg="+c+" :: err = "+d),g.syncComplete(a,c,g.notifications.SYNC_FAILED)})}else g.syncComplete(a,"offline",g.notifications.SYNC_FAILED)})})},syncRecords:function(a){g.getDataSet(a,function(b){var c=b.data||{},d={};for(var e in c){var f=e,h=c[e].hash;d[f]=h}var i={};i.fn="syncRecords",i.dataset_id=a,i.query_params=b.query_params,i.clientRecs=d,g.consoleLog("syncRecParams :: "+JSON.stringify(i)),g.doCloudCall({dataset_id:a,req:i},function(d){g.consoleLog("syncRecords Res before applying pending changes :: "+JSON.stringify(d)),g.applyPendingChangesToRecords(b,d),g.consoleLog("syncRecords Res after apply pending changes :: "+JSON.stringify(d));var e;if(d.create)for(e in d.create)c[e]={hash:d.create[e].hash,data:d.create[e].data},g.doNotify(a,e,g.notifications.RECORD_DELTA_RECEIVED,"create");if(d.update)for(e in d.update)c[e].hash=d.update[e].hash,c[e].data=d.update[e].data,g.doNotify(a,e,g.notifications.RECORD_DELTA_RECEIVED,"update");if(d["delete"])for(e in d["delete"])delete c[e],g.doNotify(a,e,g.notifications.RECORD_DELTA_RECEIVED,"delete");g.doNotify(a,d.hash,g.notifications.DELTA_RECEIVED,"partial dataset"),b.data=c,d.hash&&(b.hash=d.hash),g.syncComplete(a,"online",g.notifications.SYNC_COMPLETE)},function(b,c){g.consoleLog("syncRecords failed : msg="+b+" :: err="+c),g.syncComplete(a,b,g.notifications.SYNC_FAILED)})})},syncComplete:function(a,b,c){g.getDataSet(a,function(d){d.syncRunning=!1,d.syncLoopEnd=(new Date).getTime(),g.saveDataSet(a),g.doNotify(a,d.hash,c,b)})},applyPendingChangesToRecords:function(a,b){var c=a.pending;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],f=e.uid;if(b.create){var g=b.create;g&&g[f]&&delete g[f]}if(b.update){var h=b.update;h&&h[f]&&delete h[f]}if(b["delete"]){var i=b["delete"];i&&i[f]&&delete i[f]}}},checkUidChanges:function(a,b){if(b){var c={},d=0;for(var e in b)if(b.hasOwnProperty(e)){var f=b[e],h=f.action;if(h&&"create"===h){var i=f.uid,j=f.hash;d++,g.uid_map[j]=i,c[j]=i;var k=a.data[j];k&&(a.data[i]=k,delete a.data[j]);var l=a.meta[j];l&&(a.meta[i]=l,delete a.meta[j])}}if(d>0)for(var m in a.pending)if(a.pending.hasOwnProperty(m)){var n=a.pending[m],o=n.uid;c[o]&&(n.uid=c[o])}}},checkDatasets:function(){for(var a in g.datasets)if(g.datasets.hasOwnProperty(a)){var b=g.datasets[a];if(b&&!b.syncRunning&&(b.config.sync_active||b.syncForced)){var c=b.syncLoopStart,d=b.syncLoopEnd;if(b.syncForced)b.syncPending=!0;else if(null==c)g.consoleLog(a+" - Performing initial sync"),b.syncPending=!0;else if(null!=d){var e=(new Date).getTime()-d,f=1e3*b.config.sync_frequency;e>f&&(b.syncPending=!0)}b.syncPending&&(b.syncForced=!1,g.syncLoop(a))}}},setCloudHandler:function(a){g.cloudHandler=a},doCloudCall:function(a,b,c){g.cloudHandler&&"function"==typeof g.cloudHandler?g.cloudHandler(a,b,c):console.log("Missing cloud handler for sync. Please refer to documentation")},datasetMonitor:function(){g.checkDatasets(),setTimeout(function(){g.datasetMonitor()},500)},setStorageAdapter:function(a){g.getStorageAdapter=a},setHashMethod:function(a){g.getHashMethod=a},getStorageAdapter:function(a,b,c){var d=function(c,d){var e=(b?"save to":"load from")+" local storage failed msg: "+c+" err: "+d;g.doNotify(a,null,g.notifications.CLIENT_STORAGE_FAILED,e),g.consoleLog(e)};e({fail:d,adapter:g.config.storage_strategy,size:g.config.file_system_quota,backup:g.config.icloud_backup},function(){return c(null,this)})},getHashMethod:d.SHA1,saveDataSet:function(a,b){g.getDataSet(a,function(c){g.getStorageAdapter(a,!0,function(d,e){e.save({key:"dataset_"+a,val:c},function(){return b?b():void 0})})})},loadDataSet:function(a,b,c){g.getStorageAdapter(a,!1,function(d,e){e.get("dataset_"+a,function(d){if(d&&d.val){var e=d.val;if("string"==typeof e&&(e=JSON.parse(e)),e.initialised=!1,g.datasets[a]=e,g.consoleLog("load from local storage success for dataset_id :"+a),b)return b(e)}else if(c)return c()})})},clearCache:function(a,b){delete g.datasets[a],g.notify_callback_map[a]=null,g.getStorageAdapter(a,!0,function(c,d){d.remove("dataset_"+a,function(){return g.consoleLog("local cache is cleared for dataset : "+a),b?b():void 0})})},updateDatasetFromLocal:function(a,b){var c,d,e=a.pending,f=b.uid;g.consoleLog("updating local dataset for uid "+f+" - action = "+b.action),a.meta[f]=a.meta[f]||{},"create"===b.action&&(a.data[f]&&(g.consoleLog("dataset already exists for uid in create :: "+JSON.stringify(a.data[f])),a.meta[f].fromPending&&(c=a.meta[f].pendingUid,delete e[c])),a.data[f]={}),"update"===b.action&&a.data[f]&&a.meta[f].fromPending&&(g.consoleLog("updating an existing pending record for dataset :: "+JSON.stringify(a.data[f])),c=a.meta[f].pendingUid,d=e[c],d&&(d.inFlight?(g.consoleLog("existing in-inflight pending record = "+JSON.stringify(d)),b.delayed=!0,b.waiting=d.hash):(g.consoleLog("existing pre-flight pending record = "+JSON.stringify(d)),d.post=b.post,d.postHash=b.postHash,delete e[b.hash],b.hash=c))),"delete"===b.action&&a.data[f]&&(a.meta[f].fromPending&&(g.consoleLog("Deleting an existing pending record for dataset :: "+JSON.stringify(a.data[f])),c=a.meta[f].pendingUid,d=e[c],d&&(d.inFlight?(g.consoleLog("existing in-inflight pending record = "+JSON.stringify(d)),b.delayed=!0,b.waiting=d.hash):(g.consoleLog("existing pending record = "+JSON.stringify(d)),"create"===d.action&&(delete e[b.hash],delete e[c]),"update"===d.action&&(b.pre=d.pre,b.preHash=d.preHash,b.inFlight=!1,delete e[c])))),delete a.data[f]),a.data[f]&&(a.data[f].data=b.post,a.data[f].hash=b.postHash,a.meta[f].fromPending=!0,a.meta[f].pendingUid=b.hash)},updateCrashedInFlightFromNewData:function(a,b,c){var d,e,f=({applied:g.notifications.REMOTE_UPDATE_APPLIED,failed:g.notifications.REMOTE_UPDATE_FAILED,collisions:g.notifications.COLLISION_DETECTED},b.pending);if(f){for(d in f)if(f.hasOwnProperty(d)&&(e=f[d],e.inFlight&&e.crashed))if(g.consoleLog("updateCrashedInFlightFromNewData - Found crashed inFlight pending record uid="+e.uid+" :: hash="+e.hash),c&&c.updates&&c.updates.hashes){var h=c.updates.hashes[d];h||(e.crashedCount?e.crashedCount++:e.crashedCount=1)}else e.crashedCount?e.crashedCount++:e.crashedCount=1;for(d in f)f.hasOwnProperty(d)&&(e=f[d],e.inFlight&&e.crashed&&e.crashedCount>b.config.crashed_count_wait&&(g.consoleLog("updateCrashedInFlightFromNewData - Crashed inflight pending record has reached crashed_count_wait limit : "+JSON.stringify(e)),g.consoleLog("updateCrashedInFlightFromNewData - Retryig crashed inflight pending record"),e.crashed=!1,e.inFlight=!1))}},updateDelayedFromNewData:function(a,b,c){var d,e,f=b.pending;if(f)for(d in f)if(f.hasOwnProperty(d)&&(e=f[d],e.delayed&&e.waiting&&(g.consoleLog("updateDelayedFromNewData - Found delayed pending record uid="+e.uid+" :: hash="+e.hash+" :: waiting="+e.waiting),c&&c.updates&&c.updates.hashes))){var h=c.updates.hashes[e.waiting];h&&(g.consoleLog("updateDelayedFromNewData - Waiting pending record is resolved rec="+JSON.stringify(h)),e.delayed=!1,e.waiting=void 0)}},updateMetaFromNewData:function(a,b,c){var d=b.meta;if(d&&c&&c.updates&&c.updates.hashes)for(var e in d)if(d.hasOwnProperty(e)){var f=d[e],h=f.pendingUid;g.consoleLog("updateMetaFromNewData - Found metadata with uid = "+e+" :: pendingHash = "+h);var i=!0;if(h){i=!1;var j=c.updates.hashes[h];j&&(g.consoleLog("updateMetaFromNewData - Found pendingUid in meta data resolved - resolved = "+JSON.stringify(j)),f.pendingUid=void 0,i=!0)}i&&(g.consoleLog("updateMetaFromNewData - both previous and current pendings are resolved for meta data with uid "+e+". Delete it."),delete d[e])}},markInFlightAsCrashed:function(a){var b,c,d=a.pending;if(d){var e={};for(b in d)d.hasOwnProperty(b)&&(c=d[b],c.inFlight&&(g.consoleLog("Marking in flight pending record as crashed : "+b),c.crashed=!0,e[c.uid]=c))}},consoleLog:function(a){g.config.do_console_log&&console.log(a)}};!function(){g.config=g.defaults}(),g.setCloudHandler(f.handler),b.exports={init:g.init,manage:g.manage,notify:g.notify,doList:g.list,getUID:g.getUID,doCreate:g.create,doRead:g.read,doUpdate:g.update,doDelete:g["delete"],listCollisions:g.listCollisions,removeCollision:g.removeCollision,getPending:g.getPending,clearPending:g.clearPending,getDataset:g.getDataSet,getQueryParams:g.getQueryParams,setQueryParams:g.setQueryParams,getMetaData:g.getMetaData,setMetaData:g.setMetaData,getConfig:g.getConfig,setConfig:g.setConfig,startSync:g.startSync,stopSync:g.stopSync,doSync:g.doSync,forceSync:g.forceSync,generateHash:g.generateHash,loadDataSet:g.loadDataSet,clearCache:g.clearCache,setCloudHandler:g.setCloudHandler,doCloudCall:g.doCloudCall,setStorageAdapter:g.setStorageAdapter,setHashMethod:g.setHashMethod}},{"../libs/generated/crypto":8,"../libs/generated/lawnchair":9,"./cloudHandler":16}],19:[function(b,c,d){!function(b){var d="undefined";!function(b,d){"undefined"!=typeof c?c.exports=d():"function"==typeof a&&"object"==typeof a.amd?a(d):this[b]=d()}("log",function(){function a(a){return typeof console===d?l:console[a]===b?console.log!==b?c(console,"log"):l:c(console,a)}function c(a,c){var d=a[c];if(d.bind!==b)return a[c].bind(a);if(Function.prototype.bind===b)return e(d,a);try{return Function.prototype.bind.call(a[c],a)}catch(f){return e(d,a)}}function e(a,b){return function(){Function.prototype.apply.apply(a,[b,arguments])}}function f(a){for(var b=0;b<m.length;b++)k[m[b]]=a(m[b])}function g(){return typeof window!==d&&window.document!==b&&window.document.cookie!==b}function h(){try{return typeof window!==d&&window.localStorage!==b}catch(a){return!1}}function i(a){var b,c=!1;for(var d in k.levels)if(k.levels.hasOwnProperty(d)&&k.levels[d]===a){b=d;break}if(h())try{window.localStorage.loglevel=b}catch(e){c=!0}else c=!0;c&&g()&&(window.document.cookie="loglevel="+b+";")}function j(){var a;if(h()&&(a=window.localStorage.loglevel),a===b&&g()){var c=n.exec(window.document.cookie)||[];a=c[1]}k.levels[a]===b&&(a="WARN"),k.setLevel(k.levels[a])}var k={},l=function(){},m=["trace","debug","info","warn","error"],n=/loglevel=([^;]+)/;return k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.setLevel=function(c){if("number"==typeof c&&c>=0&&c<=k.levels.SILENT){if(i(c),c===k.levels.SILENT)return void f(function(){return l});if(typeof console===d)return f(function(a){return function(){typeof console!==d&&(k.setLevel(c),k[a].apply(k,arguments))}}),"No console available for logging";f(function(b){return c<=k.levels[b.toUpperCase()]?a(b):l})}else{if("string"!=typeof c||k.levels[c.toUpperCase()]===b)throw"log.setLevel() called with invalid level: "+c;k.setLevel(k.levels[c.toUpperCase()])}},k.enableAll=function(){k.setLevel(k.levels.TRACE)},k.disableAll=function(){k.setLevel(k.levels.SILENT)},j(),k})}()},{}],20:[function(b,c,d){(function(b){!function(e){function f(a){throw RangeError(I[a])}function g(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function h(a,b){return g(a.split(H),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=t>=i?y:i>=t+z?z:i-t,!(n>l);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;q>h;++h)p=a[h],128>p&&u.push(L(p));for(d=e=u.length,e&&u.push(E);q>d;){for(j=w,h=0;q>h;++h)p=a[h],p>=b&&j>p&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;q>h;++h)if(p=a[h],b>p&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=g>=n?y:n>=g+z?z:n-g,!(o>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d,s="object"==typeof c&&c&&c.exports==r&&c,t="object"==typeof b&&b;(t.global===t||t.window===t)&&(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^ -~]/,H=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.2.4",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&!r.nodeType)if(s)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],22:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(d){var g=encodeURIComponent(e(d))+c;return f(a[d])?a[d].map(function(a){return g+encodeURIComponent(e(a))}).join(b):g+encodeURIComponent(e(a[d]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],23:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":21,"./encode":22}],24:[function(a,b,c){var d=Object.prototype.toString;b.exports=function(a){switch(d.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==typeof a&&a&&"number"==typeof a.length)try{if("function"==typeof a.callee)return"arguments"}catch(b){if(b instanceof TypeError)return"arguments"}return null===a?"null":void 0===a?"undefined":a&&1===a.nodeType?"element":a===Object(a)?"object":typeof a}},{}],25:[function(b,c,d){(function(){var b=this,e=b._,f={},g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=g.concat,m=h.toString,n=h.hasOwnProperty,o=g.forEach,p=g.map,q=g.reduce,r=g.reduceRight,s=g.filter,t=g.every,u=g.some,v=g.indexOf,w=g.lastIndexOf,x=Array.isArray,y=Object.keys,z=i.bind,A=function(a){return a instanceof A?a:this instanceof A?void(this._wrapped=a):new A(a)};"undefined"!=typeof d?("undefined"!=typeof c&&c.exports&&(d=c.exports=A),d._=A):b._=A,A.VERSION="1.6.0";var B=A.each=A.forEach=function(a,b,c){if(null==a)return a;if(o&&a.forEach===o)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===f)return}else for(var g=A.keys(a),d=0,e=g.length;e>d;d++)if(b.call(c,a[g[d]],g[d],a)===f)return;return a};A.map=A.collect=function(a,b,c){var d=[];return null==a?d:p&&a.map===p?a.map(b,c):(B(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var C="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduce===q)return d&&(b=A.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(B(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(C);return c},A.reduceRight=A.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),r&&a.reduceRight===r)return d&&(b=A.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=A.keys(a);f=g.length}if(B(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(C);return c},A.find=A.detect=function(a,b,c){var d;return D(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},A.filter=A.select=function(a,b,c){var d=[];return null==a?d:s&&a.filter===s?a.filter(b,c):(B(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},A.reject=function(a,b,c){return A.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},A.every=A.all=function(a,b,c){b||(b=A.identity);var d=!0;return null==a?d:t&&a.every===t?a.every(b,c):(B(a,function(a,e,g){return(d=d&&b.call(c,a,e,g))?void 0:f}),!!d)};var D=A.some=A.any=function(a,b,c){b||(b=A.identity);var d=!1;return null==a?d:u&&a.some===u?a.some(b,c):(B(a,function(a,e,g){return d||(d=b.call(c,a,e,g))?f:void 0}),!!d)};A.contains=A.include=function(a,b){return null==a?!1:v&&a.indexOf===v?-1!=a.indexOf(b):D(a,function(a){return a===b})},A.invoke=function(a,b){var c=k.call(arguments,2),d=A.isFunction(b);return A.map(a,function(a){return(d?b:a[b]).apply(a,c)})},A.pluck=function(a,b){return A.map(a,A.property(b))},A.where=function(a,b){return A.filter(a,A.matches(b))},A.findWhere=function(a,b){return A.find(a,A.matches(b))},A.max=function(a,b,c){if(!b&&A.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return B(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},A.min=function(a,b,c){if(!b&&A.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return B(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},A.shuffle=function(a){var b,c=0,d=[];return B(a,function(a){b=A.random(c++),d[c-1]=d[b],d[b]=a}),d},A.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=A.values(a)),a[A.random(a.length-1)]):A.shuffle(a).slice(0,Math.max(0,b))};var E=function(a){return null==a?A.identity:A.isFunction(a)?a:A.property(a)};A.sortBy=function(a,b,c){return b=E(b),A.pluck(A.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var F=function(a){return function(b,c,d){var e={};return c=E(c),B(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};A.groupBy=F(function(a,b,c){A.has(a,b)?a[b].push(c):a[b]=[c]}),A.indexBy=F(function(a,b,c){a[b]=c}),A.countBy=F(function(a,b){A.has(a,b)?a[b]++:a[b]=1}),A.sortedIndex=function(a,b,c,d){c=E(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},A.toArray=function(a){return a?A.isArray(a)?k.call(a):a.length===+a.length?A.map(a,A.identity):A.values(a):[]},A.size=function(a){return null==a?0:a.length===+a.length?a.length:A.keys(a).length},A.first=A.head=A.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:k.call(a,0,b)},A.initial=function(a,b,c){return k.call(a,0,a.length-(null==b||c?1:b))},A.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:k.call(a,Math.max(a.length-b,0))},A.rest=A.tail=A.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},A.compact=function(a){return A.filter(a,A.identity)};var G=function(a,b,c){return b&&A.every(a,A.isArray)?l.apply(c,a):(B(a,function(a){A.isArray(a)||A.isArguments(a)?b?j.apply(c,a):G(a,b,c):c.push(a)}),c)};A.flatten=function(a,b){return G(a,b,[])},A.without=function(a){return A.difference(a,k.call(arguments,1))},A.partition=function(a,b){var c=[],d=[];return B(a,function(a){(b(a)?c:d).push(a)}),[c,d]},A.uniq=A.unique=function(a,b,c,d){A.isFunction(b)&&(d=c,c=b,b=!1);var e=c?A.map(a,c,d):a,f=[],g=[];return B(e,function(c,d){(b?d&&g[g.length-1]===c:A.contains(g,c))||(g.push(c),f.push(a[d]))}),f},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(a){var b=k.call(arguments,1);return A.filter(A.uniq(a),function(a){return A.every(b,function(b){return A.contains(b,a)})})},A.difference=function(a){var b=l.apply(g,k.call(arguments,1));return A.filter(a,function(a){return!A.contains(b,a)})},A.zip=function(){for(var a=A.max(A.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=A.pluck(arguments,""+c);return b},A.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},A.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=A.sortedIndex(a,b),
a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(v&&a.indexOf===v)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},A.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(w&&a.lastIndexOf===w)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},A.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var H=function(){};A.bind=function(a,b){var c,d;if(z&&a.bind===z)return z.apply(a,k.call(arguments,1));if(!A.isFunction(a))throw new TypeError;return c=k.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(k.call(arguments)));H.prototype=a.prototype;var e=new H;H.prototype=null;var f=a.apply(e,c.concat(k.call(arguments)));return Object(f)===f?f:e}},A.partial=function(a){var b=k.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===A&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},A.bindAll=function(a){var b=k.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return B(b,function(b){a[b]=A.bind(a[b],a)}),a},A.memoize=function(a,b){var c={};return b||(b=A.identity),function(){var d=b.apply(this,arguments);return A.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},A.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},A.defer=function(a){return A.delay.apply(A,[a,1].concat(k.call(arguments,1)))},A.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:A.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=A.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},A.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=A.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=A.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},A.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},A.wrap=function(a,b){return A.partial(b,a)},A.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},A.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},A.keys=function(a){if(!A.isObject(a))return[];if(y)return y(a);var b=[];for(var c in a)A.has(a,c)&&b.push(c);return b},A.values=function(a){for(var b=A.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},A.pairs=function(a){for(var b=A.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},A.invert=function(a){for(var b={},c=A.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},A.functions=A.methods=function(a){var b=[];for(var c in a)A.isFunction(a[c])&&b.push(c);return b.sort()},A.extend=function(a){return B(k.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},A.pick=function(a){var b={},c=l.apply(g,k.call(arguments,1));return B(c,function(c){c in a&&(b[c]=a[c])}),b},A.omit=function(a){var b={},c=l.apply(g,k.call(arguments,1));for(var d in a)A.contains(c,d)||(b[d]=a[d]);return b},A.defaults=function(a){return B(k.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},A.clone=function(a){return A.isObject(a)?A.isArray(a)?a.slice():A.extend({},a):a},A.tap=function(a,b){return b(a),a};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof A&&(a=a._wrapped),b instanceof A&&(b=b._wrapped);var e=m.call(a);if(e!=m.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(A.isFunction(g)&&g instanceof g&&A.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=I(a[i],b[i],c,d)););}else{for(var k in a)if(A.has(a,k)&&(i++,!(j=A.has(b,k)&&I(a[k],b[k],c,d))))break;if(j){for(k in b)if(A.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};A.isEqual=function(a,b){return I(a,b,[],[])},A.isEmpty=function(a){if(null==a)return!0;if(A.isArray(a)||A.isString(a))return 0===a.length;for(var b in a)if(A.has(a,b))return!1;return!0},A.isElement=function(a){return!(!a||1!==a.nodeType)},A.isArray=x||function(a){return"[object Array]"==m.call(a)},A.isObject=function(a){return a===Object(a)},B(["Arguments","Function","String","Number","Date","RegExp"],function(a){A["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}}),A.isArguments(arguments)||(A.isArguments=function(a){return!(!a||!A.has(a,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(a){return"function"==typeof a}),A.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},A.isNaN=function(a){return A.isNumber(a)&&a!=+a},A.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==m.call(a)},A.isNull=function(a){return null===a},A.isUndefined=function(a){return void 0===a},A.has=function(a,b){return n.call(a,b)},A.noConflict=function(){return b._=e,this},A.identity=function(a){return a},A.constant=function(a){return function(){return a}},A.property=function(a){return function(b){return b[a]}},A.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},A.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},A.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},A.now=Date.now||function(){return(new Date).getTime()};var J={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};J.unescape=A.invert(J.escape);var K={escape:new RegExp("["+A.keys(J.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(J.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(a){A[a]=function(b){return null==b?"":(""+b).replace(K[a],function(b){return J[a][b]})}}),A.result=function(a,b){if(null==a)return void 0;var c=a[b];return A.isFunction(c)?c.call(a):c},A.mixin=function(a){B(A.functions(a),function(b){var c=A[b]=a[b];A.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P.call(this,c.apply(A,a))}})};var L=0;A.uniqueId=function(a){var b=++L+"";return a?a+b:b},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(a,b,c){var d;c=A.defaults({},c,A.templateSettings);var e=new RegExp([(c.escape||M).source,(c.interpolate||M).source,(c.evaluate||M).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(O,function(a){return"\\"+N[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,A);var i=function(a){return d.call(this,a,A)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},A.chain=function(a){return A(a).chain()};var P=function(a){return this._chain?A(a).chain():a};A.mixin(A),B(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];A.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],P.call(this,c)}}),B(["concat","join","slice"],function(a){var b=g[a];A.prototype[a]=function(){return P.call(this,b.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof a&&a.amd&&a("underscore",[],function(){return A})}).call(this)},{}],26:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:20,querystring:23}],27:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],28:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],29:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":28,FWaASH:5,inherits:27}],30:[function(a,b,c){var d=a("./modules/constants"),e=a("./modules/events"),f=a("./modules/logger"),g=a("./modules/ajax"),e=a("./modules/events"),h=a("./modules/waitForCloud"),i=a("./modules/api_act"),j=a("./modules/api_auth"),k=a("./modules/api_sec"),l=a("./modules/api_hash"),m=a("./modules/api_mbaas"),n=a("./modules/api_cloud"),o=a("./modules/api_push"),p=a("./modules/fhparams"),q=a("./modules/appProps"),r=a("./modules/device"),s=a("./modules/sync_cloud_handler"),t=function(a,b){e.addListener(a,b),a===d.INIT_EVENT&&(h.isReady()?b(null,{host:h.getCloudHostUrl()}):h.getInitError()&&b(h.getInitError()))},u=function(a,b){a===d.INIT_EVENT&&h.isReady()?b(null,{host:h.getCloudHostUrl()}):a===d.INIT_EVENT&&h.getInitError()?b(h.getInitError()):e.once(a,b)},v=function(a,b,c){f.warn("$fh.init will be deprecated soon"),h.ready(function(a,d){if(a){if("function"==typeof c)return c(a)}else"function"==typeof b&&b(d.host)})},w=window.$fh||{};w.init=v,w.act=i,w.auth=j,w.cloud=n,w.sec=k,w.hash=l,w.push=o,w.ajax=w.__ajax=g,w.mbaas=m,w.sync=a("fh-sync-js"),w.sync.setCloudHandler(s),w._getDeviceId=r.getDeviceId,w.fh_timeout=6e4,w.getCloudURL=function(){return h.getCloudHostUrl()},w.getFHParams=function(){return p.buildFHParams()},w.getFHHeaders=function(){return p.getFHHeaders()},w.addListener=t,w.on=t,w.once=u;for(var x=["removeListener","removeAllListeners","setMaxListeners","listeners","emit"],y=0;y<x.length;y++)w[x[y]]=e[x[y]];w.on(d.INIT_EVENT,function(a,b){a?(w.cloud_props={},w.app_props={}):(w.cloud_props={hosts:{url:b.host}},w.app_props=q.getAppProps())}),w.on(d.INTERNAL_CONFIG_LOADED_EVENT,function(a,b){a?w.app_props={}:w.app_props=q.getAppProps(),e.emit(d.CONFIG_LOADED_EVENT,null)}),w.reset=h.reset,window.$fh=w,b.exports=w},{"./modules/ajax":32,"./modules/api_act":33,"./modules/api_auth":34,"./modules/api_cloud":35,"./modules/api_hash":36,"./modules/api_mbaas":37,"./modules/api_push":38,"./modules/api_sec":39,"./modules/appProps":40,"./modules/constants":42,"./modules/device":45,"./modules/events":46,"./modules/fhparams":47,"./modules/logger":53,"./modules/sync_cloud_handler":61,"./modules/waitForCloud":63,"fh-sync-js":17}],31:[function(a,b,c){var d=a("url"),e=function(a){this.xdr=a,this.isWrapper=!0,this.readyState=0,this.onreadystatechange=null,this.status=0,this.statusText="",this.responseText="",this.headers={};var b=this;this.xdr.onload=function(){b.readyState=4,b.status=200,b.statusText="",b.responseText=b.xdr.responseText,b.onreadystatechange&&b.onreadystatechange()},this.xdr.onerror=function(){b.onerror&&b.onerror(),b.readyState=4,b.status=0,b.statusText="",b.onreadystatechange&&b.onreadystatechange()},this.xdr.ontimeout=function(){b.readyState=4,b.status=408,b.statusText="timeout",b.onreadystatechange&&b.onreadystatechange()}};e.prototype.open=function(a,b,c){var e=d.parse(b,!0);e.query=e.query||{},e.query.fh_headers=this.headers,this.xdr.open(a,d.format(e))},e.prototype.send=function(a){this.xdr.send(a)},e.prototype.abort=function(){this.xdr.abort()},e.prototype.setRequestHeader=function(a,b){this.headers[a]=b},e.prototype.getResponseHeader=function(a){},b.exports=e},{url:26}],32:[function(a,b,c){function d(a,b,c){return v.emit(b,c),!0}function e(a,b,c,e){return a.global?d(b||D,c,e):void 0}function f(a){a.global&&0===J.active++&&e(a,null,"ajaxStart")}function g(a){a.global&&!--J.active&&e(a,null,"ajaxStop")}function h(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1?!1:void e(b,c,"ajaxSend",[a,b])}function i(a,b,c){var d=c.context,f="success";c.success.call(d,a,f,b),e(c,d,"ajaxSuccess",[b,c,a]),k(f,b,c)}function j(a,b,c,d){var f=d.context;d.error.call(f,c,b,a),e(d,f,"ajaxError",[c,d,a]),k(b,c,d)}function k(a,b,c){var d=c.context;c.complete.call(d,b,a),e(c,d,"ajaxComplete",[b,c]),g(c)}function l(){}function m(){var a=!1;return navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0&&(a=!0),a}function n(a){var b=null;if(window.XMLHttpRequest&&(b=new XMLHttpRequest),m()&&a===!0&&"undefined"!=typeof window.XDomainRequest&&"undefined"==typeof window.cordova&&(b=new w(new XDomainRequest)),"undefined"!=typeof Titanium){var c={};J.settings&&J.settings.timeout&&(c.timeout=J.settings.timeout),b=Titanium.Network.createHTTPClient(c)}return b}function o(a){return a&&(a==H?"html":a==G?"json":E.test(a)?"script":F.test(a)&&"xml")||"text"}function p(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function q(a){"object"===u(a.data)&&("function"==typeof a.data.append?a.formdata=!0:a.data=s(a.data)),!a.data||a.type&&"GET"!=a.type.toUpperCase()||(a.url=p(a.url,a.data))}function r(a,b,c,d){var e="array"===u(b);for(var f in b){var g=b[f];d&&(f=c?d:d+"["+(e?"":f)+"]"),!d&&e?a.add(g.name,g.value):(c?"array"===u(g):"object"===u(g))?r(a,g,c,f):a.add(f,g)}}function s(a,b){var c=[];return c.add=function(a,b){this.push(K(a)+"="+K(b))},r(c,a,b),c.join("&").replace("%20","+")}function t(a){var b=Array.prototype.slice;return b.call(arguments,1).forEach(function(b){for(A in b)void 0!==b[A]&&(a[A]=b[A])}),a}var u,v=a("./events"),w=a("./XDomainRequestWrapper"),x=a("./logger");try{u=a("type-of")}catch(y){var z=a;u=z("type")}var A,B,C=0,D=window.document,E=/^(?:text|application)\/javascript/i,F=/^(?:text|application)\/xml/i,G="application/json",H="text/html",I=/^\s*$/,J=b.exports=function(b){var c=t({},b||{});window&&window.$fh&&"number"==typeof window.$fh.fh_timeout&&(J.settings.timeout=window.$fh.fh_timeout);for(A in J.settings)void 0===c[A]&&(c[A]=J.settings[A]);f(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&(RegExp.$1!=window.location.protocol||RegExp.$2!=window.location.host));var d=c.dataType,e=/=\?/.test(c.url);if("jsonp"==d||e)return e||(c.url=p(c.url,(c.jsonp?c.jsonp:"_callback")+"=?")),J.JSONP(c);c.url||(c.url=window.location.toString()),q(c);var g=c.accepts[d],k={},m=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,n=c.xhr(c.crossDomain),r=null;c.crossDomain||(k["X-Requested-With"]="XMLHttpRequest"),g&&(k.Accept=g,g.indexOf(",")>-1&&(g=g.split(",",2)[0]),n.overrideMimeType&&n.overrideMimeType(g)),(c.contentType||c.data&&!c.formdata&&"GET"!=c.type.toUpperCase())&&(k["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=t(k,c.headers||{}),"undefined"!=typeof Titanium&&(n.onerror=function(){r&&(clearTimeout(r),j(null,"error",n,c))}),n.onreadystatechange=function(){if(4==n.readyState){clearTimeout(r),r=void 0;var b,e=!1;if(c.tryJSONP&&0===n.status&&c.crossDomain&&!n.isTimeout&&"file:"!=m)return x.debug("retry ajax call with jsonp"),c.type="GET",c.dataType="jsonp",c.data?c.data="_jsonpdata="+JSON.stringify(a("./fhparams").addFHParams(JSON.parse(c.data))):c.data="_jsonpdata="+c.data,J(c);if(n.status>=200&&n.status<300||304==n.status||0==n.status&&"file:"==m){d=d||o(n.getResponseHeader("content-type")),b=n.responseText,x.debug("ajax response :: status = "+n.status+" :: body = "+b);try{"script"==d?(1,eval)(b):"xml"==d?b=n.responseXML:"json"==d&&(b=I.test(b)?null:JSON.parse(b))}catch(f){e=f}e?(x.debug("ajax error",e),j(e,"parsererror",n,c)):i(b,n,c)}else j(null,"error",n,c)}};var s="async"in c?c.async:!0;x.debug("ajax call settings",c),n.open(c.type,c.url,s);for(B in c.headers)n.setRequestHeader(B,c.headers[B]);return h(n,c)===!1?(x.debug("ajax call is aborted due to ajaxBeforeSend"),n.abort(),!1):(c.timeout>0&&(r=setTimeout(function(){x.debug("ajax call timed out"),n.onreadystatechange=l,n.abort(),n.isTimeout=!0,j(null,"timeout",n,c)},c.timeout)),n.send(c.data?c.data:null),n)};J.active=0,J.JSONP=function(a){if(!("type"in a))return J(a);var b,c="jsonp"+ ++C,d=D.createElement("script"),e=function(){c in window&&(window[c]=l),k("abort",f,a)},f={abort:e},g=D.getElementsByTagName("head")[0]||D.documentElement;return a.error&&(d.onerror=function(){f.abort(),a.error()}),window[c]=function(d){clearTimeout(b),b=void 0,delete window[c],i(d,f,a)},q(a),d.src=a.url.replace(/=\?/,"="+c),g.insertBefore(d,g.firstChild),a.timeout>0&&(b=setTimeout(function(){f.abort(),k("timeout",f,a)},a.timeout)),f},J.settings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:n,accepts:{script:"text/javascript, application/javascript",json:G,xml:"application/xml, text/xml",html:H,text:"text/plain"},crossDomain:!1},J.get=function(a,b){return J({url:a,success:b})},J.post=function(a,b,c,d){return"function"===u(b)&&(d=d||c,c=b,b=null),J({type:"POST",url:a,data:b,success:c,dataType:d})},J.getJSON=function(a,b){return J({url:a,success:b,dataType:"json"})};var K=encodeURIComponent},{"./XDomainRequestWrapper":31,"./events":46,"./fhparams":47,"./logger":53,"type-of":24}],33:[function(a,b,c){function d(a,b,c){var d=f.getCloudHost(),e=d.getActUrl(a.act),l=a.req||{},m=g.getFHHeaders();return a.headers&&(m=k.extend(m,a.headers)),h({url:e,tryJSONP:!0,type:"POST",dataType:"json",data:JSON.stringify(l),headers:m,contentType:"application/json",timeout:a.timeout||j.timeout,success:b,error:function(a,b,d){return i(c,a,b,d)}})}var e=a("./logger"),f=a("./waitForCloud"),g=a("./fhparams"),h=a("./ajax"),i=a("./handleError"),j=a("./appProps"),k=a("underscore");b.exports=function(a,b,c){return e.debug("act is called"),c||(c=function(a,b){e.debug(a+":"+JSON.stringify(b))}),a.act?void f.ready(function(f,g){return e.debug("Calling fhact now"),f?c(f.message,f):void d(a,b,c)}):c("act_no_action",{})}},{"./ajax":32,"./appProps":40,"./fhparams":47,"./handleError":48,"./logger":53,"./waitForCloud":63,underscore:25}],34:[function(a,b,c){function d(a,b,c,d,i){var j=m.getAppProps(),l=j.host+k.boxprefix+"admin/authpolicy/"+a;j.local&&(l=f.getCloudHostUrl()+k.boxprefix+"admin/authpolicy/"+a),
h({url:l,type:"POST",tryJSONP:!0,data:JSON.stringify(b),dataType:"json",contentType:"application/json",timeout:c.timeout||j.timeout,headers:g.getFHHeaders(),success:function(a){return d?d(a):void 0},error:function(b,c,d){e.error("got error when calling "+a,b.responseText||b,d),i&&i(b,c,d)}})}var e=a("./logger"),f=a("./waitForCloud"),g=a("./fhparams"),h=a("./ajax"),i=a("./handleError"),j=a("./device"),k=a("./constants"),l=a("./checkAuth"),m=a("./appProps"),n=a("./data"),o=function(a,b,c){return c||(c=function(a,b){e.debug(a+":"+JSON.stringify(b))}),a.policyId?a.clientToken?void f.ready(function(e,h){if(e)return c(e.message,e);var k={};k.policyId=a.policyId,k.clientToken=a.clientToken;var l=f.getCloudHost();l.getEnv()&&(k.environment=l.getEnv()),a.endRedirectUrl&&(k.endRedirectUrl=a.endRedirectUrl,a.authCallback&&(k.endRedirectUrl+=(/\?/.test(k.endRedirectUrl)?"&":"?")+"_fhAuthCallback="+a.authCallback)),k.params={},a.params&&(k.params=a.params);var m=a.endRedirectUrl||"status=complete";k.device=j.getDeviceId(),k=g.addFHParams(k),d("auth",k,a,function(a){o.authenticateHandler(m,a,b,c)},function(a,b,d){i(c,a,b,d)})}):c("auth_no_clientToken",{}):c("auth_no_policyId",{})};o.hasSession=function(a){n.sessionManager.exists(a)},o.clearSession=function(a){n.sessionManager.read(function(b,c){return b?a(b):(c&&d("revokesession",c,{}),n.sessionManager.remove(a),void g.setAuthSessionToken(void 0))})},o.authenticateHandler=l.handleAuthResponse,o.verify=function(a){n.sessionManager.read(function(b,c){return b?a(b):c?void d("verifysession",c,{},function(b){return a(null,b.isValid)},function(b,c,d){return a("network_error")}):a("no_session")})},b.exports=o},{"./ajax":32,"./appProps":40,"./checkAuth":41,"./constants":42,"./data":44,"./device":45,"./fhparams":47,"./handleError":48,"./logger":53,"./waitForCloud":63}],35:[function(a,b,c){function d(a,b,c){var d,e=f.getCloudHost(),l=e.getCloudUrl(a.path),m=a.data||{},n=a.method||"POST";d=-1!==["POST","PUT","PATCH","DELETE"].indexOf(n.toUpperCase())?JSON.stringify(m):m;var o=g.getFHHeaders();return a.headers&&(o=k.extend(o,a.headers)),h({url:l,type:n,dataType:a.dataType||"json",data:d,contentType:a.contentType||"application/json",timeout:a.timeout||j.timeout,headers:o,success:b,error:function(a,b,d){return i(c,a,b,d)}})}var e=a("./logger"),f=a("./waitForCloud"),g=a("./fhparams"),h=a("./ajax"),i=a("./handleError"),j=a("./appProps"),k=a("underscore");b.exports=function(a,b,c){e.debug("cloud is called"),c||(c=function(a,b){e.debug(a+":"+JSON.stringify(b))}),f.ready(function(f,g){return e.debug("Calling fhact now"),f?c(f.message,f):void d(a,b,c)})}},{"./ajax":32,"./appProps":40,"./fhparams":47,"./handleError":48,"./logger":53,"./waitForCloud":63,underscore:25}],36:[function(a,b,c){var d=a("./security/hash");b.exports=function(a,b,c){var e={};"undefined"==typeof a.algorithm&&(a.algorithm="MD5"),e.act="hash",e.params=a,d(e,b,c)}},{"./security/hash":59}],37:[function(a,b,c){var d=a("./logger"),e=a("./waitForCloud"),f=a("./fhparams"),g=a("./ajax"),h=a("./handleError"),i=(a("./constants"),a("./appProps"));b.exports=function(a,b,c){d.debug("mbaas is called."),c||(c=function(a,b){console.debug(a+":"+JSON.stringify(b))});var j=a.service,k=a.params;e.ready(function(l,m){if(d.debug("Calling mbaas now"),l)return c(l.message,l);var n=e.getCloudHost(),o=n.getMBAASUrl(j);return k=f.addFHParams(k),g({url:o,tryJSONP:!0,type:"POST",dataType:"json",data:JSON.stringify(k),headers:f.getFHHeaders(),contentType:"application/json",timeout:a.timeout||i.timeout,success:b,error:function(a,b,d){return h(c,a,b,d)}})})}},{"./ajax":32,"./appProps":40,"./constants":42,"./fhparams":47,"./handleError":48,"./logger":53,"./waitForCloud":63}],38:[function(a,b,c){var d=a("./logger"),e=a("./appProps"),f=a("./waitForCloud");b.exports=function(a,b,c,g){c||(c=function(a,b){d.debug(a+":"+JSON.stringify(b))}),f.ready(function(f,h){if(d.debug("push is called"),f)return c(f.message,f);if(window.push){var i=e.getAppProps();if(i.pushServerURL=i.host+"/api/v2/ag-push",g)for(var j in g)i[j]=g[j];window.push.register(a,b,c,i)}else c("push plugin not installed")})}},{"./appProps":40,"./logger":53,"./waitForCloud":63}],39:[function(a,b,c){var d=a("./security/aes-keygen"),e=a("./security/aes-node"),f=a("./security/rsa-node"),g=a("./security/hash");b.exports=function(a,b,c){return a.act?a.params?a.params.algorithm?(a.params.algorithm=a.params.algorithm.toLowerCase(),"hash"===a.act?g(a,b,c):"encrypt"===a.act?"aes"===a.params.algorithm?e.encrypt(a,b,c):"rsa"===a.params.algorithm?f.encrypt(a,b,c):c("encrypt_bad_algorithm:"+a.params.algorithm,{},a):"decrypt"===a.act?"aes"===a.params.algorithm?e.decrypt(a,b,c):c("decrypt_bad_algorithm:"+a.params.algorithm,{},a):"keygen"===a.act?"aes"===a.params.algorithm?d(a,b,c):c("keygen_bad_algorithm:"+a.params.algorithm,{},a):void 0):void c("no_params_algorithm",{},a):void c("no_params",{},a):void c("bad_act",{},a)}},{"./security/aes-keygen":57,"./security/aes-node":58,"./security/hash":59,"./security/rsa-node":60}],40:[function(a,b,c){var d=a("./constants"),e=a("./ajax"),f=a("./logger"),g=a("./queryMap"),h=a("underscore"),i=null,j=function(a){function b(b){h.extend(i,b,k),"undefined"!=typeof j.url&&(i.host=j.url),i.local=!!(k.host||j.url||b.local&&b.host),a(null,i)}var c=document.location.href,j=g(c.replace(/#.*?$/g,"")),k={};for(var l in j)j.hasOwnProperty(l)&&0===l.indexOf("fh_")&&(k[l.substr(3)]=decodeURI(j[l]));i={appid:"000000000000000000000000",appkey:"0000000000000000000000000000000000000000",projectid:"000000000000000000000000",connectiontag:"0.0.1"};var m=j.fhconfig||d.config_js;e({url:m,dataType:"json",success:function(c){return f.debug("fhconfig = "+JSON.stringify(c)),null==c?window.fh_app_props?b(window.fh_app_props):a(new Error("app_config_missing")):void b(c)},error:function(c,e,g){return window.fh_app_props?b(window.fh_app_props):(f.error(d.config_js+" Not Found"),void a(new Error("app_config_missing")))}})},k=function(a){i=a},l=function(){return i};b.exports={load:j,getAppProps:l,setAppProps:k}},{"./ajax":32,"./constants":42,"./logger":53,"./queryMap":55,underscore:25}],41:[function(a,b,c){var d=a("./logger"),e=a("./queryMap"),f=a("./fhparams"),g=a("./data"),h=function(a){if(/\_fhAuthCallback/.test(a)){var b=e(a);if(b){var c=b._fhAuthCallback;if(c)if(b.result&&"success"===b.result){var d={sessionToken:b.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(b.authResponse)))};f.setAuthSessionToken(b.fh_auth_session),g.sessionManager.save(b.fh_auth_session),window[c](null,d)}else window[c]({message:b.message})}}},i=function(a,b,c,h){if(b.status&&"ok"===b.status){var i=function(a){return a.sessionToken?(f.setAuthSessionToken(a.sessionToken),void g.sessionManager.save(a.sessionToken,function(){return c(a)})):c(a)};if(b.url){var j=null,k=function(b){if(b.indexOf(a)>-1){j&&j.close();var c=e(b);if(c)if(c.result&&"success"===c.result){var d={sessionToken:c.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(c.authResponse)))};i(d)}else h&&h("auth_failed",{message:c.message});else h&&h("auth_failed",{message:c.message})}};if(window.PhoneGap||window.cordova)if(window.plugins&&window.plugins.childBrowser)"function"==typeof window.plugins.childBrowser.showWebPage&&(window.plugins.childBrowser.onLocationChange=k,window.plugins.childBrowser.showWebPage(b.url),j=window.plugins.childBrowser);else try{j=window.open(b.url,"_blank","location=yes"),j.addEventListener("loadstart",function(a){k(a.url)})}catch(l){d.info("InAppBrowser plugin is not intalled."),i(b)}else document.location.href=b.url}else i(b)}else h&&h("auth_failed",b)};window.addEventListener?window.addEventListener("load",function(){h(window.location.href)},!1):window.attachEvent&&window.attachEvent("onload",function(){h(window.location.href)}),b.exports={handleAuthResponse:i}},{"./data":44,"./fhparams":47,"./logger":53,"./queryMap":55}],42:[function(a,b,c){b.exports={boxprefix:"/box/srv/1.1/",sdk_version:"2.19.0",config_js:"fhconfig.json",INIT_EVENT:"fhinit",INTERNAL_CONFIG_LOADED_EVENT:"internalfhconfigloaded",CONFIG_LOADED_EVENT:"fhconfigloaded",SESSION_TOKEN_STORAGE_NAME:"fh_session_token",SESSION_TOKEN_KEY_NAME:"sessionToken"}},{}],43:[function(a,b,c){b.exports={readCookieValue:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},createCookie:function(a,b){var c=new Date;c.setTime(c.getTime()+31536e8);var d="; expires="+c.toGMTString();document.cookie=a+"="+b+d+"; path = /"}}},{}],44:[function(a,b,c){var d=a("../../libs/generated/lawnchair"),e=a("./lawnchair-ext"),f=a("./logger"),g=a("./constants"),h={DEFAULT_ADAPTERS:["dom","webkit-sqlite","window-name","titanium"],getStorage:function(a,b,c){var e=h.DEFAULT_ADAPTERS,g=c||function(){};b&&b.length>0&&(e="string"==typeof b?[b]:b);var i={name:a,adapter:e,fail:function(a,b){var c="read/save from/to local storage failed  msg:"+a+" err:"+b;f.error(c,b),g(c,{})}},j=d(i,function(){});return j},addFileStorageAdapter:function(a,b){d.adapter("localFileStorage",e.fileStorageAdapter(a,b))},sessionManager:{read:function(a){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).get(g.SESSION_TOKEN_KEY_NAME,function(b){return a?a(null,b):void 0})},exists:function(a){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).exists(g.SESSION_TOKEN_KEY_NAME,function(b){return a?a(null,b):void 0})},remove:function(a){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).remove(g.SESSION_TOKEN_KEY_NAME,function(){return a?a():void 0})},save:function(a,b){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).save({key:g.SESSION_TOKEN_KEY_NAME,sessionToken:a},function(a){return b?b():void 0})}}};b.exports=h},{"../../libs/generated/lawnchair":2,"./constants":42,"./lawnchair-ext":51,"./logger":53}],45:[function(a,b,c){var d=a("./cookies"),e=a("./uuid"),f=a("./logger");b.exports={getDeviceId:function(){if("undefined"!=typeof window.fhdevice&&"undefined"!=typeof window.fhdevice.uuid)return window.fhdevice.uuid;if("undefined"!=typeof window.device&&"undefined"!=typeof window.device.uuid)return window.device.uuid;if("undefined"!=typeof navigator.device&&"undefined"!=typeof navigator.device.uuid)return navigator.device.uuid;var a="mock_uuid",b=d.readCookieValue(a);return b||(b=e.createUUID(),d.createCookie(a,b)),b},getCuidMap:function(){return"undefined"!=typeof window.fhdevice&&"undefined"!=typeof window.fhdevice.cuidMap?window.fhdevice.cuidMap:"undefined"!=typeof window.device&&"undefined"!=typeof window.device.cuidMap?window.device.cuidMap:"undefined"!=typeof navigator.device&&"undefined"!=typeof navigator.device.cuidMap?navigator.device.cuidMap:null},getDestination:function(){var b=null,c=a("./platformsMap"),d=navigator.userAgent,e=document.location.search.split("fh_destination_code=");return e.length>1?b=e[1]:"undefined"!=typeof window.fh_destination_code?b=window.fh_destination_code:c.forEach(function(a){a.test.forEach(function(c){d.indexOf(c)>-1&&(b=a.destination)})}),null==b&&(b="web"),f.debug("destination = "+b),b}}},{"./cookies":43,"./logger":53,"./platformsMap":54,"./uuid":62}],46:[function(a,b,c){var d=a("events").EventEmitter,e=new d;e.setMaxListeners(0),b.exports=e},{events:7}],47:[function(a,b,c){var d=a("./device"),e=a("./sdkversion"),f=a("./appProps"),g=a("./logger"),h=null,i=null,j=function(){if(h)return h;var a={};a.cuid=d.getDeviceId(),a.cuidMap=d.getCuidMap(),a.destination=d.getDestination(),(window.device||navigator.device)&&(a.device=window.device||navigator.device),"undefined"!=typeof window.fh_app_version&&(a.app_version=fh_app_version),"undefined"!=typeof window.fh_project_version&&(a.project_version=fh_project_version),"undefined"!=typeof window.fh_project_app_version&&(a.project_app_version=fh_project_app_version),a.sdk_version=e(),i&&(a.sessionToken=i);var b=f.getAppProps();return b&&(a.appid=b.appid,a.appkey=b.appkey,a.projectid=b.projectid,a.analyticsTag=b.analyticsTag,a.connectiontag=b.connectiontag,b.init&&(a.init="string"==typeof b.init?JSON.parse(b.init):b.init)),h=a,g.debug("fhparams = ",h),a},k=function(a){var b=a||{};return b.__fh=j(),b},l=function(){var a={},b=j();for(var c in b)b.hasOwnProperty(c)&&(a["X-FH-"+c]=b[c]);return a},m=function(a){i=a,h=null};b.exports={buildFHParams:j,addFHParams:k,setAuthSessionToken:m,getFHHeaders:l}},{"./appProps":40,"./device":45,"./logger":53,"./sdkversion":56}],48:[function(a,b,c){b.exports=function(a,b,c,d){var e,f=0;if(b)try{f=b.status;var g=JSON.parse(b.responseText);e=g.error||g.msg||g,e instanceof Array&&(e=e.join("\n"))}catch(h){e=b.responseText}a&&a(e,{status:f,message:c,error:d})}},{}],49:[function(a,b,c){function d(a){var b=a;return"/"===b.charAt(b.length-1)&&(b=b.substring(0,b.length-1)),b}function e(a){var b=a;return b.length>1&&"/"===b.charAt(0)&&(b=b.substring(1,b.length)),b}function f(a){this.cloud_props=a,this.cloud_host=void 0,this.app_env=null,this.isLegacy=!1}var g=a("./constants"),h=a("./appProps");f.prototype.getHost=function(a){if(this.cloud_host)return this.cloud_host;var b,c;if(this.cloud_props&&this.cloud_props.hosts&&(b=this.cloud_props.hosts.url,"undefined"==typeof b)){var e=this.cloud_props.hosts.releaseCloudUrl;c=this.cloud_props.hosts.releaseCloudType,"undefined"!=typeof a&&a.indexOf("dev")>-1&&(e=this.cloud_props.hosts.debugCloudUrl,c=this.cloud_props.hosts.debugCloudType),b=e}return b=d(b),this.cloud_host=b,"fh"===c&&(this.isLegacy=!0),b},f.prototype.getActUrl=function(a){var b=h.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(b.mode),this.isLegacy?this.cloud_host+g.boxprefix+"act/"+this.cloud_props.domain+"/"+b.appid+"/"+a+"/"+b.appid:this.cloud_host+"/cloud/"+a},f.prototype.getMBAASUrl=function(a){var b=h.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(b.mode),this.cloud_host+"/mbaas/"+a},f.prototype.getCloudUrl=function(a){var b=h.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(b.mode),this.cloud_host+"/"+e(a)},f.prototype.getEnv=function(){return this.app_env?this.app_env:(this.cloud_props&&this.cloud_props.hosts&&(this.app_env=this.cloud_props.hosts.environment),this.app_env)},b.exports=f},{"./appProps":40,"./constants":42}],50:[function(a,b,c){var d=(a("./loadScript"),a("./constants")),e=a("./fhparams"),f=a("./ajax"),g=a("./handleError"),h=a("./logger"),i=a("./security/hash"),j=a("./appProps"),k=a("./constants"),l=a("./events"),m=a("./data"),n=function(a){j.load(function(b,c){return b?a(b):(l.emit(k.INTERNAL_CONFIG_LOADED_EVENT,null,c),o(c,a))})},o=function(a,b){if(a.loglevel&&h.setLevel(a.loglevel),a.local){var c={domain:"local",firstTime:!1,hosts:{debugCloudType:"node",debugCloudUrl:a.host,releaseCloudType:"node",releaseCloudUrl:a.host,type:"cloud_nodejs",url:a.host},init:{trackId:"000000000000000000000000"},status:"ok"};return b(null,{cloud:c})}m.addFileStorageAdapter(a,i);var j=function(a,c,d,i){var j=e.buildFHParams();f({url:a,type:"POST",tryJSONP:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(j),timeout:c.timeout,success:function(a){i&&i.save({key:"fh_init",value:a},function(){}),b&&b(null,{cloud:a})},error:function(a,c,e){var f="unknown";a&&(f=a.status+" - "+a.responseText),h.error("App init returned error : "+f),d&&400!==a.status?(h.info("Using cached host: "+JSON.stringify(d)),b&&b(null,{cloud:d})):(400===a.status?h.error(a.responseText):h.error("No cached host found. Init failed."),g(function(a,c){b&&b({error:c,message:a})},a,c,e))}})},k=null,l=a.host+d.boxprefix+"app/init";try{k=m.getStorage("fh_init_storage","undefined"!=typeof Titanium?["titanium"]:null),k.get("fh_init",function(b){var c=null;b&&null!==b.value&&"undefined"!=typeof b.value&&""!==b&&(b="string"==typeof b?JSON.parse(b):b,b.value="string"==typeof b.value?JSON.parse(b.value):b.value,b.value.init?a.init=b.value.init:a.init="string"==typeof b.value?JSON.parse(b.value):b.value,b.value.hosts&&(c=b.value)),j(l,a,c,k)})}catch(n){j(l,a,null,null)}};b.exports={init:n,loadCloudProps:o}},{"./ajax":32,"./appProps":40,"./constants":42,"./data":44,"./events":46,"./fhparams":47,"./handleError":48,"./loadScript":52,"./logger":53,"./security/hash":59}],51:[function(a,b,c){var d=function(a,b){function c(a){console&&console.log(a)}function d(d,e){d=a.appid+d,b({algorithm:"MD5",text:d},function(a){var b=a.hashvalue+".txt";return"undefined"==typeof navigator.externalstorage?(c("filenameForKey key="+d+" , Filename: "+b),e(b)):void navigator.externalstorage.enable(function(a){var c=b;return a.path&&(c=a.path,c.match(/\/$/)||(c+="/"),c+=b),b=c,e(b)},function(a){return e(b)})})}var e=function(a,b){if(!console)throw a;console.log("error in file system adapter !",a,b)};return{valid:function(){return!!window.requestFileSystem},init:function(a,b){a&&"function"==typeof a.fail&&(e=a.fail),b&&this.fn(this.name,b).call(this,this)},keys:function(a){throw"Currently not supported"},save:function(a,b){var c=a.key,f=a.val||a.value;d(c,function(a){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(d){d.root.getFile(a,{create:!0},function(a){a.createWriter(function(a){a.onwrite=function(){return b({key:c,val:f})},a.write(f)},function(){e("[save] Failed to create file writer")})},function(){e("[save] Failed to getFile")})},function(){e("[save] Failed to requestFileSystem")})})},batch:function(a,b){throw"Currently not supported"},get:function(a,b){d(a,function(c){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(d){d.root.getFile(c,{},function(c){c.file(function(c){var d=new FileReader;d.onloadend=function(c){var d=c.target.result;try{d=decodeURIComponent(d)}catch(e){}return b({key:a,val:d})},d.readAsText(c)},function(){e("[load] Failed to getFile")})},function(){b({key:a,val:null})})},function(){e("[load] Failed to get fileSystem")})})},exists:function(a,b){d(a,function(a){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(c){c.root.getFile(a,{},function(a){return b(!0)},function(a){return b(!1)})})})},all:function(a){throw"Currently not supported"},remove:function(a,b){d(a,function(c){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(d){d.root.getFile(c,{},function(c){c.remove(function(){return b({key:a,val:null})},function(){e("[remove] Failed to remove file")})},function(){e("[remove] Failed to getFile")})},function(){e("[remove] Failed to get fileSystem")})})},nuke:function(a){throw"Currently not supported"}}};b.exports={fileStorageAdapter:d}},{}],52:[function(a,b,c){b.exports=function(a,b){var c,d=document.head||document.getElementsByTagName("head")[0]||document.documentElement;c=document.createElement("script"),c.async="async",c.src=a,c.type="text/javascript",c.onload=c.onreadystatechange=function(){(!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=void 0,b&&"function"==typeof b&&b())},d.insertBefore(c,d.firstChild)}},{}],53:[function(a,b,c){var d=(a("console"),a("loglevel"));d.setLevel("info"),b.exports=d},{console:6,loglevel:19}],54:[function(a,b,c){b.exports=[{destination:"ipad",test:["iPad"]},{destination:"iphone",test:["iPhone"]},{destination:"android",test:["Android"]},{destination:"blackberry",test:["BlackBerry","BB10","RIM Tablet OS"]},{destination:"windowsphone",test:["Windows Phone 8"]},{destination:"windowsphone7",test:["Windows Phone OS 7"]}]},{}],55:[function(a,b,c){b.exports=function(a){var b={},c=a.split("?");if(2===c.length){var d=c[1],e=d.split("&");b={};for(var f=0;f<e.length;f++){var g=e[f],h=g.split("=");b[h[0]]=h[1]}}return b}},{}],56:[function(a,b,c){var d=a("./constants");b.exports=function(){var a="FH_JS_SDK";return"undefined"!=typeof window.fh_destination_code?a="FH_HYBRID_SDK":(window.PhoneGap||window.cordova)&&(a="FH_PHONEGAP_SDK"),a+"/"+d.sdk_version}},{"./constants":42}],57:[function(a,b,c){var d=a("../../../libs/rsa"),e=d.SecureRandom,f=d.byte2Hex,g=function(a){var b=new e,c=new Array(a);b.nextBytes(c);for(var d="",g=0;g<c.length;g++)d+=f(c[g]);return d},h=function(a,b,c){if(!a.params.keysize)return void c("no_params_keysize",{},a);if("aes"!==a.params.algorithm.toLowerCase())return void c("keygen_bad_algorithm",{},a);var d=parseInt(a.params.keysize,10);return d>100&&(d/=8),"undefined"==typeof e?c("security library is not loaded."):b({algorithm:"AES",secretkey:g(d),iv:g(d)})};b.exports=h},{"../../../libs/rsa":3}],58:[function(a,b,c){var d=a("../../../libs/generated/crypto"),e=function(a,b,c){var e=["key","plaintext","iv"];if("aes"!==a.params.algorithm.toLowerCase())return c("encrypt_bad_algorithm",{},a);for(var f=0;e>f;f++){var g=e[f];if(!a.params[g])return c("no_params_"+g,{},a)}var h=d.AES.encrypt(a.params.plaintext,d.enc.Hex.parse(a.params.key),{iv:d.enc.Hex.parse(a.params.iv)});return cipher_text=d.enc.Hex.stringify(h.ciphertext),b({ciphertext:cipher_text})},f=function(a,b,c){var e=["key","ciphertext","iv"];if("aes"!==a.params.algorithm.toLowerCase())return c("decrypt_bad_algorithm",{},a);for(var f=0;e>f;f++){var g=e[f];if(!a.params[g])return c("no_params_"+g,{},a)}var h=d.enc.Hex.parse(a.params.ciphertext),i=d.enc.Base64.stringify(h),j=d.AES.decrypt(i,d.enc.Hex.parse(a.params.key),{iv:d.enc.Hex.parse(a.params.iv)});try{return b({plaintext:j.toString(d.enc.Utf8)})}catch(k){return c(k)}};b.exports={encrypt:e,decrypt:f}},{"../../../libs/generated/crypto":1}],59:[function(a,b,c){var d=a("../../../libs/generated/crypto"),e=function(a,b,c){if(!a.params.text)return void c("hash_no_text",{},a);var e;if("md5"===a.params.algorithm.toLowerCase())e=d.MD5(a.params.text).toString(d.enc.Hex);else if("sha1"===a.params.algorithm.toLowerCase())e=d.SHA1(a.params.text).toString(d.enc.Hex);else if("sha256"===a.params.algorithm.toLowerCase())e=d.SHA256(a.params.text).toString(d.enc.Hex);else{if("sha512"!==a.params.algorithm.toLowerCase())return c("hash_unsupported_algorithm: "+a.params.algorithm);e=d.SHA512(a.params.text).toString(d.enc.Hex)}return b({hashvalue:e})};b.exports=e},{"../../../libs/generated/crypto":1}],60:[function(a,b,c){var d=a("../../../libs/rsa"),e=d.RSAKey,f=function(a,b,c){var d=["modulu","plaintext"];if("rsa"!==a.params.algorithm.toLowerCase())return c("encrypt_bad_algorithm",{},a);for(var f=0;d>f;f++){var g=d[f];if(!a.params[g])return c("no_params_"+g,{},a)}var h=new e;h.setPublic(a.params.modulu,"10001");var i=a.params.plaintext;return cipher_text=h.encrypt(i),b({ciphertext:cipher_text})};b.exports={encrypt:f}},{"../../../libs/rsa":3}],61:[function(a,b,c){var d=a("./api_cloud");b.exports=function(a,b,c){d({path:"/mbaas/sync/"+a.dataset_id,method:"post",data:a.req},b,c)}},{"./api_cloud":35}],62:[function(a,b,c){b.exports={createUUID:function(){for(var a=[],b="0123456789ABCDEF",c=0;32>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[12]="4",a[16]=b.substr(3&a[16]|8,1);var d=a.join("");return d}}},{}],63:[function(a,b,c){var d,e=a("./initializer"),f=a("./events"),g=a("./hosts"),h=a("./constants"),i=a("./logger"),j=a("./data"),k=a("./fhparams"),l=!1,m=!1,n=null,o=function(a){if(m)return a(null,{host:q()});if(f.once(h.INIT_EVENT,function(b,c){return a(b,c)}),!l){l=!0;var b=function(){j.sessionManager.read(function(a,b){b&&b.sessionToken&&k.setAuthSessionToken(b.sessionToken),e.init(function(a,b){return l=!1,a?(n=a,f.emit(h.INIT_EVENT,a)):(n=null,m=!0,d=new g(b.cloud),f.emit(h.INIT_EVENT,null,{host:q()}))})})};"undefined"!=typeof window.cordova||"undefined"!=typeof window.phonegap?document.addEventListener("deviceready",b,!1):b()}},p=function(){return d},q=function(){if("undefined"!=typeof d){var b=a("./appProps").getAppProps();return d.getHost(b.mode)}return void 0},r=function(){return m},s=function(){return n},t=function(){m=!1,l=!1,d=void 0,n=void 0,o(function(){})};o(function(a,b){a?"app_config_missing"!==a.message?i.error("Failed to initialise fh."):i.info("No fh config file"):i.info("fh cloud is ready")}),b.exports={ready:o,isReady:r,getCloudHost:p,getCloudHostUrl:q,getInitError:s,reset:t}},{"./appProps":40,"./constants":42,"./data":44,"./events":46,"./fhparams":47,"./hosts":49,"./initializer":50,"./logger":53}]},{},[30])(30)}),function(root){if(!JSON)var JSON=function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapeable.test(a)?'"'+a.replace(escapeable,function(a){var b=meta[a];return"string"==typeof b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"number"==typeof i.length&&!i.propertyIsEnumerable("length")){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if("object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i,rep),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)e=str(d,i,rep),e&&g.push(quote(d)+(gap?": ":":")+e);return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return{stringify:function(a,b,c){var d;if(gap="",indent="",c)if("number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(b){if("function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");rep=b}else rep=function(a,b){return Object.hasOwnProperty.call(this,a)?b:void 0};return str("",{"":a})},parse:function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},quote:quote}}();if(function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this)}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}}(),Persist=function(){var a,b,c,d,e,f,g="0.2.0";f=function(){var a,b="Thu, 01-Jan-1970 00:00:01 GMT",c=864e5,d=["expires","path","domain"],e=escape,f=unescape,g=document,h=function(){var a=new Date;return a.setTime(a.getTime()),a},j=function(a,b){var c,f,g,h=[],i=arguments.length>2?arguments[2]:{};for(h.push(e(a)+"="+e(b)),c=0;c<d.length;c++)f=d[c],(g=i[f])&&h.push(f+"="+g);return i.secure&&h.push("secure"),h.join("; ")},k=function(){var a="__EC_TEST__",b=new Date;return b=b.toGMTString(),this.set(a,b),this.enabled=this.remove(a)==b,this.enabled};return a={set:function(a,b){var d=arguments.length>2?arguments[2]:{},e=h(),f={};d.expires&&(d.expires*=c,f.expires=new Date(e.getTime()+d.expires),f.expires=f.expires.toGMTString());var k=["path","domain","secure"];for(i=0;i<k.length;i++)d[k[i]]&&(f[k[i]]=d[k[i]]);var l=j(a,b,f);return g.cookie=l,b},has:function(a){a=e(a);var b=g.cookie,c=b.indexOf(a+"="),d=(c+a.length+1,b.substring(0,a.length));return!c&&a!=d||0>c?!1:!0},get:function(a){a=e(a);var b,c=g.cookie,d=c.indexOf(a+"="),h=d+a.length+1,i=c.substring(0,a.length);return!d&&a!=i||0>d?null:(b=c.indexOf(";",h),0>b&&(b=c.length),f(c.substring(h,b)))},remove:function(c){var d=a.get(c),e={expires:b};return g.cookie=j(c,"",e),d},keys:function(){var a,b,c=g.cookie,d=c.split("; "),e=[];for(a=0;a<d.length;a++)b=d[a].split("="),e.push(f(b[0]));return e},all:function(){var a,b,c=g.cookie,d=c.split("; "),e=[];for(a=0;a<d.length;a++)b=d[a].split("="),e.push([f(b[0]),f(b[1])]);return e},version:"0.2.1",enabled:!1},a.enabled=k.call(a),a}();var h=function(){return Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1}}();e=function(){},c=function(a){return"PS"+a.replace(/_/g,"__").replace(/ /g,"_s")},C={search_order:["localstorage","whatwg_db","globalstorage","gears","ie","flash","cookie"],name_re:/^[a-z][a-z0-9_ -]+$/i,methods:["init","get","set","remove","load","save"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},args:{autostart:!0}}},b={gears:{size:-1,test:function(){try{return window.google&&window.google.gears?!0:!1}catch(a){return!1}},methods:{transaction:function(a){var b=this.db;b.execute("BEGIN").close(),a.call(this,b),b.execute("COMMIT").close()},init:function(){var a;a=this.db=google.gears.factory.create("beta.database"),a.open(c(this.name)),a.execute(C.sql.create).close()},get:function(a,b,c){var d,e=C.sql.get;b&&this.transaction(function(f){var g,h;d=f.execute(e,[a]),g=d.isValidRow(),h=g?d.field(0):null,d.close(),b.call(c||this,g,h)})},set:function(a,b,c,d){var e=C.sql.remove,f=C.sql.set;this.transaction(function(g){g.execute(e,[a]).close(),g.execute(f,[a,b]).close(),c&&c.call(d||this,!0,b)})},remove:function(a,b,c){var d=C.sql.get;sql=C.sql.remove,r,val=null,is_valid=!1,this.transaction(function(e){b&&(r=e.execute(d,[a]),is_valid=r.isValidRow(),val=is_valid?r.field(0):null,r.close()),(!b||is_valid)&&e.execute(sql,[a]).close(),b&&b.call(c||this,is_valid,val)})}}},whatwg_db:{size:204800,test:function(){try{var a="PersistJS Test",c="Persistent database test.";return window.openDatabase&&window.openDatabase(a,C.sql.version,c,b.whatwg_db.size)?!0:!1}catch(d){return!1}},methods:{transaction:function(a){this.db_created||this.db.transaction(function(a){a.executeSql(C.sql.create,[],function(){this.db_created=!0})},e),this.db.transaction(a)},init:function(){this.db=openDatabase(this.name,C.sql.version,this.o.about||"Persistent storage for "+this.name,this.o.size||b.whatwg_db.size)},get:function(a,b,c){var d=C.sql.get;b&&(c=c||this,this.transaction(function(e){e.executeSql(d,[a],function(a,d){d.rows.length>0?b.call(c,!0,d.rows.item(0).v):b.call(c,!1,null)})}))},set:function(a,b,c,d){var e=C.sql.remove,f=C.sql.set;return this.transaction(function(g){g.executeSql(e,[a],function(){g.executeSql(f,[a,b],function(a,e){c&&c.call(d||this,!0,b)})})}),b},remove:function(a,b,c){var d=C.sql.get;sql=C.sql.remove,this.transaction(function(e){b?e.executeSql(d,[a],function(d,e){if(e.rows.length>0){var f=e.rows.item(0).v;d.executeSql(sql,[a],function(a,d){b.call(c||this,!0,f)})}else b.call(c||this,!1,null)}):e.executeSql(sql,[a])})}}},globalstorage:{size:5242880,test:function(){try{return window.globalStorage?!0:!1}catch(a){return!1}},methods:{key:function(a){return c(this.name)+c(a)},init:function(){alert("domain = "+this.o.domain),this.store=globalStorage[this.o.domain]},get:function(a,b,c){a=this.key(a),b&&b.call(c||this,!0,this.store.getItem(a))},set:function(a,b,c,d){a=this.key(a),this.store.setItem(a,b),c&&c.call(d||this,!0,b)},remove:function(a,b,c){var d;a=this.key(a),d=this.store[a],this.store.removeItem(a),b&&b.call(c||this,null!==d,d)}}},localstorage:{
size:-1,test:function(){try{return window.localStorage?!0:!1}catch(a){return!1}},methods:{key:function(a){return c(this.name)+c(a)},init:function(){this.store=localStorage},get:function(a,b,c){a=this.key(a),b&&b.call(c||this,!0,this.store.getItem(a))},set:function(a,b,c,d){a=this.key(a),this.store.setItem(a,b),c&&c.call(d||this,!0,b)},remove:function(a,b,c){var d;a=this.key(a),d=this.store.getItem(a),this.store.removeItem(a),b&&b.call(c||this,null!==d,d)}}},ie:{prefix:"_persist_data-",size:65536,test:function(){try{return window.ActiveXObject?!0:!1}catch(a){return!1}},make_userdata:function(a){var b=document.createElement("div");return b.id=a,b.style.display="none",b.addBehavior("#default#userdata"),document.body.appendChild(b),b},methods:{init:function(){var a=b.ie.prefix+c(this.name);this.el=b.ie.make_userdata(a),this.o.defer&&this.load()},get:function(a,b,d){var e;a=c(a),this.o.defer||this.load(),e=this.el.getAttribute(a),b&&b.call(d||this,e?!0:!1,e)},set:function(a,b,d,e){a=c(a),this.el.setAttribute(a,b),this.o.defer||this.save(),d&&d.call(e||this,!0,b)},remove:function(a,b,d){var e;a=c(a),this.o.defer||this.load(),e=this.el.getAttribute(a),this.el.removeAttribute(a),this.o.defer||this.save(),b&&b.call(d||this,e?!0:!1,e)},load:function(){this.el.load(c(this.name))},save:function(){this.el.save(c(this.name))}}},cookie:{delim:":",size:4e3,test:function(){try{return a.Cookie.enabled?!0:!1}catch(b){return!1}},methods:{key:function(a){return this.name+b.cookie.delim+a},get:function(a,b,c){var d;a=this.key(a),d=f.get(a),b&&b.call(c||this,null!=d,d)},set:function(a,b,c,d){a=this.key(a),f.set(a,b,this.o),c&&c.call(d||this,!0,b)},remove:function(a,b,c,d){var b;a=this.key(a),b=f.remove(a),c&&c.call(d||this,null!=b,b)}}},flash:{test:function(){try{if(!deconcept||!deconcept.SWFObjectUtil)return!1;var a=deconcept.SWFObjectUtil.getPlayerVersion().major;return a>=8?!0:!1}catch(b){return!1}},methods:{init:function(){if(!b.flash.el){var a,c,d,e=C.flash;d=document.createElement("div"),d.id=e.div_id,document.body.appendChild(d),a=new deconcept.SWFObject(this.o.swf_path||e.path,e.id,e.size.w,e.size.h,"8");for(c in e.args)a.addVariable(c,e.args[c]);a.write(d),b.flash.el=document.getElementById(e.id)}this.el=b.flash.el},get:function(a,b,d){var e;a=c(a),e=this.el.get(this.name,a),b&&b.call(d||this,null!==e,e)},set:function(a,b,d,e){var f;a=c(a),f=this.el.set(this.name,a,b),d&&d.call(e||this,!0,b)},remove:function(a,b,d){var e;a=c(a),e=this.el.remove(this.name,a),b&&b.call(d||this,!0,e)}}}};var d=function(){var c,d,f,g,h=C.methods,i=C.search_order;for(c=0,d=h.length;d>c;c++)a.Store.prototype[h[c]]=e;for(a.type=null,a.size=-1,c=0,d=i.length;!a.type&&d>c;c++)if(f=b[i[c]],f.test()){a.type=i[c],a.size=f.size;for(g in f.methods)a.Store.prototype[g]=f.methods[g]}a._init=!0};return a={VERSION:g,type:null,size:0,add:function(a){b[a.id]=a,C.search_order=[a.id].concat(C.search_order),d()},remove:function(a){var c=h(C.search_order,a);0>c||(C.search_order.splice(c,1),delete b[a],d())},Cookie:f,Store:function(b,c){if(!C.name_re.exec(b))throw new Error("Invalid name");if(!a.type)throw new Error("No suitable storage found");c=c||{},this.name=b,c.domain=c.domain||location.host||"localhost",c.domain=c.domain.replace(/:\d+$/,""),this.o=c,c.expires=c.expires||730,c.path=c.path||"/",this.init()}},d(),a}(),"undefined"==typeof deconcept)var deconcept=new Object;"undefined"==typeof deconcept.util&&(deconcept.util=new Object),"undefined"==typeof deconcept.SWFObjectUtil&&(deconcept.SWFObjectUtil=new Object),deconcept.SWFObject=function(a,b,c,d,e,f,g,h,i,j){if(document.getElementById){this.DETECT_KEY=j?j:"detectflash",this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY),this.params=new Object,this.variables=new Object,this.attributes=new Array,a&&this.setAttribute("swf",a),b&&this.setAttribute("id",b),c&&this.setAttribute("width",c),d&&this.setAttribute("height",d),e&&this.setAttribute("version",new deconcept.PlayerVersion(e.toString().split("."))),this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion(),!window.opera&&document.all&&this.installedVer.major>7&&(deconcept.SWFObject.doPrepUnload=!0),f&&this.addParam("bgcolor",f);var k=g?g:"high";this.addParam("quality",k),this.setAttribute("useExpressInstall",!1),this.setAttribute("doExpressInstall",!1);var l=h?h:window.location;this.setAttribute("xiRedirectUrl",l),this.setAttribute("redirectUrl",""),i&&this.setAttribute("redirectUrl",i)}},deconcept.SWFObject.prototype={useExpressInstall:function(a){this.xiSWFPath=a?a:"expressinstall.swf",this.setAttribute("useExpressInstall",!0)},setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(a,b){this.params[a]=b},getParams:function(){return this.params},addVariable:function(a,b){this.variables[a]=b},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var a,b=new Array,c=this.getVariables();for(a in c)b.push(a+"="+c[a]);return b},getSWFHTML:function(){var a="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","PlugIn"),this.setAttribute("swf",this.xiSWFPath)),a='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'"',a+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var b=this.getParams();for(var c in b)a+=[c]+'="'+b[c]+'" ';var d=this.getVariablePairs().join("&");d.length>0&&(a+='flashvars="'+d+'"'),a+="/>"}else{this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","ActiveX"),this.setAttribute("swf",this.xiSWFPath)),a='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'">',a+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var b=this.getParams();for(var c in b)a+='<param name="'+c+'" value="'+b[c]+'" />';var d=this.getVariablePairs().join("&");d.length>0&&(a+='<param name="flashvars" value="'+d+'" />'),a+="</object>"}return a},write:function(a){if(this.getAttribute("useExpressInstall")){var b=new deconcept.PlayerVersion([6,0,65]);this.installedVer.versionIsValid(b)&&!this.installedVer.versionIsValid(this.getAttribute("version"))&&(this.setAttribute("doExpressInstall",!0),this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl"))),document.title=document.title.slice(0,47)+" - Flash Player Installation",this.addVariable("MMdoctitle",document.title))}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var c="string"==typeof a?document.getElementById(a):a;return c.innerHTML=this.getSWFHTML(),!0}return""!=this.getAttribute("redirectUrl")&&document.location.replace(this.getAttribute("redirectUrl")),!1}},deconcept.SWFObjectUtil.getPlayerVersion=function(){var a=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var b=navigator.plugins["Shockwave Flash"];b&&b.description&&(a=new deconcept.PlayerVersion(b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else{try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(d){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");a=new deconcept.PlayerVersion([6,0,21]),c.AllowScriptAccess="always"}catch(d){if(6==a.major)return a}try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(d){}}null!=c&&(a=new deconcept.PlayerVersion(c.GetVariable("$version").split(" ")[1].split(",")))}return a},deconcept.PlayerVersion=function(a){this.major=null!=a[0]?parseInt(a[0]):0,this.minor=null!=a[1]?parseInt(a[1]):0,this.rev=null!=a[2]?parseInt(a[2]):0},deconcept.PlayerVersion.prototype.versionIsValid=function(a){return this.major<a.major?!1:this.major>a.major?!0:this.minor<a.minor?!1:this.minor>a.minor?!0:this.rev<a.rev?!1:!0},deconcept.util={getRequestParameter:function(a){var b=document.location.search||document.location.hash;if(b)for(var c=b.substring(1).split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return c[d].substring(c[d].indexOf("=")+1);return""}},deconcept.SWFObjectUtil.cleanupSWFs=function(){for(var a=document.getElementsByTagName("OBJECT"),b=0;b<a.length;b++){a[b].style.display="none";for(var c in a[b])"function"==typeof a[b][c]&&(a[b][c]=function(){})}},deconcept.SWFObject.doPrepUnload&&(deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){},window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)},window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload)),null==Array.prototype.push&&(Array.prototype.push=function(a){return this[this.length]=a,this.length});var getQueryParamValue=deconcept.util.getRequestParameter,FlashObject=deconcept.SWFObject,SWFObject=deconcept.SWFObject,$fh=root.$fh||{};"object"==typeof fh_app_props&&($fh.app_props=fh_app_props),$fh.legacy={};var defaultargs={success:function(){},failure:function(){},params:{}},handleargs=function(a,b,c){var d=[null,null,null],e=[null,null,null],f=a.length;f>2?(e[0]=a[f-3],e[1]=a[f-2],e[2]=a[f-1]):2==f?(e[1]=a[0],e[2]=a[1]):1==f&&(e[2]=a[0]);for(var g=0,h=0;3>g;g++){var i=e[g],j=typeof i;!i||0!=h||"object"!=j&&"boolean"!=j?i&&"function"==j&&(h=0==h?1:h,d[h++]=i):d[h++]=i}if(null==d[0])d[0]=b?b:defaultargs.params;else{var k=d[0];k._defaults=[];for(var l in b)b.hasOwnProperty(l)&&"undefined"==typeof k[l]&&(k[l]=b[l],k._defaults.push(l))}d[1]=null==d[1]?defaultargs.success:d[1],d[2]=null==d[2]?defaultargs.failure:d[2],c(d[0],d[1],d[2])},eventSupported=function(a){var b=document.createElement("i");return a in b||b.setAttribute&&b.setAttribute(a,"return;")||!1},__is_ready=!1,__ready_list=[],__ready_bound=!1,boxprefix="/box/srv/1.1/";_getHostPrefix=function(){return $fh.app_props.host+boxprefix};var __ready=function(){if(!__is_ready&&(__is_ready=!0,__ready_list)){try{for(;__ready_list[0];)__ready_list.shift().apply(document,[])}finally{}__ready_list=null}},__bind_ready=function(){__ready_bound||(__ready_bound=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),__ready()},!1),window.addEventListener("load",__ready,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),__ready())}),window.attachEvent("onload",__ready),document.documentElement.doScroll&&window==window.top&&function(){if(!__is_ready){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}__ready()}}()))};__bind_ready();var _mapScriptLoaded="undefined"!=typeof google&&"undefined"!=typeof google.maps&&"undefined"!=typeof google.maps.Map,_mapLoadSuccessParameters=[],_mapScriptLoading=!1,_loadMapScript=function(){var a=document.createElement("script");a.type="text/javascript";var b=document.location.protocol;b="http:"===b||"https:"===b?b:"https:",a.src=b+"//maps.google.com/maps/api/js?sensor=true&callback=$fh._mapLoaded",document.body.appendChild(a)},audio_obj=null,audio_is_playing=!1;$fh.__dest__={send:function(a,b,c){c("send_nosupport")},notify:function(a,b,c){c("notify_nosupport")},contacts:function(a,b,c){c("contacts_nosupport")},acc:function(a,b,c){c("acc_nosupport")},geo:function(a,b,c){c("geo_nosupport")},cam:function(a,b,c){c("cam_nosupport")},device:function(a,b,c){c("device_nosupport")},listen:function(a,b,c){c("listen_nosupport")},handlers:function(a,b,c){c("handlers_no_support")},file:function(a,b,c){c("file_nosupport")},env:function(a,b,c){b({height:window.innerHeight,width:window.innerWidth})},data:function(a,b,c){if($fh._persist||($fh._persist=new Persist.Store("FH"+$fh.app_props.appid,{swf_path:"/static/c/start/swf/persist.swf"})),!a.key)return void c("data_nokey");var d={load:function(){$fh._persist.get(a.key,function(c,d){b(c?{key:a.key,val:d}:{key:a.key,val:null})})},save:function(){if(!a.val)return void c("data_noval");try{$fh._persist.set(a.key,a.val)}catch(d){return void c("data_error",{},a)}b()},remove:function(){$fh._persist.remove(a.key,function(c,d){b(c?{key:a.key,val:d}:{key:a.key,val:null})})}};d[a.act]?d[a.act]():c("data_badact",a)},log:function(a,b,c){"undefined"==typeof console?c("log_nosupport"):console.log(a.message)},ori:function(a,b,c){if("undefined"==typeof a.act||"listen"==a.act)eventSupported("onorientationchange")?window.addEventListener("orientationchange",b,!1):c("ori_nosupport",{},a);else if("set"==a.act){if(!a.value)return void c("ori_no_value",{},a);"portrait"==a.value?(document.getElementsByTagName("body")[0].style["-moz-transform"]="",document.getElementsByTagName("body")[0].style["-webkit-transform"]="",b({orientation:"portrait"})):(document.getElementsByTagName("body")[0].style["-moz-transform"]="rotate(90deg)",document.getElementsByTagName("body")[0].style["-webkit-transform"]="rotate(90deg)",b({orientation:"landscape"}))}else c("ori_badact",{},a)},map:function(a,b,c){if(!a.target)return void c("map_notarget",{},a);if(!a.lat)return void c("map_nolatitude",{},a);if(!a.lon)return void c("map_nologitude",{},a);var d=a.target;if("string"==typeof d){var e=null;if("undefined"!=typeof jQuery)try{var f=jQuery(d);f.length>0&&(e=f[0])}catch(g){e=null}null==e&&(e=document.getElementById(d)),d=e}else"object"==typeof d?1===d.nodeType&&"string"==typeof d.nodeName||(d=d[0]):d=null;if(!d)return void c("map_nocontainer",{},a);if(_mapScriptLoaded){var h={};h.zoom=a.zoom?a.zoom:8,h.center=new google.maps.LatLng(a.lat,a.lon),h.mapTypeId=google.maps.MapTypeId.ROADMAP;var i=new google.maps.Map(d,h);b({map:i})}else"function"==typeof b&&_mapLoadSuccessParameters.push({target:d,successFunction:b,mOptions:a}),$fh._mapLoaded=function(){_mapScriptLoaded=!0;for(var a=_mapLoadSuccessParameters.shift();"undefined"!=typeof a;){var b=a.mOptions,c={};c.zoom=b.zoom?b.zoom:8,c.center=new google.maps.LatLng(b.lat,b.lon),c.mapTypeId=google.maps.MapTypeId.ROADMAP;var d=new google.maps.Map(a.target,c);a.successFunction({map:d}),a=_mapLoadSuccessParameters.shift()}},_mapScriptLoading||(_mapScriptLoading=!0,_loadMapScript()),setTimeout(function(){_mapScriptLoaded||c("map_timeout",{},a)},2e4)},audio:function(a,b,c){if(null==!audio_obj&&"play"==a.act&&(!a.path||""==a.path))return void c("no_audio_path");var d={play:function(){if(null==audio_obj){if(audio_obj=document.createElement("audio"),!(audio_obj.play?!0:!1))return void c("audio_not_support");if(a.type){var e=audio_obj.canPlayType(a.type);if("no"==e||""==e)return void c("audio_type_not_supported")}audio_obj.src=a.path,a.controls&&(audio_obj.controls="controls"),a.autoplay&&(audio_obj.autoplay="autoplay"),a.loop&&(audio_obj.loop="loop"),document.body.appendChild(audio_obj),audio_obj.play(),audio_is_playing=!0,b()}else a.path&&a.path!=audio_obj.src?(audio_is_playing&&d.stop(!0),d.play()):audio_is_playing||(audio_obj.play(),audio_is_playing=!0,b())},pause:function(){null!=audio_obj&&audio_is_playing?("function"==typeof audio_obj.pause?audio_obj.pause():"function"==typeof audio_obj.stop&&audio_obj.stop(),audio_is_playing=!1,b()):c("no_audio_playing")},stop:function(a){null!=audio_obj?("function"==typeof audio_obj.stop?audio_obj.stop():"function"==typeof audio_obj.pause&&audio_obj.pause(),document.body.removeChild(audio_obj),audio_obj=null,audio_is_playing=!1,a||b()):c("no_audio")}};d[a.act]?d[a.act]():c("data_badact",a)},webview:function(a,b,c){c("webview_nosupport")},ready:function(a,b,c){__bind_ready(),__is_ready?b.apply(document,[]):__ready_list.push(b)}},$fh.send=function(){handleargs(arguments,{type:"email"},$fh.__dest__.send)},$fh.notify=function(){handleargs(arguments,{type:"vibrate"},$fh.__dest__.notify)},$fh.contacts=function(){handleargs(arguments,{act:"list"},$fh.__dest__.contacts)},$fh.acc=function(){handleargs(arguments,{act:"register",interval:0},$fh.__dest__.acc)},$fh.geo=function(){handleargs(arguments,{act:"register",interval:0},$fh.__dest__.geo)},$fh.cam=function(){handleargs(arguments,{act:"picture"},$fh.__dest__.cam)},$fh.data=function(){handleargs(arguments,{act:"load"},$fh.__dest__.data)},$fh.log=function(){handleargs(arguments,{message:"none"},$fh.__dest__.log)},$fh.device=function(){handleargs(arguments,{},$fh.__dest__.device)},$fh.listen=function(){handleargs(arguments,{act:"add"},$fh.__dest__.listen)},$fh.ori=function(){handleargs(arguments,{},$fh.__dest__.ori)},$fh.map=function(){handleargs(arguments,{},$fh.__dest__.map)},$fh.audio=function(){handleargs(arguments,{},$fh.__dest__.audio)},$fh.webview=function(){handleargs(arguments,{},$fh.__dest__.webview)},$fh.ready=function(){handleargs(arguments,{},$fh.__dest__.ready)},$fh.handlers=function(){handleargs(arguments,{type:"back"},$fh.__dest__.handlers)},$fh.file=function(){handleargs(arguments,{act:"upload"},$fh.__dest__.file)},$fh.env=function(){handleargs(arguments,{},function(a,b,c){$fh.__dest__.env({},function(a){a.application=$fh.app_props.appid,$fh._getDeviceId&&(a.uuid=$fh._getDeviceId()),a.agent=navigator.userAgent||"unknown",b(a)})})},$fh.device=function(){handleargs(arguments,{},function(a,b,c){})},$fh.geoip=function(){handleargs(arguments,{act:"get"},function(a,b,c){if("get"==a.act){var d={instance:$fh.app_props.appid,domain:$fh.cloud_props.domain};$fh.__ajax({url:_getHostPrefix()+"act/wid/geoip/resolve",type:"POST",data:JSON.stringify(d),success:function(a){for(var c in a.geoip)a[c]=a.geoip[c];b(a)}})}else c("geoip_badact",a)})},$fh.web=function(a,b,c){handleargs(arguments,{method:"GET"},function(a,b,c){a.url||c("bad_url"),a.is_local?$fh.__ajax({url:a.url,type:"GET",dataType:"html",success:function(a){var c={};c.status=200,c.body=a,b(c)},error:function(){c()}}):$fh.__ajax({url:_getHostPrefix()+"act/wid/web",type:"POST",data:JSON.stringify(a),success:function(a){b(a)}})})},$fh.__webview_win=void 0,$fh.__dest__.webview=function(a,b,c){if("act"in a&&"open"!==a.act)"close"===a.act&&("undefined"!=typeof $fh.__webview_win&&($fh.__webview_win.close(),$fh.__webview_win=void 0),b("closed"));else{if(!a.url)return void c("no_url");a.url;$fh.__webview_win=window.open(a.url,"_blank"),b("opened")}},("undefined"!=typeof window.PhoneGap||"undefined"!=typeof window.cordova)&&($fh.__dest__.ready=function(a,b,c){if(__is_ready)try{b()}catch(d){console.log("Error during $fh.ready. Skip. Error = "+d.message)}else __ready_list.push(b)}),$fh.__dest__.geo=function(a,b,c){if("undefined"!=typeof navigator.geolocation)if(a.act&&"register"!=a.act)"unregister"==a.act?($fh.__dest__._geoWatcher&&(navigator.geolocation.clearWatch($fh.__dest__._geoWatcher),$fh.__dest__._geoWatcher=void 0),b()):c("geo_badact",{},a);else{if($fh.__dest__._geoWatcher)return void c("geo_inuse",{},a);if(0==a.interval&&navigator.geolocation.getCurrentPosition(function(a){var c=a.coords,d={lon:c.longitude,lat:c.latitude,alt:c.altitude,acc:c.accuracy,head:c.heading,speed:c.speed,when:a.timestamp};b(d)},function(b){c("error_geo",{},a)},{timeout:3e4,enableHighAccuracy:!0}),a.interval>0){var d=navigator.geolocation.watchPosition(function(a){var c=a.coords,d={lon:c.longitude,lat:c.latitude,alt:c.altitude,acc:c.accuracy,head:c.heading,speed:c.speed,when:a.timestamp};b(d)},function(){c("error_geo",{},a)},{frequency:a.interval});$fh.__dest__._geoWatcher=d}}else c("geo_nosupport",{},a)},$fh.__dest__.acc=function(a,b,c){b({x:4*Math.random()-2,y:4*Math.random()-2,z:4*Math.random()-2,when:(new Date).getTime()})},root.$fh=$fh}(window||this),function(a){var b=function(a){function c(a,c){var d={updateForms:!0};if("undefined"==typeof c)c=a;else for(var e in a)d[e]=a[e];var f=d.config||{};b.config=b.models.config,b.config.init(f,function(a){a&&$fh.forms.log.e("Form config loading error: ",a),b.models.log.loadLocal(function(a){a&&console.error("Error loading config from local storage"),b.models.submissions.loadLocal(function(a){a&&console.error("Error loading submissions"),b.models.uploadManager.loadLocal(function(a){$fh.forms.log.d("Upload Manager loaded from memory."),a&&$fh.forms.log.e("Error loading upload manager from memory ",a),b.models.uploadManager.start(),$fh.forms.log.l("Refreshing Theme."),b.models.theme.refresh(!0,function(a){a&&$fh.forms.log.e("Error refreshing theme ",a),d.updateForms===!0?($fh.forms.log.l("Refreshing Forms."),b.models.forms.refresh(!0,function(a){a&&$fh.forms.log.e("Error refreshing forms: ",a),c()})):c()})})})})})}return a.init=c,a}(b||{});b.utils=function(a){function b(){return"undefined"!=typeof window.Phonegap||"undefined"!=typeof window.cordova}function c(a,b){if(b.constructor&&b.constructor===Function)for(var c in b.prototype)a.prototype[c]=b.prototype[c];else for(var d in b)a.prototype[d]=b[d]}function d(a){var b=new Date;return a?b.getTimezoneOffset():b}function e(a){var b=a.getProps(),c=b._id,e=b._type,f=d().getTime();return c&&e?c+"_"+e+"_"+f:c?c+"_"+f:e?e+"_"+f:f}function f(a,b){"undefined"!=typeof $fh&&$fh.hash?$fh.hash({algorithm:"MD5",text:a},function(a){a&&a.hashvalue?b(null,a.hashvalue):b("Crypto failed.")}):b("Crypto not found")}function g(a,b){$fh.forms.log.d("Sending mail: ",a),$fh.send(a,function(){b(null)},function(a){b(a)})}return a.extend=c,a.localId=e,a.md5=f,a.getTime=d,a.send=g,a.isPhoneGap=b,a.generateGlobalEventName=function(a,b){return""+a+":"+b},a}(b.utils||{}),b.utils=function(a){function c(){return s(),t}function d(a,b){if(!a instanceof File)return b("Only file object can be used for converting");var c=new FileReader;c.onloadend=function(a){var c=a.target.result;return b(null,c)},c.readAsDataURL(a)}function e(a){var c;if(b.utils.isPhoneGap())c=a;else{var d="text/plain";try{c=new Blob([a],{type:d})}catch(e){var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===e.name&&f){var g=new f;g.append([a.buffer]),c=g.getBlob(d)}else c=a}}return c}function f(a){h("dummy.txt","TestContnet",function(b,c){return b?a(b):void q("dummy.txt",0,{},function(b,c){var d=c.localURL.replace("dummy.txt","");return c.remove(),a(null,d)})})}function g(a){var b=null;if("object"==typeof a&&null!==a)if(a instanceof File||a instanceof Blob)b=a;else{var c=JSON.stringify(a);b=e(c)}else"string"==typeof a&&(b=e(a));return b}function h(a,c,d){var e=g(c);if(null===e)return d("Invalid content type. Object was null");var f=e.size||e.length;q(a,f,{create:!0},function(c,f){c?d(c):b.utils.isPhoneGap()&&e instanceof File?f.getParent(function(b){p(e.localURL,function(c,e){return c?d(c):(a=f.name,void f.remove(function(){e.copyTo(b,a,function(a){return d(null,a)},function(a){return d(a)})},function(a){return d(a)}))},function(a){return d(a)})},function(a){return d(a)}):f.createWriter(function(a){function b(a){return d(null,a)}function c(){a.onwriteend=b,a.write(e)}a.onwriteend=c,a.truncate(0)},function(a){d("Failed to create file write:"+a)})})}function i(a,b){q(a,0,{},function(a,c){return a?"NotFoundError"!==a.name&&1!==a.code?b(a):b(null,null):void c.remove(function(){b(null,null)},function(a){b("Failed to remove file"+a)})})}function j(a){function b(b){var d=b.root.createReader();d.readEntries(c,a)}function c(b){async.forEachSeries(b,function(a,b){a.isDirectory?a.removeRecursively(b,b):a.remove(b,b)},a)}u(v,0,b,a)}function k(a,b){o(a,function(a,c){if(a)b(a);else{var d=new FileReader;d.onloadend=function(a){var c=a.target.result;"object"==typeof c&&(c=JSON.stringify(c));try{c=decodeURIComponent(c)}catch(d){}return b(null,c)},d.readAsText(c)}})}function l(a,b){o(a,function(a,c){if(a)return b(a);var d=new FileReader;d.onloadend=function(a){var c=a.target.result;return b(null,c)},d.readAsDataURL(c)})}function m(a,b){o(a,function(a,c){if(a)return b(a);var d=c.type,e=new FileReader;e.onloadend=function(a){var c=a.target.result,e=new Blob([c],{type:d});b(null,e)},e.readAsArrayBuffer(c)})}function n(a,b){o(a,b)}function o(a,b){q(a,0,{},function(a,c){return a?b(a):void c.file(function(a){b(null,a)},function(a){b(a)})})}function p(a,b){-1===a.indexOf("file://")&&"Win32NT"!==window.device.platform&&"windows"!==window.device.platform&&(a="file://"+a),window.resolveLocalFileSystemURL(a,function(a){return b(null,a)},function(a){return b(a)})}function q(a,c,d,e){s(),"string"==typeof a?u(v,c,function(f){f.root.getFile(a,d,function(a){e(null,a)},function(f){if("QuotaExceededError"===f.name||10===f.code){var g=1073741824;r(g,function(b,f){q(a,c,d,e)})}else{if(!b.utils.isPhoneGap())return e(f);p(a,e)}})},function(){e("Failed to requestFileSystem")}):"function"==typeof e&&e("Expected file name to be a string but was "+a)}function r(a,b){navigator.webkitPersistentStorage?navigator.webkitPersistentStorage.requestQuota(a,function(a){b(null,a)},function(a){b(a,0)}):b(null,a)}function s(){window.requestFileSystem?(u=window.requestFileSystem,t=!0):window.webkitRequestFileSystem?(u=window.webkitRequestFileSystem,t=!0):t=!1,window.LocalFileSystem?v=window.LocalFileSystem.PERSISTENT:window.PERSISTENT&&(v=window.PERSISTENT)}a.fileSystem={isFileSystemAvailable:c,save:h,remove:i,readAsText:k,readAsBlob:m,readAsBase64Encoded:l,readAsFile:n,fileToBase64:d,getBasePath:f,clearFileSystem:j};var t=!1,u=function(){console.error("No file system available")},v=1;return s(),a}(b.utils||{}),b.utils=function(a){function b(){return m(),q}function c(){return m(),p}function d(a,b){m(),i(a,b)}function e(){if(u){if(u.stop)u.stop();else{var a=u.getTracks();a&&0!==a.length&&a[0].stop()}u=null}}function f(a,b){a=a||{},$fh.forms.log.d("Taking photo ",a,p);var c=a.targetWidth?a.targetWidth:$fh.forms.config.get("targetWidth",640),d=a.targetHeight?a.targetHeight:$fh.forms.config.get("targetHeight",480),e=a.quality?a.quality:$fh.forms.config.get("quality",50),f="undefined"!=typeof a.saveToPhotoAlbum?a.saveToPhotoAlbum:$fh.forms.config.get("saveToPhotoAlbum"),h=a.encodingType?a.encodingType:$fh.forms.config.get("encodingType","jpeg");a.targetWidth=c,a.targetHeight=d,a.quality=e,a.saveToPhotoAlbum=f,a.encodingType=h,"undefined"==typeof a.sourceType&&"undefined"!=typeof Camera&&(a.sourceType=Camera.PictureSourceType.CAMERA),p?g(a,b):q?o(a,b):b("Your device does not support camera.")}function g(a,b){a.encodingType="jpeg"===a.encodingType?Camera.EncodingType.JPEG:Camera.EncodingType.PNG,navigator.camera.getPicture(h(b),b,{quality:a.quality,targetWidth:a.targetWidth,targetHeight:a.targetHeight,sourceType:a.sourceType,saveToPhotoAlbum:a.saveToPhotoAlbum,destinationType:Camera.DestinationType.FILE_URI,encodingType:a.encodingType})}function h(a){return function(b){var c=b;a(null,c)}}function i(a,b){$fh.forms.log.d("Taking photo _html5Camera",a,p);var c=a.targetWidth||$fh.forms.config.get("targetWidth"),d=a.targetHeight||$fh.forms.config.get("targetHeight");r.width=c,r.height=d,s.width=c,s.height=d,u?($fh.forms.log.e("Media device was not released by browser."),b("Media device occupied.")):navigator.getUserMedia({video:!0,audio:!1},function(a){r.src=window.URL.createObjectURL(a),u=a,b(null,r)},b)}function j(a,b){return window.cordova&&window.cordova.plugins&&window.cordova.plugins.barcodeScanner?void cordova.plugins.barcodeScanner.scan(function(a){return $fh.forms.log.d("Barcode Found: "+JSON.stringify(a)),b(null,a)},function(a){$fh.forms.log.e("Scanning failed: "+a),b("Scanning failed: "+a)}):b("Barcode plugin not installed")}function k(a,b){return $fh.forms.log.e("Web Barcode Decoding not supported yet."),b("Web Barcode Decoding not supported yet.")}function l(a,b){c()?j(a,b):k(a,b)}function m(){$fh.forms.log.d("Checking env"),navigator.camera&&navigator.camera.getPicture?p=!0:n()?(q=!0,r=document.createElement("video"),r.autoplay="autoplay",s=document.createElement("canvas"),t=s.getContext("2d")):console.error("Cannot detect usable media API. Camera will not run properly on this device.")}function n(){return navigator.getUserMedia?!0:navigator.webkitGetUserMedia?(navigator.getUserMedia=navigator.webkitGetUserMedia,!0):navigator.mozGetUserMedia?(navigator.getUserMedia=navigator.mozGetUserMedia,!0):navigator.msGetUserMedia?(navigator.getUserMedia=navigator.msGetUserMedia,!0):!1}function o(a,b){if($fh.forms.log.d("Snapshot ",a),u){t.drawImage(r,0,0,a.targetWidth,a.targetHeight);var c=s.toDataURL("image/png"),d=t.getImageData(0,0,a.targetWidth,a.targetHeight);return a.cancelHtml5Camera&&e(),a.rawData?b(null,{imageData:d,width:a.targetWidth,height:a.targetHeight,base64:c}):b(null,c)}$fh.forms.log.e("Media resource is not available"),b("Resource not available")}a.takePhoto=f,a.isPhoneGapCamAvailable=c,a.isHtml5CamAvailable=b,a.initHtml5Camera=d,a.cancelHtml5Camera=e,a.captureBarcode=l;var p=!1,q=!1,r=null,s=null,t=null,u=null;return a}(b.utils||{}),b.web=function(a){return a.uploadFile=function(a,b,c){$fh.forms.log.d("Phonegap uploadFile ",a,b);var d=b.localURL;if(!$fh.forms.config.isOnline())return $fh.forms.log.e("Phonegap uploadFile. Not Online.",a,b),c("No Internet Connection Available.");var e=function(b){$fh.forms.log.d("upload to url ",a," sucessful"),b.response=b.response||{},"string"==typeof b.response&&(b.response=JSON.parse(b.response)),c(null,b.response)},f=function(a){$fh.forms.log.e("An error uploading a file has occurred: Code = "+a.code),$fh.forms.log.d("upload error source "+a.source),$fh.forms.log.d("upload error target "+a.target),c(a)},g=new FileUploadOptions;g.fileName=null==b.name||""===b.name?"image.png":b.name,g.mimeType=b.contentType?b.contentType:"application/octet-stream",g.httpMethod="https",g.chunkedMode=!0,g.fileKey="file",g.headers={Connection:"close"},$fh.forms.log.d("Beginning file upload ",a,g);var h=new FileTransfer;h.upload(d,encodeURI(a),e,f,g)},a.downloadFile=function(a,c,d){$fh.forms.log.d("Phonegap downloadFile ",a,c);var e=new FileTransfer;return $fh.forms.config.isOnline()?void b.utils.fileSystem.getBasePath(function(b,f){function g(a){return $fh.forms.log.d("File Download Completed Successfully. FilePath: "+a.fullPath),d(null,a.toURL())}function h(a){return $fh.forms.log.e("Error downloading file "+c.fileName+" code: "+a.code),d("Error downloading file "+c.fileName+" code: "+a.code)}if(b)return $fh.forms.log.e("Error getting base path for file download: "+a),d(b);if(!c.fileName)return $fh.forms.log.e("No file name associated with the file to download"),d("No file name associated with the file to download");$fh.forms.log.d("File name for file "+c.fileName+" found. Starting download");var i=f+c.fileName;e.download(encodeURI(a),i,g,h,!1,{headers:{Connection:"close"}})}):($fh.forms.log.e("Phonegap downloadFile. Not Online.",a,c),d("No Internet Connection Available."))},a}(b.web||{}),b.web.ajax=function(a){function b(){}function c(a,b){$fh.forms.log.d("Ajax get ",a),e({url:a,type:"GET",dataType:"json",success:function(c,d){$fh.forms.log.d("Ajax get",a,"Success"),b(null,c)},error:function(c,d,e){$fh.forms.log.e("Ajax get",a,"Fail",c,d,e),b(c)}})}function d(a,b,c){$fh.forms.log.d("Ajax post ",a,b);var d,f=!1;if("object"==typeof b)if(b instanceof File){f=!0,d=new FormData;var g=b.name;d.append(g,b),b=d}else b=JSON.stringify(b);var h={url:a,type:"POST",data:b,dataType:"json",success:function(b,d){$fh.forms.log.d("Ajax post ",a," Success"),c(null,b)},error:function(b,d,e){$fh.forms.log.e("Ajax post ",a," Fail ",b,d,e),c(b)}};f===!1&&(h.contentType="application/json"),e(h)}a="undefined"!=typeof $fh&&$fh.__ajax?$fh.__ajax:b,a.get=c,a.post=d;var e=a;return a}(b.web.ajax||{}),b.stores=function(a){function b(a){this.name=a}return a.Store=b,b.prototype.create=function(a,b){throw"Create not implemented:"+this.name},b.prototype.read=function(a,b){throw"Read not implemented:"+this.name},b.prototype.update=function(a,b){throw"Update not implemented:"+this.name},b.prototype.removeEntry=function(a,b){throw"Delete not implemented:"+this.name},b.prototype.upsert=function(a,b){throw"Upsert not implemented:"+this.name},a}(b.stores||{}),b.stores=function(a){function c(){b.stores.Store.call(this,"LocalStorage")}function d(a){
return"function"==typeof a.getLocalId?a.getLocalId():a}function e(){j()?g.apply({},arguments):f.apply({},arguments)}function f(a,b,c){return $fh&&$fh.data?void $fh.data(a,function(c){return"undefined"==typeof c&&(c={key:a.key,val:a.val}),"remove"===a.act.toLowerCase()?b(null,null):void b(null,c.val?c.val:null)},c):b()}function g(a,c,d){function e(a){return"undefined"!=typeof d?d(a,{}):void 0}function f(a,c){var d=b.config.get("appId","unknownAppId");a+=d,h.md5(a,function(b,d){b&&(d=a);var e=d;return-1===a.indexOf("filePlaceHolder")&&(e+=".txt"),"undefined"==typeof navigator.externalstorage?c(e):void navigator.externalstorage.enable(function(a){var b=e;return a.path&&(b=a.path,b.match(/\/$/)||(b+="/"),b+=e),e=b,c(e)},function(a){return c(e)})})}function g(a,b){f(a,function(a){i.save(a,b,function(a,d){a?e(a):c(null,b)})})}function j(a){f(a,function(a){i.remove(a,function(a){a?"NotFoundError"===a.name||1===a.code?c(null,null):e(a):c(null,null)})})}function k(a){f(a,function(a){i.readAsText(a,function(a,b){a?"NotFoundError"===a.name||1===a.code?c(null,null):e(a):c(null,b)})})}function l(a){f(a,function(a){i.readAsFile(a,function(a,b){a?"NotFoundError"===a.name||1===a.code?c(null,null):e(a):c(null,b)})})}return"undefined"==typeof a.act?k(a.key):"save"===a.act?g(a.key,a.val):"remove"===a.act?j(a.key):"load"===a.act?k(a.key):"loadFile"===a.act?l(a.key):"undefined"!=typeof d?d("Action ["+a.act+"] is not defined",{}):void 0}var h=b.utils,i=h.fileSystem,j=function(){};return b.utils.extend(c,b.stores.Store),c.prototype.create=function(a,b){var c=h.localId(a);a.setLocalId(c),this.update(a,b)},c.prototype.read=function(a,b){if("object"==typeof a&&"offlineTest"===a.get("_type"))return b(null,{});var c=d(a);null!=c?e({act:"load",key:c.toString()},b,b):b(null,null)},c.prototype.update=function(a,b){var c=d(a),f=a.getProps(),g=JSON.stringify(f);e({act:"save",key:c.toString(),val:g},b,b)},c.prototype.removeEntry=function(a,b){var c=d(a);e({act:"remove",key:c.toString()},b,b)},c.prototype.upsert=function(a,b){var c=d(a);null===c?this.create(a,b):this.update(a,b)},c.prototype.switchFileSystem=function(a){j=function(){return a}},c.prototype.defaultStorage=function(){j=function(){return i.isFileSystemAvailable()}},c.prototype.saveFile=function(a,b,c){return j()?void e({act:"save",key:a,val:b},c,c):c("File system not available")},c.prototype.updateTextFile=function(a,b,c){e({act:"save",key:a,val:b},c,c)},c.prototype.readFile=function(a,b){e({act:"loadFile",key:a},b,b)},c.prototype.readFileText=function(a,b){e({act:"load",key:a},b,b)},j=function(){return i.isFileSystemAvailable()},a.localStorage=new c,a}(b.stores||{}),b.stores=function(a){function c(){e.call(this,"MBaaS")}function d(a){$fh.forms.log.d("_getUrl ",a);var c=a.get("_type"),d=b.config.getCloudHost(),e=b.config.get("mbaasBaseUrl"),f=b.config.get("formUrls"),g="";f[c]?g=f[c]:$fh.forms.log.e("type not found to get url:"+c);var h=d+e+g,i={};switch(i.appId=b.config.get("appId"),c){case"config":i.appid=a.get("appId"),i.deviceId=a.get("deviceId");break;case"form":i.formId=a.get("_id");break;case"formSubmission":i.formId=a.getFormId();break;case"fileSubmission":i.submissionId=a.getSubmissionId(),i.hashName=a.getHashName(),i.fieldId=a.getFieldId();break;case"base64fileSubmission":i.submissionId=a.getSubmissionId(),i.hashName=a.getHashName(),i.fieldId=a.getFieldId();break;case"submissionStatus":i.submissionId=a.get("submissionId");break;case"completeSubmission":i.submissionId=a.get("submissionId");break;case"formSubmissionDownload":i.submissionId=a.getSubmissionId();break;case"fileSubmissionDownload":i.submissionId=a.getSubmissionId(),i.fileGroupId=a.getFileGroupId();break;case"offlineTest":return"http://127.0.0.1:8453"}for(var j in i)h=h.replace(":"+j,i[j]);return h}var e=b.stores.Store;return a.mBaaS=new c,b.utils.extend(c,e),c.prototype.checkStudio=function(){return b.config.get("studioMode")},c.prototype.create=function(a,c){var e=this;if(e.checkStudio())c("Studio mode mbaas not supported");else{var f=d(a);e.isFileAndPhoneGap(a)?b.web.uploadFile(f,a.getProps(),c):b.web.ajax.post(f,a.getProps(),c)}},c.prototype.isFileAndPhoneGap=function(a){var b=this;return b.isFileTransfer(a)&&b.isPhoneGap()},c.prototype.isFileTransfer=function(a){return"fileSubmission"===a.get("_type")||"base64fileSubmission"===a.get("_type")||"fileSubmissionDownload"===a.get("_type")},c.prototype.isPhoneGap=function(){return"undefined"!=typeof window.Phonegap||"undefined"!=typeof window.cordova},c.prototype.read=function(a,c){var e=this;if(e.checkStudio())c("Studio mode mbaas not supported");else if("offlineTest"===a.get("_type"))c("offlinetest. ignore");else{var f=d(a);if(e.isFileTransfer(a)&&e.isPhoneGap())b.web.downloadFile(f,a.getFileMetaData(),c);else{if(e.isFileTransfer(a))return c(null,a.getRemoteFileURL());b.web.ajax.get(f,c)}}},c.prototype.update=function(a,b){},c.prototype["delete"]=function(a,b){},c.prototype.completeSubmission=function(a,c){if(this.checkStudio())return c("Studio mode mbaas not supported");var e=d(a);b.web.ajax.post(e,{},c)},c.prototype.submissionStatus=function(a,c){if(this.checkStudio())return c("Studio mode mbaas not supported");var e=d(a);b.web.ajax.get(e,c)},c.prototype.isOnline=function(a){var c=b.config.getCloudHost(),d=c+b.config.get("statusUrl","/sys/info/ping");b.web.ajax.get(d,function(b){return b?($fh.forms.log.e("Online status ajax ",b),a(!1)):($fh.forms.log.d("Online status ajax success"),a(!0))})},a}(b.stores||{}),b.stores=function(a){function c(a,b){d.call(this,"DataAgent"),this.remoteStore=a,this.localStore=b}var d=b.stores.Store;return a.DataAgent=c,a.dataAgent=new c(b.stores.mBaaS,b.stores.localStorage),b.utils.extend(c,d),c.prototype.read=function(a,b){$fh.forms.log.d("DataAgent read ",a);var c=this;this.localStore.read(a,function(d,e){d||!e?($fh.forms.log.d("Error reading model from localStore ",a,d),c.refreshRead(a,b)):b(null,e,!1)})},c.prototype.refreshRead=function(a,b){$fh.forms.log.d("DataAgent refreshRead ",a);var c=this;this.remoteStore.read(a,function(d,e){d?($fh.forms.log.e("Error reading model from remoteStore ",a,d),b(d)):($fh.forms.log.d("Model refresh successfull from remoteStore ",a,e),a.fromJSON(e),c.localStore.upsert(a,function(){var a=Array.prototype.slice.call(arguments,0);a.push(!0),b.apply({},a)}))})},c.prototype.attemptRead=function(a,b){$fh.forms.log.d("DataAgent attemptRead ",a);var c=this;c.checkOnlineStatus(function(d){$fh.forms.config.isOnline()?c.refreshRead(a,function(d){d?c.read(a,b):b.apply({},arguments)}):c.read(a,b)})},c.prototype.checkOnlineStatus=function(a){$fh.forms.log.d("DataAgent check online status ");var c=this;return b.utils.isPhoneGap()&&navigator.connection&&navigator.connection.type&&navigator.connection.type===Connection.NONE?($fh.forms.config.offline(),a(!1)):void c.remoteStore.isOnline(function(b){b===!1?$fh.forms.config.offline():$fh.forms.config.online(),a(null,b)})},a}(b.stores||{}),b.models=function(a){function c(a){if(this.props={_id:null,_type:null,_ludid:null},this.utils=b.utils,this.events={},"undefined"!=typeof a)for(var c in a)this.props[c]=a[c];this.touch()}return c.prototype.on=function(a,b){this.events[a]||(this.events[a]=[]),this.events[a].indexOf(b)<0&&this.events[a].push(b)},c.prototype.off=function(a,b){this.events[a]&&this.events[a].indexOf(b)>=0&&this.events[a].splice(this.events[a].indexOf(b),1)},c.prototype.getType=function(){return this.get("_type")},c.prototype.clearEvents=function(){this.events={}},c.prototype.emit=function(){var a=Array.prototype.slice.call(arguments,0),b=a.shift(),c=this.events[b],d=a.slice(0);if(c&&c.length>0)for(var e=0;e<c.length;e++){var f=c[e];f.apply(this,a);var g=this.getType();if(g){var h=this.utils.generateGlobalEventName(g,b);d.unshift(h),$fh.forms.emit.apply(this,d)}}},c.prototype.getProps=function(){return this.props},c.prototype.get=function(a,b){return"undefined"==typeof this.props[a]?b:this.props[a]},c.prototype.set=function(a,b){this.props[a]=b},c.prototype.setLocalId=function(a){this.set("_ludid",a)},c.prototype.getLocalId=function(){return this.get("_ludid")},c.prototype.toJSON=function(){var a={};for(var b in this.props)a[b]=this.props[b];return a},c.prototype.fromJSON=function(a){if("string"==typeof a)this.fromJSONStr(a);else for(var b in a)this.set(b,a[b]);this.touch()},c.prototype.fromJSONStr=function(a){try{var b=JSON.parse(a);this.fromJSON(b)}catch(c){console.error("Error parsing JSON",c)}},c.prototype.touch=function(){this.set("_localLastUpdate",b.utils.getTime())},c.prototype.getLocalUpdateTimeStamp=function(){return this.get("_localLastUpdate")},c.prototype.genLocalId=function(){return b.utils.localId(this)},c.prototype.refresh=function(a,b){function c(a,c){!a&&c?(e.fromJSON(c),b(null,e)):b(a,e)}var d=this.getDataAgent(),e=this;"undefined"==typeof b&&(b=a,a=!1),a?d.attemptRead(this,c):d.read(this,c)},c.prototype.attemptRefresh=function(a){var b=this.getDataAgent(),c=this;b.attemptRead(this,function(b,d){!b&&d?(c.fromJSON(d),a(null,c)):a(b,c)})},c.prototype.loadLocal=function(a){var c=b.stores.localStorage,d=this;c.read(this,function(b,c){b?a(b):(c&&d.fromJSON(c),a(b,d))})},c.prototype.saveLocal=function(a){var c=b.stores.localStorage;c.upsert(this,a)},c.prototype.clearLocal=function(a){var c=b.stores.localStorage;c.removeEntry(this,a)},c.prototype.getDataAgent=function(){return this.dataAgent||this.setDataAgent(b.stores.dataAgent),this.dataAgent},c.prototype.setDataAgent=function(a){this.dataAgent=a},a.Model=c,a}(b.models||{}),b.models=function(a){function c(){d.call(this,{_type:"config",_ludid:"config"})}var d=b.models.Model,e=!0,f="notset";return b.utils.extend(c,d),c.prototype.init=function(a,b){a.studioMode?(this.set("studioMode",!0),this.fromJSON(a),b()):(this.set("studioMode",!1),this.staticConfig(a),this.refresh(!0,b))},c.prototype.isStudioMode=function(){return this.get("studioMode")},c.prototype.refresh=function(a,b){function c(a,c){var d={};if(!a&&c){if("string"==typeof c)try{d=JSON.parse(c)}catch(f){return $fh.forms.log.e("Invalid json config defintion from remote",f),d={},b(f,null)}else d=c;e.set("defaultConfigValues",d),e.saveLocal(function(a,c){b(a,e)})}else b(a,e)}var d=this.getDataAgent(),e=this;"undefined"==typeof b&&(b=a,a=!1),e.loadLocal(function(a,b){a&&$fh.forms.log.e("Config loadLocal ",a),d.remoteStore.read(e,c)})},c.prototype.getCloudHost=function(){return f},c.prototype.staticConfig=function(a){var b=this,c={defaultConfigValues:{},userConfigValues:{}};b.get("userConfigValues")&&(c.userConfigValues=b.get("userConfigValues"));var d=$fh&&$fh.app_props?$fh.app_props.appid:a.appid,e=$fh&&$fh.app_props?$fh.app_props.mode:"dev";b.set("appId",d),b.set("env",e),$fh&&$fh._getDeviceId?b.set("deviceId",$fh._getDeviceId()):b.set("deviceId","notset"),b._initMBaaS(a),a||(a={}),a.config_admin_user&&delete a.config_admin_user,c.defaultConfigValues=a;var f={sent_save_min:5,sent_save_max:1e3,targetWidth:640,targetHeight:480,quality:50,debug_mode:!1,logger:!1,max_retries:3,timeout:7,log_line_limit:5e3,log_email:"test@example.com",log_level:3,log_levels:["error","warning","log","debug"],config_admin_user:!0,picture_source:"both",saveToPhotoAlbum:!0,encodingType:"jpeg",sent_items_to_keep_list:[5,10,20,30,40,50,100]};for(var g in f)c.defaultConfigValues[g]=f[g];b.fromJSON(c)},c.prototype._initMBaaS=function(a){var b=this;a=a||{};var c=$fh.cloud_props,d=$fh.app_props;d&&(f=d.host),c&&c.hosts&&(f=c.hosts.url),"string"==typeof a.cloudHost&&(f=a.cloudHost),b.set("mbaasBaseUrl","/mbaas");b.get("appId");b.set("formUrls",{forms:"/forms/:appId",form:"/forms/:appId/:formId",theme:"/forms/:appId/theme",formSubmission:"/forms/:appId/:formId/submitFormData",fileSubmission:"/forms/:appId/:submissionId/:fieldId/:hashName/submitFormFile",base64fileSubmission:"/forms/:appId/:submissionId/:fieldId/:hashName/submitFormFileBase64",submissionStatus:"/forms/:appId/:submissionId/status",formSubmissionDownload:"/forms/:appId/submission/:submissionId",fileSubmissionDownload:"/forms/:appId/submission/:submissionId/file/:fileGroupId",completeSubmission:"/forms/:appId/:submissionId/completeSubmission",config:"/forms/:appid/config/:deviceId"}),b.set("statusUrl","/sys/info/ping")},c.prototype.setOnline=function(){var a=e;e=!0,a||this.emit("online")},c.prototype.setOffline=function(){var a=e;e=!1,a&&this.emit("offline")},c.prototype.isOnline=function(){return b.utils.isPhoneGap()&&navigator.connection&&navigator.connection.type?e===!0&&navigator.connection.type!==Connection.NONE:e===!0},c.prototype.isStudioMode=function(){return this.get("studioMode",!1)},a.config=new c,a}(b.models||{}),b.models=function(a){function c(){d.call(this,{_type:"forms",_ludid:"forms_list",loaded:!1})}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.isFormUpdated=function(a){var b=a.get("_id"),c=a.getLastUpdate(),d=this.getFormMetaById(b);return d?c!==d.lastUpdatedTimestamp:!1},c.prototype.setLocalId=function(){$fh.forms.log.e("Forms setLocalId. Not Permitted for Forms.")},c.prototype.getFormMetaById=function(a){$fh.forms.log.d("Forms getFormMetaById ",a);for(var b=this.getFormsList(),c=0;c<b.length;c++){var d=b[c];if(d._id===a)return d}return $fh.forms.log.e("Forms getFormMetaById: No form found for id: ",a),null},c.prototype.size=function(){return this.get("forms").length},c.prototype.getFormsList=function(){return this.get("forms",[])},c.prototype.getFormIdByIndex=function(a){return $fh.forms.log.d("Forms getFormIdByIndex: ",a),this.getFormsList()[a]._id},a.forms=new c,a}(b.models||{}),b.models=function(a){function c(a,c){function f(){function a(){return h.fromJSON(j),h.initialise(),e[h.getFormId()]=h,c(null,h)}return $fh.forms.log.d("Form: loadFromLocal ",i,j,k,l),e[k]?(c(null,e[k]),e[k]):j?a():void h.refresh(!1,function(a,b){return a?c(a):(b.initialise(),e[k]=b,c(null,b))})}function g(){function a(a){$fh.forms.log.d("Form: checkForUpdate",i,j,k,l),a.refresh(!1,function(d,f){d&&$fh.forms.log.e("Error refreshing form from local: ",d),b.models.forms.isFormUpdated(a)?a.refresh(!0,function(b,d){return b?c(b,null):(a.initialise(),e[k]=d,c(b,d))}):(a.initialise(),e[k]=f,c(d,f))})}return $fh.forms.log.d("Form: loadFromRemote",i,j,k,l),e[k]&&($fh.forms.log.d("Form: loaded from cache",i,j,k,l),!b.models.forms.isFormUpdated(e[k]))?(c(null,e[k]),e[k]):void a(h)}var h=this,i=a.rawMode||!1,j=a.rawData||null,k=a.formId,l=a.fromRemote;return $fh.forms.log.d("Form: ",i,j,k,l),"function"!=typeof l&&"function"!=typeof c?$fh.forms.log.e("a callback function is required for initialising form data. new Form (formId, [isFromRemote], cb)"):("function"==typeof l&&(c=l,l=!1),k?(d.call(h,{_id:k,_type:"form"}),h.set("_id",k),h.setLocalId(h.genLocalId(k)),void(i===!0?f():g())):c("Cannot initialise a form object without an id. id:"+k,null))}var d=b.models.Model;a.Form=c;var e={};return b.utils.extend(c,d),c.prototype.getLastUpdate=function(){return $fh.forms.log.d("Form: getLastUpdate"),this.get("lastUpdatedTimestamp")},c.prototype.genLocalId=function(a){return a="string"==typeof a?a:this.get("_id",""),"form_"+a},c.prototype.initialise=function(){this.filterAdminFields(),this.initialisePage(),this.initialiseFields(),this.initialiseRules()},c.prototype.filterAdminFields=function(){for(var a=this.getPagesDef(),b={},c=0;c<a.length;c++){for(var d=a[c],e=d.fields,f=[],g=0,h=0;h<e.length;h++){var i=e[h];i.adminOnly||(b[i._id]={page:c,field:g},g++,f.push(i))}a[c].fields=f}this.set("pages",a),this.set("fieldRef",b)},c.prototype.initialiseFields=function(){$fh.forms.log.d("Form: initialiseFields");var a=this.getFieldRef();this.fields={};for(var c in a){var d=a[c],e=d.page,f=d.field;if(void 0===e||void 0===f)throw"Corruptted field reference";var g=this.getFieldDefByIndex(e,f);if(!g)throw"Field def is not found.";this.fields[c]=new b.models.Field(g,this)}},c.prototype.initialiseRules=function(){$fh.forms.log.d("Form: initialiseRules"),this.rules={};for(var a=this.getPageRules(),c=this.getFieldRules(),d=[],e=0;e<a.length;e++){var f=a[e];d.push({type:"page",definition:f})}for(e=0;e<c.length;e++){var g=c[e];d.push({type:"field",definition:g})}for(e=0;e<d.length;e++)for(var h=d[e],i=new b.models.Rule(h),j=i.getRelatedFieldId(),k=0;k<j.length;k++){var l=j[k];this.rules[l]||(this.rules[l]=[]),this.rules[l].push(i)}},c.prototype.getRulesByFieldId=function(a){return $fh.forms.log.d("Form: getRulesByFieldId"),this.rules[a]},c.prototype.initialisePage=function(){$fh.forms.log.d("Form: initialisePage");var a=this.getPagesDef();this.pages=[];for(var c=0;c<a.length;c++){var d=a[c],e=new b.models.Page(d,this);this.pages.push(e)}},c.prototype.getPageNumberByFieldId=function(a){return a?this.getFieldRef()[a].page:null},c.prototype.getPageModelList=function(){return this.pages},c.prototype.getName=function(){return this.get("name","")},c.prototype.getDescription=function(){return this.get("description","")},c.prototype.getPageRules=function(){return this.get("pageRules",[])},c.prototype.getFieldRules=function(){return this.get("fieldRules",[])},c.prototype.getFieldRef=function(){return this.get("fieldRef",{})},c.prototype.getPagesDef=function(){return this.get("pages",[])},c.prototype.getPageRef=function(){return this.get("pageRef",{})},c.prototype.getFieldModelById=function(a){return this.fields[a]},c.prototype.getFieldModelByCode=function(a){var b=this;if(!a||"string"!=typeof a)return null;for(var c in b.fields){var d=b.fields[c];if(null!==d.getCode()&&d.getCode()===a)return d}return null},c.prototype.getFieldDefByIndex=function(a,b){$fh.forms.log.d("Form: getFieldDefByIndex: ",a,b);var c=this.getPagesDef(),d=c[a];if(d){var e=d.fields?d.fields:[],f=e[b];if(f)return f}return $fh.forms.log.e("Form: getFieldDefByIndex: No field found for page and field index: ",a,b),null},c.prototype.getPageModelById=function(a){$fh.forms.log.d("Form: getPageModelById: ",a);var b=this.getPageRef()[a];return"undefined"!=typeof b?this.pages[b]:void $fh.forms.log.e("page id is not found in pageRef: "+a)},c.prototype.newSubmission=function(){return $fh.forms.log.d("Form: newSubmission"),b.models.submission.newInstance(this)},c.prototype.getFormId=function(){return this.get("_id")},c.prototype.removeFromCache=function(){$fh.forms.log.d("Form: removeFromCache"),e[this.getFormId()]&&delete e[this.getFormId()]},c.prototype.getFileFieldsId=function(){$fh.forms.log.d("Form: getFileFieldsId");var a=[];for(var b in this.fields){var c=this.fields[b];("file"===c.getType()||"photo"===c.getType()||"signature"===c.getType())&&a.push(b)}return a},c.prototype.getRuleEngine=function(){if($fh.forms.log.d("Form: getRuleEngine"),this.rulesEngine)return this.rulesEngine;var a=this.getProps();return this.rulesEngine=new b.RulesEngine(a),this.rulesEngine},a}(b.models||{}),b.models=function(a){function c(a){$fh.forms.log.d("FileSubmission ",a),d.call(this,{_type:"fileSubmission",data:a})}var d=b.models.Model;return a.FileSubmission=c,b.utils.extend(c,d),c.prototype.loadFile=function(a){$fh.forms.log.d("FileSubmission loadFile");var c=this.getHashName(),d=this;b.stores.localStorage.readFile(c,function(b,e){b?($fh.forms.log.e("FileSubmission loadFile. Error reading file",c,b),a(b)):($fh.forms.log.d("FileSubmission loadFile. File read correctly",c,e),d.fileObj=e,a(null))})},c.prototype.getProps=function(){return this.fileObj?($fh.forms.log.d("FileSubmissionDownload: file object found"),this.fileObj):void $fh.forms.log.e("FileSubmissionDownload: no file object found")},c.prototype.setSubmissionId=function(a){$fh.forms.log.d("FileSubmission setSubmissionId.",a),this.set("submissionId",a)},c.prototype.getSubmissionId=function(){return this.get("submissionId")},c.prototype.getHashName=function(){return this.get("data").hashName},c.prototype.getFieldId=function(){return this.get("data").fieldId},a}(b.models||{}),b.models=function(a){function c(a){$fh.forms.log.d("FileSubmissionDownload ",a),d.call(this,{_type:"fileSubmissionDownload",data:a})}var d=b.models.Model;return a.FileSubmissionDownload=c,b.utils.extend(c,d),c.prototype.setSubmissionId=function(a){$fh.forms.log.d("FileSubmission setSubmissionId.",a),this.set("submissionId",a)},c.prototype.getSubmissionId=function(){return $fh.forms.log.d("FileSubmission getSubmissionId: ",this.get("submissionId")),this.get("submissionId","")},c.prototype.getHashName=function(){return $fh.forms.log.d("FileSubmission getHashName: ",this.get("data").hashName),this.get("data",{}).hashName},c.prototype.getFieldId=function(){return $fh.forms.log.d("FileSubmission getFieldId: ",this.get("data").fieldId),this.get("data",{}).fieldId},c.prototype.getFileMetaData=function(){return $fh.forms.log.d("FileSubmission getFileMetaData: ",this.get("data")),this.get("data")?$fh.forms.log.d("FileSubmission getFileMetaData: data found",this.get("data")):$fh.forms.log.e("FileSubmission getFileMetaData: No data found"),this.get("data",{})},c.prototype.getFileGroupId=function(){return $fh.forms.log.d("FileSubmission getFileGroupId: ",this.get("data")),this.get("data",{}).groupId||"notset"},c.prototype.getRemoteFileURL=function(){function a(){var a=c.getSubmissionId(),d=c.getFileGroupId(),e=b.config.get("formUrls",{}).fileSubmissionDownload;return e?(e=e.replace(":submissionId",a),e=e.replace(":fileGroupId",d),e=e.replace(":appId",b.config.get("appId","notSet")),b.models.config.getCloudHost()+"/mbaas"+e):"notset"}var c=this;return $fh.forms.log.d("FileSubmission getRemoteFileURL: "),a()},a}(b.models||{}),b.models=function(a){function c(a){d.call(this,{_type:"formSubmission",data:a})}var d=b.models.Model;return a.FormSubmission=c,b.utils.extend(c,d),c.prototype.getProps=function(){return this.get("data")},c.prototype.getFormId=function(){return this.get("data")||$fh.forms.log.e("No form data for form submission"),this.get("data").formId},a}(b.models||{}),b.models=function(a){function c(a){d.call(this,{_type:"completeSubmission",submissionId:a.get("submissionId"),localSubmissionId:a.get("localSubmissionId")})}var d=b.models.Model;return a.FormSubmissionComplete=c,b.utils.extend(c,d),a}(b.models||{}),b.models=function(a){function c(a){d.call(this,{_type:"formSubmissionDownload",data:a})}var d=b.models.Model;return a.FormSubmissionDownload=c,b.utils.extend(c,d),c.prototype.getSubmissionId=function(){return this.get("data").get("submissionId","not-set")},a}(b.models||{}),b.models=function(a){function c(a){d.call(this,{_type:"submissionStatus",submissionId:a.get("submissionId"),localSubmissionId:a.get("localSubmissionId")})}var d=b.models.Model;return a.FormSubmissionStatus=c,b.utils.extend(c,d),a}(b.models||{}),b.models=function(a){function c(a){d.call(this,a),this.set("_type","base64fileSubmission")}var d=b.models.FileSubmission;return a.Base64FileSubmission=c,b.utils.extend(c,d),a}(b.models||{}),b.models=function(a){function c(){d.call(this,{_type:"submissions",_ludid:"submissions_list",submissions:[]})}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.setLocalId=function(){$fh.forms.log.e("Submissions setLocalId. Not Permitted for submissions.")},c.prototype.saveSubmission=function(a,b){$fh.forms.log.d("Submissions saveSubmission");var c=this;this.updateSubmissionWithoutSaving(a),this.clearSentSubmission(function(){c.saveLocal(b)})},c.prototype.updateSubmissionWithoutSaving=function(a){$fh.forms.log.d("Submissions updateSubmissionWithoutSaving");var b=this.pruneSubmission(a),c=b._ludid;if(c){var d=this.findMetaByLocalId(c),e=this.get("submissions");d?(e.splice(e.indexOf(d),1),e.push(b)):e.push(b)}else $fh.forms.log.e("Invalid submission for localId:",c,JSON.stringify(a))},c.prototype.clearSentSubmission=function(a){$fh.forms.log.d("Submissions clearSentSubmission");var b=this,c=$fh.forms.config.get("max_sent_saved")?$fh.forms.config.get("max_sent_saved"):$fh.forms.config.get("sent_save_min"),d=(this.get("submissions"),this.getSubmitted());if(d.length>c){$fh.forms.log.d("Submissions clearSentSubmission pruning sentSubmissions.length>maxSent"),d=d.sort(function(a,b){return Date(a.submittedDate)<Date(b.submittedDate)?1:-1});for(var e=[];d.length>c;)e.push(d.pop());for(var f=e.length,g=0;g<e.length;g++){var h=e[g];b.getSubmissionByMeta(h,function(b,c){c.clearLocal(function(b){b&&$fh.forms.log.e("Submissions clearSentSubmission submission clearLocal",b),f--,0===f&&a(null,null)})})}}else a(null,null)},c.prototype.findByFormId=function(a){$fh.forms.log.d("Submissions findByFormId",a);for(var b=[],c=this.get("submissions"),d=0;d<c.length;d++){var e=c[d];c[d].formId===a&&b.push(e)}return b},c.prototype.getSubmissions=function(){return this.get("submissions")},c.prototype.getSubmissionMetaList=c.prototype.getSubmissions,c.prototype.getSubmissionByLocalId=function(a,b){var c=this;$fh.forms.log.d("Submissions getSubmissionByLocalId",a);var d=c.findMetaByLocalId(a);return d?void c.getSubmissionByMeta(d,b):b("No submissions for localId: "+a)},c.prototype.getSubmissionByRemoteId=function(a,b){var c=this;$fh.forms.log.d("Submissions getSubmissionByRemoteId",a);var d=c.findMetaByRemoteId(a);return d?void c.getSubmissionByMeta(d,b):b("No submissions for remoteId: "+a)},c.prototype.findMetaByLocalId=function(a){$fh.forms.log.d("Submissions findMetaByLocalId",a);for(var b=this.get("submissions"),c=0;c<b.length;c++){var d=b[c];if(b[c]._ludid===a)return d}return $fh.forms.log.e("Submissions findMetaByLocalId: No submissions for localId: ",a),null},c.prototype.findMetaByRemoteId=function(a){a=a||"",$fh.forms.log.d("Submissions findMetaByRemoteId: "+a);for(var b=this.get("submissions"),c=0;c<b.length;c++){var d=b[c];if(b[c].submissionId&&b[c].submissionId===a)return d}return null},c.prototype.pruneSubmission=function(a){$fh.forms.log.d("Submissions pruneSubmission");for(var b=["_id","_ludid","status","formName","formId","_localLastUpdate","createDate","submitDate","deviceFormTimestamp","errorMessage","submissionStartedTimestamp","submittedDate","submissionId","saveDate","uploadStartDate"],c=a.getProps(),d={},e=0;e<b.length;e++){var f=b[e];d[f]=c[f]}return d},c.prototype.clear=function(a){$fh.forms.log.d("Submissions clear");var b=this;this.clearLocal(function(c){c?($fh.forms.log.e(c),a(c)):(b.set("submissions",[]),a(null,null))})},c.prototype.getDrafts=function(a){return $fh.forms.log.d("Submissions getDrafts: ",a),a||(a={}),a.status="draft",this.findByStatus(a)},c.prototype.getPending=function(a){return $fh.forms.log.d("Submissions getPending: ",a),a||(a={}),a.status="pending",this.findByStatus(a)},c.prototype.getSubmitted=function(a){return $fh.forms.log.d("Submissions getSubmitted: ",a),a||(a={}),a.status="submitted",this.findByStatus(a)},c.prototype.getError=function(a){return $fh.forms.log.d("Submissions getError: ",a),a||(a={}),a.status="error",this.findByStatus(a)},c.prototype.getInProgress=function(a){return $fh.forms.log.d("Submissions getInProgress: ",a),a||(a={}),a.status="inprogress",this.findByStatus(a)},c.prototype.getDownloaded=function(a){return $fh.forms.log.d("Submissions getDownloaded: ",a),a||(a={}),a.status="downloaded",this.findByStatus(a)},c.prototype.findByStatus=function(a){if($fh.forms.log.d("Submissions findByStatus: ",a),a||(a={}),"string"==typeof a&&(a={status:a}),null===a.status)return[];for(var b=a.status,c=a.formId,d=a.sortField||"createDate",e=this.get("submissions",[]),f=[],g=0;g<e.length;g++)b.indexOf(e[g].status)>-1&&(null!=c?e[g].formId===c&&f.push(e[g]):f.push(e[g]));return f=f.sort(function(a,b){return Date(a[d])<Date(b[d])?-1:1})},c.prototype.getSubmissionByMeta=function(a,c){$fh.forms.log.d("Submissions getSubmissionByMeta: ",a);var d=a._ludid;d?b.models.submission.fromLocal(d,c):($fh.forms.log.e("Submissions getSubmissionByMeta: local id not found for retrieving submission.",d,a),c("local id not found for retrieving submission"))},c.prototype.removeSubmission=function(a,b){$fh.forms.log.d("Submissions removeSubmission: ",a);var c=this.indexOf(a);c>-1&&this.get("submissions").splice(c,1),this.saveLocal(b)},c.prototype.indexOf=function(a,b){$fh.forms.log.d("Submissions indexOf: ",a);for(var c=this.get("submissions"),d=0;d<c.length;d++){c[d];if(c[d]._ludid===a)return d}return-1},a.submissions=new c,a}(b.models||{}),b.models=function(a){function c(a,c){c=c?c:{};var d=new e(a,c);return c.submissionId&&b.models.submissions.updateSubmissionWithoutSaving(d),d}function d(a,b){if($fh.forms.log.d("Submission fromLocal: ",a),f[a])$fh.forms.log.d("Submission fromLocal from cache: ",a),b(null,f[a]);else{$fh.forms.log.d("Submission fromLocal not in cache. Loading from local storage.: ",a);var c=new e;c.setLocalId(a),c.loadLocal(function(c,d){if(c)$fh.forms.log.e("Submission fromLocal. Error loading from local: ",a,c),b(c);else{if($fh.forms.log.d("Submission fromLocal. Load from local sucessfull: ",a),d.isDownloadSubmission())return b(null,d);d.reloadForm(function(c,e){c?($fh.forms.log.e("Submission fromLocal. reloadForm. Error re-loading form: ",a,c),b(c)):($fh.forms.log.d("Submission fromLocal. reloadForm. Re-loading form successfull: ",a),f[a]=d,b(null,d))})}})}}function e(a,c){c=c||{},$fh.forms.log.d("Submission: ",c),g.call(this,{_type:"submission"}),"undefined"!=typeof a&&a?(this.set("formName",a.get("name")),this.set("formId",a.get("_id")),this.set("deviceFormTimestamp",a.getLastUpdate()),this.set("createDate",b.utils.getTime()),this.set("timezoneOffset",b.utils.getTime(!0)),this.set("appId",b.config.get("appId")),this.set("appEnvironment",b.config.get("env")),this.set("appCloudName",""),this.set("comments",[]),this.set("formFields",[]),this.set("saveDate",null),this.set("submitDate",null),this.set("uploadStartDate",null),this.set("submittedDate",null),this.set("userId",null),this.set("filesInSubmission",[]),this.set("deviceId",b.config.get("deviceId")),this.transactionMode=!1,this.applyDefaultValues(a)):(this.set("appId",b.config.get("appId")),c.submissionId?(this.set("downloadSubmission",!0),this.setRemoteSubmissionId(c.submissionId)):this.set("status","new")),this.set("status","new"),this.genLocalId();var d=this.getLocalId();f[d]=this}a.submission={newInstance:c,fromLocal:d};var f={},g=b.models.Model,h={"new":["draft","pending"],draft:["pending","draft"],pending:["inprogress","error","draft"],inprogress:["pending","error","inprogress","downloaded","queued"],submitted:[],error:["draft","pending","error"],downloaded:[],queued:["error","submitted"]};return b.utils.extend(e,g),e.prototype.saveDraft=function(a){$fh.forms.log.d("Submission saveDraft: ");var c="draft",d=this;this.set("timezoneOffset",b.utils.getTime(!0)),this.set("saveDate",b.utils.getTime()),this.changeStatus(c,function(b){return b?a(b):(d.emit("savedraft"),void a(null,null))})},e.prototype.validateField=function(a,b){$fh.forms.log.d("Submission validateField: ",a);var c=this;this.getForm(function(d,e){if(d)b(d);else{var f=c.getProps(),g=e.getRuleEngine();g.validateField(a,f,b)}})},e.prototype.checkRules=function(a){$fh.forms.log.d("Submission checkRules: ");var b=this;this.getForm(function(c,d){if(c)a(c);else{var e=b.getProps(),f=d.getRuleEngine();f.checkRules(e,a)}})},e.prototype.performValidation=function(a){var b=this;b.getForm(function(c,d){if(c)return $fh.forms.log.e("Submission submit: Error getting form ",c),a(c);var e=d.getRuleEngine(),f=b.getProps();e.validateForm(f,a)})},e.prototype.validateSubmission=function(a){var b=this;b.performValidation(function(c,d){if(c)return a(c);var e=d.validation;return e.valid?a(null,e.valid):(b.emit("validationerror",e),void a(null,e.valid))})},e.prototype.removeHiddenFieldValues=function(a){var b=this;async.waterfall([function(a){b.checkRules(a)},function(a,c){b.getForm(function(b,d){return c(b,a,d)})},function(a,c,d){var e=a.actions,f=["fields","pages"],g=_.map(f,function(a){var b=[],d=_.map(e[a]||{},function(a,b){return"hide"===a.action?b:null});return b="pages"===a?_.map(d,function(a){var b=c.getPageModelById(a)||{};return b.fieldsIds}):d,_.compact(_.flatten(b))});g=_.flatten(g),async.forEachSeries(g,function(a,c){b.removeFieldValue(a,null,c)},function(a){return a&&$fh.forms.log.e("Error removing fields",a),d(a)})}],a)},e.prototype.submit=function(a){var c=this;$fh.forms.log.d("Submission submit: ");var d="pending";
c.set("timezoneOffset",b.utils.getTime(!0)),c.pruneNullValues(),async.waterfall([function(a){c.removeHiddenFieldValues(a)},function(a){c.pruneRemovedFields(a)},function(a){c.performValidation(function(b,c){return b&&$fh.forms.log.e("Submission submit validateForm: Error validating form ",b),a(b,c)})},function(a,b){$fh.forms.log.d("Submission submit: validateForm. Completed result",a);var e=a.validation||{};e.valid?($fh.forms.log.d("Submission submit: validateForm. Completed Form Valid",a),c.set("submitDate",new Date),c.changeStatus(d,function(a){a?b(a):(c.emit("submit"),b(null,null))})):($fh.forms.log.d("Submission submit: validateForm. Completed Validation error",a),c.emit("validationerror",e),b("Validation error"))}],a)},e.prototype.getUploadTask=function(a){var c=this.getUploadTaskId();c?b.models.uploadManager.getTaskById(c,a):a(null,null)},e.prototype.getFormId=function(){return this.get("formId")},e.prototype.getFormSubmittedAgainst=function(){return this.get("formSubmittedAgainst")},e.prototype.getDownloadTask=function(a){var b=this;if($fh.forms.log.d("getDownloadTask"),b.isDownloadSubmission())b.getUploadTask(a);else if(a&&"function"==typeof a)return $fh.forms.log.e("Submission is not a download submission"),a("Submission is not a download submission")},e.prototype.cancelUploadTask=function(a){var c="submit",d=this;b.models.uploadManager.cancelSubmission(this,function(b){b&&$fh.forms.log.e(b),d.changeStatus(c,a)})},e.prototype.getUploadTaskId=function(){return this.get("uploadTaskId")},e.prototype.setUploadTaskId=function(a){this.set("uploadTaskId",a)},e.prototype.isInProgress=function(){return"inprogress"===this.get("status")},e.prototype.isDownloaded=function(){return"downloaded"===this.get("status")},e.prototype.isSubmitted=function(){return"submitted"===this.get("status")},e.prototype.submitted=function(a){var c=this;if(c.isDownloadSubmission()){var d="Downloaded submissions should not call submitted function.";return $fh.forms.log.e(d),a(d)}$fh.forms.log.d("Submission submitted called");var e="submitted";c.set("submittedDate",b.utils.getTime()),c.changeStatus(e,function(b){b?($fh.forms.log.e("Error setting submitted status "+b),a(b)):($fh.forms.log.d("Submitted status set for submission "+c.get("submissionId")+" with localId "+c.getLocalId()),c.emit("submitted",c.get("submissionId")),a(null,null))})},e.prototype.queued=function(a){var c=this;if(c.isDownloadSubmission()){var d="Downloaded submissions should not call queued function.";return $fh.forms.log.e(d),a(d)}var e="queued";c.set("queuedDate",b.utils.getTime()),c.changeStatus(e,function(b){b?($fh.forms.log.e("Error setting queued status "+b),a(b)):($fh.forms.log.d("Queued status set for submission "+c.get("submissionId")+" with localId "+c.getLocalId()),c.emit("queued",c.get("submissionId")),a(null,c))})},e.prototype.downloaded=function(a){$fh.forms.log.d("Submission Downloaded called");var c=this,d="downloaded";c.set("downloadedDate",b.utils.getTime()),c.pruneNullValues(),c.changeStatus(d,function(b){b?($fh.forms.log.e("Error setting downloaded status "+b),a(b)):($fh.forms.log.d("Downloaded status set for submission "+c.get("submissionId")+" with localId "+c.getLocalId()),c.emit("downloaded",c.get("submissionId")),a(null,c))})},e.prototype.pruneNullValues=function(){for(var a=this.getFormFields(),b=0;b<a.length;b++)a[b].fieldValues=a[b].fieldValues||[],a[b].fieldValues=a[b].fieldValues.filter(function(a){return null!==a&&"undefined"!=typeof a});this.setFormFields(a)},e.prototype.pruneRemovedFields=function(a){var b=this,c=this.getFormFields(),d=[],e=[];this.getForm(function(f,g){return f?a(f):(_.each(c,function(a){var b=a.fieldId;g.fields.hasOwnProperty(b)?d.push(a):e.push(b)}),void async.forEach(e,function(a,c){b.removeFieldValue(a,null,c)},function(c){b.set("formFields",d),a(c)}))})},e.prototype.applyDefaultValues=function(a){var b=this.getFormFields();_.each(a.fields,function(a,c){var d=a.getDefaultValue();if(d){var e=_.findWhere(b,{fieldId:c});e||b.push({fieldId:c,fieldValues:[d]})}})},e.prototype.genLocalId=function(){var a=b.utils.localId(this),c=this.get("formId")||Math.ceil(1e5*Math.random());this.setLocalId(c+"_"+a)},e.prototype.changeStatus=function(a,b){if(this.isStatusValid(a)){this.set("status",a),this.saveToList(function(a){a&&$fh.forms.log.e(a)}),this.saveLocal(b)}else $fh.forms.log.e("Target status is not valid: "+a),b("Target status is not valid: "+a)},e.prototype.upload=function(a){var c="inprogress",d=this;return this.isStatusValid(c)?(this.set("status",c),this.set("uploadStartDate",b.utils.getTime()),b.models.submissions.updateSubmissionWithoutSaving(this),b.models.uploadManager.queueSubmission(d,function(b,c){b?a(b):(c.set("error",null),c.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload task: "+a)}),d.emit("inprogress",c),c.on("progress",function(a){$fh.forms.log.d("Emitting upload progress for submission: "+d.getLocalId()+JSON.stringify(a)),d.emit("progress",a)}),a(null,c))}),void 0):a("Invalid Status to upload a form submission.")},e.prototype.download=function(a){var c=this;$fh.forms.log.d("Starting download for submission: "+c.getLocalId());var d="pending";return this.isStatusValid(d)?(this.set("status",d),d="inprogress",this.isStatusValid(d)?(this.set("status",d),void b.models.uploadManager.queueSubmission(c,function(b,d){return b?a(b):(d.set("error",null),d.saveLocal(function(a){a&&$fh.forms.log.e("Error saving download task: "+a)}),c.emit("inprogress",d),d.on("progress",function(a){$fh.forms.log.d("Emitting download progress for submission: "+c.getLocalId()+JSON.stringify(a)),c.emit("progress",a)}),a(null,d))})):a("Invalid Status to dowload a form submission")):a("Invalid Status to download a form submission.")},e.prototype.saveToList=function(a){b.models.submissions.saveSubmission(this,a)},e.prototype.error=function(a,b){this.set("errorMessage",a);var c="error";this.changeStatus(c,b),this.emit("error",a)},e.prototype.getStatus=function(){return this.get("status")},e.prototype.getErrorMessage=function(){return this.get("errorMessage","No Error")},e.prototype.isStatusValid=function(a){$fh.forms.log.d("isStatusValid. Target Status: "+a+" Current Status: "+this.get("status").toLowerCase());var b=this.get("status").toLowerCase(),c=h[b];return c.indexOf(a)>-1?!0:(this.set("status","error"),!1)},e.prototype.addComment=function(a,c){var d=b.utils.getTime(),e=d.getTime(),f={madeBy:"undefined"==typeof c?"":c.toString(),madeOn:d,value:a,timeStamp:e};return this.getComments().push(f),e},e.prototype.getComments=function(){return this.get("comments")},e.prototype.removeComment=function(a){for(var b=this.getComments(),c=0;c<b.length;c++){var d=b[c];if(d.timeStamp===a)return void b.splice(c,1)}},e.prototype.populateFilesInSubmission=function(){for(var a=this,b=[],c=a.getSubmissionFiles(),d=0;d<c.length;d++)c[d].fileName?b.push(c[d].fileName):c[d].hashName&&b.push(c[d].hashName);a.set("filesInSubmission",c)},e.prototype.getSubmissionFiles=function(){var a=this;$fh.forms.log.d("In getSubmissionFiles: "+a.getLocalId());for(var b=[],c=a.getFormFields(),d=0;d<c.length;d++)for(var e=c[d].fieldValues||[],f=0;f<e.length;f++)e[f]&&e[f].fileName?b.push(e[f]):e[f]&&e[f].hashName&&b.push(e[f]);return b},e.prototype.addInputValue=function(a,b){function c(c,d){f.tmpFields[g]||(f.tmpFields[g]=[]),a.isStore=!1,d.processInput(a,function(a,c){return a?b(a):(h>-1?f.tmpFields[g][h]=c:f.tmpFields[g].push(c),b(null,c))})}function d(c,d){var e=f.getInputValueObjectById(g);h>-1&&e.fieldValues[h]&&("string"==typeof e.fieldValues[h].hashName?a.previousFile=e.fieldValues[h]:a.previousValue=e.fieldValues[h]),d.processInput(a,function(a,c){return a?b(a):(h>-1?e.fieldValues[h]=c:e.fieldValues.push(c),c&&"string"==typeof c.hashName&&f.pushFile(c.hashName),b(null,c))})}function e(a,e){var h=e.getFieldModelById(g);return h?void(f.transactionMode?c(e,h):d(e,h)):b("No field model found for fieldId "+g)}$fh.forms.log.d("Adding input value: ",JSON.stringify(a||{}));var f=this,g=a.fieldId,h=(a.value,void 0===a.index?-1:a.index);return g?void this.getForm(e):b("Invalid parameters. fieldId is required")},e.prototype.pushFile=function(a){var b=this.get("filesInSubmission",[]);"string"==typeof a&&-1===b.indexOf(a)&&(b.push(a),this.set("filesInSubmission",b))},e.prototype.removeFileValue=function(a){var b=this.get("filesInSubmission",[]);"string"==typeof a&&b.indexOf(a)>-1&&(b.splice(b.indexOf(a),1),this.set("filesInSubmission",b))},e.prototype.getInputValueByFieldId=function(a,b){var c=this.getInputValueObjectById(a).fieldValues;this.getForm(function(d,e){var f=e.getFieldModelById(a);f.convertSubmission(c,b)})},e.prototype.reset=function(){var a=this;a.clearLocalSubmissionFiles(function(b){a.set("formFields",[])})},e.prototype.isDownloadSubmission=function(){return this.get("downloadSubmission")===!0},e.prototype.getSubmissionFile=function(a,c){b.stores.localStorage.readFile(a,c)},e.prototype.clearLocalSubmissionFiles=function(a){$fh.forms.log.d("In clearLocalSubmissionFiles");var c=this,d=c.get("filesInSubmission",[]);$fh.forms.log.d("Files to clear ",d);for(var e in d)$fh.forms.log.d("Clearing file "+d[e]),b.stores.localStorage.removeEntry(d[e],function(a){a&&$fh.forms.log.e("Error removing files from "+a)});a()},e.prototype.startInputTransaction=function(){this.transactionMode=!0,this.tmpFields={}},e.prototype.endInputTransaction=function(a){this.transactionMode=!1;var c={},d="",e=0,f=[],g="";if(a){c=this.tmpFields;for(d in c){var h=this.getInputValueObjectById(d);for(f=c[d],e=0;e<f.length;e++)g=f[e],h.fieldValues.push(g),"string"==typeof g.hashName&&this.pushFile(g.hashName)}this.tmpFields={}}else{c=this.tmpFields,this.tmpFields={};for(d in c)for(f=c[d],e=0;e<f.length;e++)g=f[e],"string"==typeof g.hashName&&b.stores.localStorage.removeEntry(g.hashName,function(a){$fh.forms.log.e("Error removing file from transaction ",a)})}},e.prototype.removeFieldValue=function(a,c,d){d=d||function(){};var e=this,f=[],g={};f=this.transactionMode?this.tmpFields.fieldId:this.getInputValueObjectById(a).fieldValues,null===c||"undefined"==typeof c?g=f.splice(0,f.length):f.length>c&&(g=f.splice(c,1,null)),async.forEach(g,function(a,c){return a&&a.hashName?void b.stores.localStorage.removeEntry(a.hashName,function(b){return b?$fh.forms.log.e("Error removing file: ",b,a):e.removeFileValue(a.hashName),c(null,a)}):c()},function(a){d(a)})},e.prototype.getInputValueObjectById=function(a){for(var b=this.getFormFields(),c=0;c<b.length;c++){var d=b[c];if(d.fieldId._id){if(d.fieldId._id===a)return d}else if(d.fieldId===a)return d}var e={fieldId:a,fieldValues:[]};return b.push(e),e},e.prototype.getForm=function(a){var c=b.models.Form,d=this.get("formId");return d?($fh.forms.log.d("FormId found for getForm: "+d),void new c({formId:d,rawMode:!0},a)):($fh.forms.log.e("No form Id specified for getForm"),a("No form Id specified for getForm"))},e.prototype.reloadForm=function(a){$fh.forms.log.d("Submission reload form");var c=b.models.Form,d=this.get("formId"),e=this;new c({formId:d,rawMode:!0},function(b,c){b?a(b):(e.form=c,e.get("deviceFormTimestamp",null)||e.set("deviceFormTimestamp",c.getLastUpdate()),a(null,c))})},e.prototype.getFileInputValues=function(a){var b=this;b.getFileFieldsId(function(c,d){return c?a(c):a(null,b.getInputValueArray(d))})},e.prototype.getFormFields=function(){return this.get("formFields",[])},e.prototype.setFormFields=function(a){return this.get("formFields",a)},e.prototype.getFileFieldsId=function(a){var b=this,c=[];if(b.isDownloadSubmission()){for(var d=b.getFormFields(),e=0;e<d.length;e++){var f=d[e].fieldId||{};("file"===f.type||"photo"===f.type||"signature"===f.type)&&f._id&&c.push(f._id)}return a(null,c)}b.getForm(function(b,c){return b?($fh.forms.log.e("Error getting form for getFileFieldsId"+b),a(b)):a(b,c.getFileFieldsId())})},e.prototype.updateFileLocalURI=function(a,b,c){$fh.forms.log.d("updateFileLocalURI: "+b);var d=this;return a=a||{},a.fileName&&b?void d.findFilePlaceholderFieldId(a.fileName,function(e,f){if(e)return c(e);if(!f.fieldId)return $fh.forms.log.e("No file field matches the placeholder name "+a.fileName),c("No file field matches the placeholder name "+a.fileName);var g=d.getInputValueObjectById(f.fieldId).fieldValues[f.valueIndex];g.localURI=b,d.getInputValueObjectById(f.fieldId).fieldValues[f.valueIndex]=g,d.saveLocal(c)}):($fh.forms.log.e("Submission: updateFileLocalURI : No fileName for submissionId : "+JSON.stringify(a)),c("Submission: updateFileLocalURI : No fileName for submissionId : "+JSON.stringify(a)))},e.prototype.findFilePlaceholderFieldId=function(a,b){var c=this,d={};c.getFileFieldsId(function(e,f){for(var g=0;g<f.length;g++)for(var h=f[g],i=c.getInputValueObjectById(h),j=0;j<i.fieldValues.length;j++){var k=i.fieldValues[j];k&&null!==k.fileName&&k.fileName===a&&(d.fieldId=h,d.valueIndex=j)}return b(null,d)})},e.prototype.getInputValueArray=function(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c],e=this.getInputValueObjectById(d),f=0;f<e.fieldValues.length;f++){var g=e.fieldValues[f];g&&(g.fieldId=d,b.push(g))}return b},e.prototype.clearLocal=function(a){var c=this;b.models.uploadManager.cancelSubmission(c,function(d,e){return d?($fh.forms.log.e(d),a(d)):void b.models.submissions.removeSubmission(c.getLocalId(),function(b){return b?($fh.forms.log.e(b),a(b)):void c.clearLocalSubmissionFiles(function(){g.prototype.clearLocal.call(c,function(b){return b?($fh.forms.log.e(b),a(b)):void a(null,null)})})})})},e.prototype.getRemoteSubmissionId=function(){return this.get("submissionId")||this.get("_id")},e.prototype.setRemoteSubmissionId=function(a){a&&(this.set("submissionId",a),this.set("_id",a))},a}(b.models||{}),b.models=function(a){function c(a,b){d.call(this,{_type:"field"}),a&&(this.fromJSON(a),this.genLocalId()),b&&(this.form=b)}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.isRequired=function(){return this.get("required")},c.prototype.getFieldValidation=function(){return this.getFieldOptions().validation||{}},c.prototype.getFieldDefinition=function(){return this.getFieldOptions().definition||{}},c.prototype.getMinRepeat=function(){var a=this.getFieldDefinition();return a.minRepeat||1},c.prototype.getMaxRepeat=function(){var a=this.getFieldDefinition();return a.maxRepeat||1},c.prototype.getFieldOptions=function(){return this.get("fieldOptions",{validation:{},definition:{}})},c.prototype.getPhotoOptions=function(){var a={targetWidth:null,targetHeight:null,quality:null,saveToPhotoAlbum:null,pictureSource:null,encodingType:null},b=this.getFieldDefinition();return a.targetWidth=b.photoWidth,a.targetHeight=b.photoHeight,a.quality=b.photoQuality,a.saveToPhotoAlbum=b.saveToPhotoAlbum,a.pictureSource=b.photoSource,a.encodingType=b.photoType,a},c.prototype.isRepeating=function(){return this.get("repeating",!1)},c.prototype.getType=function(){return this.get("type","text")},c.prototype.getFieldId=function(){return this.get("_id","")},c.prototype.getName=function(){return this.get("name","unknown")},c.prototype.getCode=function(){return this.get("fieldCode",null)},c.prototype.getHelpText=function(){return this.get("helpText","")},c.prototype.getDefaultValue=function(){var a=this.getFieldDefinition();return this.isMultiChoiceField()?this.getDefaultMultiValue():a.defaultValue},c.prototype.getDefaultMultiValue=function(){var a=this.getFieldDefinition();if(!a.options)return null;var b=_.filter(a.options,function(a){return a.checked});return _.isEmpty(b)?null:(b=_.pluck(b,"label"),this.isCheckboxField()?b:_.first(b))},c.prototype.isAdminField=function(){return this.get("adminOnly")},c.prototype.isMultiChoiceField=function(){return this.isCheckboxField()||this.isRadioField()||this.isDropdownField()},c.prototype.isCheckboxField=function(){return"checkboxes"===this.get("type")},c.prototype.isRadioField=function(){return"radio"===this.get("type")},c.prototype.isDropdownField=function(){return"dropdown"===this.get("type")},c.prototype.processInput=function(a,b){var c=this.getType(),d="process_"+c,e=a.value;return"undefined"==typeof e||null===e?b(null,e):void(this[d]&&"function"==typeof this[d]?this[d](a,b):b(null,e))},c.prototype.convertSubmission=function(a,b){var c=this.getType(),d="convert_"+c;this[d]&&"function"==typeof this[d]?this[d](a,b):b(null,a)},c.prototype.validate=function(a,b,c){"function"==typeof b&&(c=b,b=0),this.form.getRuleEngine().validateFieldValue(this.getFieldId(),a,b,c)},c.prototype.getRules=function(){var a=this.getFieldId();return this.form.getRulesByFieldId(a)},c.prototype.setVisible=function(a){this.set("visible",a),a?this.emit("visible"):this.emit("hidden")},a.Field=c,a}(b.models||{}),b.models.Field=function(a){return a.prototype.process_barcode=function(a,b){var c=a.value||{};return"string"==typeof c.text&&"string"==typeof c.format?b(null,{text:c.text,format:c.format}):b("Invalid barcode parameters.")},a}(b.models.Field||{}),b.models.Field=function(a){return a.prototype.getCheckBoxOptions=function(){var a=this.getFieldDefinition();if(a.options)return a.options;throw"checkbox choice definition is not found in field definition"},a.prototype.process_checkboxes=function(a,b){var c=a.value;c&&c.selections&&c.selections instanceof Array?b(null,c):b("the input value for processing checkbox field should be like {selections: [val1,val2]}")},a.prototype.convert_checkboxes=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].selections);b(null,c)},a}(b.models.Field||{}),b.models.Field=function(a){return a.prototype.process_file=function(a,c){function d(a,b){return a=a||"",b=b||"",a.length>0?a:b.indexOf(".png")>-1?"image/png":b.indexOf(".jpg")>-1?"image/jpeg":"application/octet-stream"}function e(a,b){if(a=a||"",a.length>0)return a;var c=b.lastIndexOf("/");return c>-1?b.slice(c):null}var f=a.value,g=void 0===a.isStore?!0:a.isStore,h=(new Date).getTime(),i=a.previousFile||{},j=null;if("undefined"==typeof f||null===f)return c("No input value to process_file",null);var k=f;f instanceof HTMLInputElement&&(k=f.files[0]||{}),"undefined"==typeof k.lastModifiedDate&&(h=b.utils.getTime().getTime()),k.lastModifiedDate instanceof Date&&(h=k.lastModifiedDate.getTime());var l=e(k.name||k.fileName,k.fullPath),m=d(k.type||k.fileType,l);if(null===l&&!i.fileName)return c("Expected picture to be PNG or JPEG but was null");if(i.hashName){if(l===i.hashName||k.hashName===i.hashName)return c(null,i);if("application/octet-stream"===m)return c(null,i)}i={fileName:l,fileSize:k.size,fileType:m,fileUpdateTime:h,hashName:"",imgHeader:"",contentType:"binary"};var n=l+(new Date).getTime()+Math.ceil(1e5*Math.random());b.utils.md5(n,function(a,d){j=d,a&&(j=n),j="filePlaceHolder"+j,0===l.length&&(i.fileName=j),i.hashName=j,g?b.stores.localStorage.saveFile(j,k,function(a,b){a?($fh.forms.log.e(a),c(a)):c(null,i)}):c(null,i)})},a}(b.models.Field||{}),b.models.Field=function(a){return a.prototype.process_location=function(a,b){var c=a.value,d=this.getFieldDefinition(),e={};switch(d.locationUnit){case"latlong":c.lat&&c["long"]?(e={lat:c.lat,"long":c["long"]},b(null,e)):b("the input values for latlong field is {lat: number, long: number}");break;case"eastnorth":c.zone&&c.eastings&&c.northings?(e={zone:c.zone,eastings:c.eastings,northings:c.northings},b(null,e)):b("the input values for northeast field is {zone: text, eastings: text, northings:text}");break;default:b("Invalid subtype type of location field, allowed types: latlong and eastnorth, was: "+d.locationUnit)}},a}(b.models.Field||{}),b.models.Field=function(a){return a.prototype.getMatrixRows=function(){var a=this.getFieldDefinition();if(a.rows)return a.rows;throw"matrix rows definition is not found in field definition"},a.prototype.getMatrixCols=function(){var a=this.getFieldDefinition();if(a.columns)return a.columns;throw"matrix columns definition is not found in field definition"},a}(b.models.Field||{}),b.models.Field=function(a){return a.prototype.getRadioOption=function(){var a=this.getFieldDefinition();if(a.options)return a.options;throw"Radio options definition is not found in field definition"},a}(b.models.Field||{}),b.models.Field=function(a){return a.prototype.getDropdownOptions=function(){var a=this.getFieldDefinition(),b=[];a.include_blank_option&&b.push({label:""});for(var c=a.options||[],d=0;d<c.length;d++)b.push(c[d]);return b},a}(b.models.Field||{}),b.models.Field=function(a){function c(a,c){var e=this,f=a.value,g=void 0===a.isStore?!0:a.isStore,h=a.previousFile||{};if("string"!=typeof f)return c("Expected base64 string image or file URI but parameter was not a string",null);if(f.length<1)return c("Expected base64 string or file uri but got string of lenght 0:  "+f,null);if(f.indexOf(";base64,")>-1){var i="",j=f.split(";base64,"),k=j[0].split(":")[1],l=k.split("/")[1],m=f.length;d(function(a,d){i=h.hashName?h.hashName:"filePlaceHolder"+d;var e={fileName:i+"."+l,hashName:i,contentType:"base64",fileSize:m,fileType:k,imgHeader:"data:"+k+";base64,",fileUpdateTime:(new Date).getTime()};g?b.stores.localStorage.updateTextFile(i,j[1],function(a,b){a?($fh.forms.log.e(a),c(a)):c(null,e)}):c(null,e)})}else b.utils.fileSystem.readAsFile(f,function(b,d){return b?c(b):(a.value=d,void e.process_file(a,c))})}function d(a){var c=(new Date).getTime()+""+Math.ceil(1e5*Math.random());b.utils.md5(c,a)}function e(a,b){if(0===a.length)b(null,a);else for(var c=a.length,d=0;d<a.length;d++){var e=a[d];f(e,function(a,d){c--,0===c&&b(null,[d])})}}function f(a,c){if(a){if(a.localURI)return c(null,a);var d=a.hashName;"base64"===a.contentType?b.stores.localStorage.readFileText(d,function(b,d){b&&$fh.forms.log.e(b),a.data=d,c(b,a)}):"binary"===a.contentType?b.stores.localStorage.readFile(d,function(b,e){b&&$fh.forms.log.e("Error reading file "+d,b),e&&e.localURL?a.data=e.localURL:a.data="file-not-found",c(b,a)}):$fh.forms.log.e("Error load image with invalid meta"+a.contentType)}else c(null,a)}return a.prototype.process_signature=c,a.prototype.convert_signature=e,a.prototype.process_photo=c,a.prototype.convert_photo=e,a}(b.models.Field||{}),b.models=function(a){function c(a,b){if("undefined"==typeof a||"undefined"==typeof b)throw"Page initialise failed: new Page(pageDefinitionJSON, parentFormModel)";d.call(this,{_type:"page"}),this.fromJSON(a),this.form=b,this.initialise()}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.initialise=function(){var a=this.getFieldDef();this.fieldsIds=[];for(var b=0;b<a.length;b++)this.fieldsIds.push(a[b]._id)},c.prototype.setVisible=function(a){this.set("visible",a),a?this.emit("visible"):this.emit("hidden")},c.prototype.getFieldDef=function(){return this.get("fields",[])},c.prototype.getFieldDef=function(){return this.get("fields",[])},c.prototype.getFieldModelList=function(){for(var a=[],b=0;b<this.fieldsIds.length;b++)a.push(this.form.getFieldModelById(this.fieldsIds[b]));return a},c.prototype.checkForSectionBreaks=function(){for(var a=0;a<this.fieldsIds.length;a++){var b=this.form.getFieldModelById(this.fieldsIds[a]);if(b&&"sectionBreak"===b.getType())return!0}return!1},c.prototype.getSections=function(){var a={},b=null,c=this.checkForSectionBreaks(),d=!1,e=this.get("_id");if(!c)return null;var f=this.form.getFieldModelById(this.fieldsIds[0]);"sectionBreak"!==f.getType()&&(d=!0);for(var g=0;g<this.fieldsIds.length;g++){var h=this.form.getFieldModelById(this.fieldsIds[g]);d&&0===g&&(b="sectionBreak"+e+"0",a[b]=a[b]?a[b]:{fields:[]},a[b].title="Section "+(g+1)),null!==b&&"sectionBreak"!==h.getType()&&a[b].fields.push(h),"sectionBreak"===h.getType()&&(b=h.get("_id"),a[b]=a[b]?a[b]:{fields:[]},a[b].title=h.get("name","Section "+(g+1)),a[b].description=h.get("helpText","Section "+(g+1)))}return a},c.prototype.getFieldModelById=function(a){return this.form.getFieldModelById(a)},c.prototype.getPageId=function(){return this.get("_id","")},c.prototype.getName=function(){return this.get("name","")},c.prototype.getDescription=function(){return this.get("description","")},c.prototype.getFieldDef=function(){return this.get("fields",[])},c.prototype.getFieldModelList=function(){for(var a=[],b=0;b<this.fieldsIds.length;b++)a.push(this.form.getFieldModelById(this.fieldsIds[b]));return a},a.Page=c,a}(b.models||{}),b.models=function(a){function c(){var a=this;d.call(a,{_type:"uploadManager",_ludid:"uploadManager_queue"}),a.set("taskQueue",[]),a.sending=!1,a.timerInterval=200,a.sendingStart=b.utils.getTime()}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.queueSubmission=function(a,c){$fh.forms.log.d("Queueing Submission for uploadManager");var d,e=null,f=this;f.checkOnlineStatus(function(){return $fh.forms.config.isOnline()?(a.getUploadTaskId()?d=a.getUploadTaskId():(e=b.models.uploadTask.newInstance(a),d=e.getLocalId()),f.push(d),f.timer||($fh.forms.log.d("Starting timer for uploadManager"),f.start()),e?e.saveLocal(function(a){a&&$fh.forms.log.e(a),f.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload manager: "+a),c(null,e)})}):f.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload manager: "+a),f.getTaskById(d,c)}),void 0):c("Working offline cannot submit form.")})},c.prototype.cancelSubmission=function(a,b){var c=a.getUploadTaskId(),d=this.get("taskQueue");if(c){var e=d.indexOf(c);e>-1&&d.splice(e,1),this.getTaskById(c,function(a,c){a?($fh.forms.log.e(a),b(a,c)):c?c.clearLocal(b):b(null,null)}),this.saveLocal(function(a){a&&$fh.forms.log.e(a)})}else b(null,null)},c.prototype.getTaskQueue=function(){return this.get("taskQueue",[])},c.prototype.start=function(){var a=this;a.stop(),a.timer=setInterval(function(){a.tick()},this.timerInterval)},c.prototype.stop=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},c.prototype.push=function(a){this.get("taskQueue").push(a),this.saveLocal(function(a){a&&$fh.forms.log.e("Error saving local Upload manager",a)})},c.prototype.shift=function(){var a=this.get("taskQueue").shift();return this.saveLocal(function(a){a&&$fh.forms.log.e(a)}),a},c.prototype.rollTask=function(){this.push(this.shift())},c.prototype.tick=function(){var a=this;if(a.sending){var c=b.utils.getTime(),d=c.getTime()-a.sendingStart.getTime();d>1e3*$fh.forms.config.get("timeout")&&($fh.forms.log.e("Uploading content timeout. it will try to reupload."),a.sending=!1,a.rollTask())}else a.hasTask()?(a.sending=!0,a.sendingStart=b.utils.getTime(),a.getCurrentTask(function(b,c){b||!c?($fh.forms.log.e(b),a.sending=!1):c.isCompleted()||c.isError()?(a.shift(),a.sending=!1,a.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload manager: ",a)})):a.checkOnlineStatus(function(){$fh.forms.config.isOnline()?c.uploadTick(function(b){b&&$fh.forms.log.e("Error on upload tick: ",b,c),a.sending=!1}):$fh.forms.log.d("Upload Manager: Tick: Not online.")})})):a.stop()},c.prototype.hasTask=function(){return this.get("taskQueue").length>0},c.prototype.getCurrentTask=function(a){var b=this.getTaskQueue()[0];b?this.getTaskById(b,a):a(null,null)},c.prototype.checkOnlineStatus=function(a){b.stores.dataAgent.checkOnlineStatus(a)},c.prototype.getTaskById=function(a,c){b.models.uploadTask.fromLocal(a,c)},a.uploadManager=new c,a}(b.models||{}),b.models=function(a){function c(a){d.call(this,{_type:"rule"}),this.fromJSON(a)}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.getRelatedFieldId=function(){for(var a=this.getDefinition(),b=a.ruleConditionalStatements,c=[],d=0;d<b.length;d++){var e=b[d];c.push(e.sourceField)}return c},c.prototype.test=function(a){for(var b=this.getRelatedFieldId(),c=this.getLogic(),d="or"===c?!1:!0,e=0;e<b.length;e++){var f=b[e],g=a[f];if(g){var h=this.testField(f,g);if("or"===c){if(d=d||h,d===!0)return!0}else if(d=d&&h,d===!1)return!1}else{if("or"!==c)return!1;d=d||!1}}return d},c.prototype.testField=function(a,c){var d=this.getRuleConditionStatement(a),e=d.restriction,f=d.sourceValue;return b.models.checkRule(e,f,c)},c.prototype.getRuleConditionStatement=function(a){for(var b=this.getDefinition().ruleConditionalStatements,c=0;c<b.length;c++){var d=b[c];if(d.sourceField===a)return d}return null},c.prototype.getLogic=function(){var a=this.getDefinition();return a.ruleConditionalOperator.toLowerCase()},c.prototype.getDefinition=function(){return this.get("definition")},c.prototype.getAction=function(){var a=this.getDefinition(),b={action:a.type,targetId:"page"===this.get("type")?a.targetPage:a.targetField,targetType:this.get("type")};return b},a.Rule=c,a}(b.models||{}),b.models=function(a){function c(a){if(a){var b=new e;return b.init(a),f[b.getLocalId()]=b,b}return{}}function d(a,b){if(f[a])return b(null,f[a]);var c=new e;c.setLocalId(a),f[a]=c,c.loadLocal(b)}function e(){g.call(this,{_type:"uploadTask"})}a.uploadTask={newInstance:c,fromLocal:d};var f={},g=b.models.Model;return b.utils.extend(e,g),e.prototype.init=function(a){function b(){var b=a.getProps();d.set("jsonTask",b),d.set("formId",a.get("formId"))}function c(){d.set("submissionId",a.getRemoteSubmissionId()),d.set("jsonTask",{}),d.set("submissionTransferType","download")}var d=this,e=a.getLocalId();d.setLocalId(e+"_uploadTask"),d.set("submissionLocalId",e),d.set("fileTasks",[]),d.set("currentTask",null),d.set("completed",!1),d.set("retryAttempts",0),d.set("retryNeeded",!1),d.set("mbaasCompleted",!1),d.set("submissionTransferType","upload"),a.setUploadTaskId(d.getLocalId()),a.isDownloadSubmission()?c():b()},e.prototype.getTotalSize=function(){for(var a,b=this,c=JSON.stringify(b.get("jsonTask")).length,d=b.get("fileTasks"),e=0,f=0;f<d.length;f++)a=d[f],e+=a.fileSize;return c+e},e.prototype.getUploadedSize=function(){var a=this.getCurrentTask();if(null===a)return 0;for(var b,c=JSON.stringify(this.get("jsonTask")).length,d=this.get("fileTasks"),e=0,f=0;(b=d[f])&&a>f;f++)e+=b.fileSize;return c+e},e.prototype.getRemoteStore=function(){return b.stores.dataAgent.remoteStore},e.prototype.addFileTasks=function(a,b){var c=this;a.getFileInputValues(function(a,d){if(a)return $fh.forms.log.e("Error getting file Input values: "+a),b(a);for(var e=0;e<d.length;e++){var f=d[e];c.addFileTask(f)}b()})},e.prototype.addFileTask=function(a){this.get("fileTasks").push(a)},e.prototype.getCurrentTask=function(){return this.get("currentTask",null)},e.prototype.getRetryAttempts=function(){return this.get("retryAttempts")},e.prototype.increRetryAttempts=function(){this.set("retryAttempts",this.get("retryAttempts")+1)},e.prototype.resetRetryAttempts=function(){this.set("retryAttempts",0)},e.prototype.isStarted=function(){return null===this.getCurrentTask()?!1:!0},e.prototype.setSubmissionQueued=function(a){var b=this;b.submissionModel(function(c,d){return c?a(c):(b.get("submissionId")&&d.setRemoteSubmissionId(b.get("submissionId")),void d.queued(a))})},e.prototype.uploadForm=function(a){function c(c){$fh.forms.log.d("In processUploadDataResult");var d=g.get("jsonTask");if(c.error)return $fh.forms.log.e("Error submitting form "+c.error),a("Error submitting form "+c.error);var e=c.submissionId;d.lastUpdate=b.utils.getTime(),g.set("submissionId",e),g.setSubmissionQueued(function(b){return g.increProgress(),g.saveLocal(function(a){a&&$fh.forms.log.e("Error saving uploadTask to local storage"+a)}),g.emit("progress",g.getProgress()),a(null)})}function d(b,c){return $fh.forms.log.d("In processDownloadDataResult"),b?($fh.forms.log.e("Error downloading submission data"+b),a(b)):void g.submissionModel(function(b,d){if($fh.forms.log.d("Got SubmissionModel",b,d),b)return a(b);var e={};if("string"==typeof c)try{e=JSON.parse(c)}catch(f){return $fh.forms.log.e("processDownloadDataResult Invalid JSON Object Returned",c),a("Invalid JSON Object Returned")}else e=c;e.status&&delete e.status,d.fromJSON(e),g.set("jsonTask",c),d.saveLocal(function(b){$fh.forms.log.d("Saved SubmissionModel",b,d),b&&$fh.forms.log.e("Error saving updated submission from download submission: "+b),g.addFileTasks(d,function(b){return $fh.forms.log.d("addFileTasks called",b,d),b?a(b):(g.increProgress(),void g.saveLocal(function(b){return b&&$fh.forms.log.e("Error saving downloadTask to local storage"+b),g.emit("progress",g.getProgress()),a()}))})})})}function e(){$fh.forms.log.d("In uploadSubmissionJSON");
var d=g.get("jsonTask");g.submissionModel(function(e,f){return e?a(e):void g.addFileTasks(f,function(e){if(e)return $fh.forms.log.e("Error adding file tasks for submission upload"),a(e);var f=new b.models.FormSubmission(d);g.getRemoteStore().create(f,function(b,d){if(b)return a(b);var e=d.updatedFormDefinition;e?g.refreshForm(e,function(a){$fh.forms.log.d("Form Updated, refreshed"),a&&$fh.forms.log.e(a),c(d)}):c(d)})})})}function f(){var a=new b.models.FormSubmissionDownload(g);g.getRemoteStore().read(a,d)}var g=this;g.isDownloadTask()?f():e()},e.prototype.handleCompletionError=function(a,b,c){$fh.forms.log.d("handleCompletionError Called");var d=a;d="pending"===b.status?"Submission Still Pending.":"error"===b.status?"Error completing submission":"Invalid return type from complete submission",c(d)},e.prototype.handleIncompleteSubmission=function(a){function c(){var c=e.getRemoteStore(),d=new b.models.FormSubmissionStatus(e);c.submissionStatus(d,function(b,c){var d="";if(b)a(b);else if("error"===c.status)d="Error submitting form.",a(d);else if("complete"===c.status)e.increProgress(),a();else if("pending"===c.status){var f=c.pendingFiles||[];f.length>0?e.resetUploadTask(f,function(){a()}):(e.increProgress(),a())}else d="Invalid submission status response.",a(d)})}function d(){a()}var e=this;e.isDownloadTask()?d():c()},e.prototype.resetUploadTask=function(a,b){var c,d=this.get("fileTasks"),e=[];for(c=0;c<d.length;c++)a.indexOf(d[c].hashName)<0&&e.push(d[c]);for(c=0;c<d.length;c++)a.indexOf(d[c].hashName)>-1&&e.push(d[c]);var f=d.length-a.length-1,g=0;f>0&&(g=f),this.set("currentTask",g),this.set("fileTasks",e),this.saveLocal(b)},e.prototype.uploadFile=function(a){function c(){$fh.forms.log.d("processUploadFile for submissionId: "),g="base64"===h.contentType?new b.models.Base64FileSubmission(h):new b.models.FileSubmission(h),g.setSubmissionId(i),g.loadFile(function(c){return c?($fh.forms.log.e("Error loading file for upload: "+c),a(c)):void e.getRemoteStore().create(g,function(c,d){if(c)a(c);else if("ok"===d.status||200===d.status||"200"===d.status)h.updateDate=b.utils.getTime(),e.increProgress(),e.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload task"+a)}),e.emit("progress",e.getProgress()),a(null);else{var f="File upload failed for file: "+h.fileName;a(f)}})})}function d(){$fh.forms.log.d("processDownloadFile called"),g=new b.models.FileSubmissionDownload(h),g.setSubmissionId(i),e.getRemoteStore().read(g,function(b,c){return b?($fh.forms.log.e("Error downloading a file from remote: "+b),a(b)):($fh.forms.log.d("processDownloadFile called. Local File Path: "+c),void e.submissionModel(function(b,d){return b?($fh.forms.log.e("Error Loading submission model for processDownloadFile "+b),a(b)):void d.updateFileLocalURI(h,c,function(b){return b?($fh.forms.log.e("Error updating file local url for fileTask "+JSON.stringify(h)),a(b)):(e.increProgress(),e.saveLocal(function(a){a&&$fh.forms.log.e("Error saving download task")}),e.emit("progress",e.getProgress()),a())})}))})}var e=this,f=e.getCurrentTask();null===f&&(f=0,e.set("currentTask",f));var g,h=e.get("fileTasks",[])[f],i=e.get("submissionId");return h?i?void(e.isDownloadTask()?d():c()):($fh.forms.log.e("No submission id found when trying to transfer a file."),a("No submission Id found")):($fh.forms.log.e("No file task found when trying to transfer a file."),a("cannot find file task"))},e.prototype.isDownloadTask=function(){return"download"===this.get("submissionTransferType")},e.prototype.setRetryNeeded=function(a){null!=this.get("submissionId",null)?this.set("retryNeeded",a):(this.set("retryNeeded",!1),this.set("currentTask",null))},e.prototype.retryNeeded=function(){return this.get("retryNeeded")},e.prototype.uploadTick=function(a){function b(b){b?($fh.forms.log.d("Err, retrying transfer: "+c.getLocalId()),c.increRetryAttempts(),c.getRetryAttempts()<=$fh.forms.config.get("max_retries")?(c.setRetryNeeded(!0),c.saveLocal(function(b){b&&$fh.forms.log.e("Error saving upload taskL "+b),a()})):(c.setRetryNeeded(!0),c.resetRetryAttempts(),c.error(b,function(){a(b)}))):(c.setRetryNeeded(!1),c.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload task to local memory"+a)}),c.submissionModel(function(b,c){if(b)a(b);else{var d=c.get("status");"inprogress"!==d&&"submitted"!==d&&"downloaded"!==d&&"queued"!==d?($fh.forms.log.e("Submission status is incorrect. Upload task should be started by submission object's upload method."+d),a("Submission status is incorrect. Upload task should be started by submission object's upload method.")):a()}}))}var c=this;this.isFormCompleted()?this.retryNeeded()?this.handleIncompleteSubmission(b):this.isFileCompleted()?this.isMBaaSCompleted()?this.isCompleted()?b(null,null):this.success(b):this.uploadComplete(b):this.uploadFile(b):this.uploadForm(b)},e.prototype.increProgress=function(){var a=this.getCurrentTask();null===a?a=0:a++,this.set("currentTask",a)},e.prototype.uploadComplete=function(a){function c(){$fh.forms.log.d("processDownloadComplete Called"),e.increProgress(),a(null)}function d(){$fh.forms.log.d("processUploadComplete Called");var c=e.getRemoteStore(),d=new b.models.FormSubmissionComplete(e);c.create(d,function(b,c){return c=c||{},"complete"!==c.status?e.handleCompletionError(b,c,a):(e.increProgress(),void a(null))})}$fh.forms.log.d("UploadComplete Called");var e=this,f=e.get("submissionId",null);return null===f?a("Failed to complete submission. Submission Id not found."):void(e.isDownloadTask()?c():d())},e.prototype.success=function(a){function b(a){$fh.forms.log.d("processUploadSuccess Called"),d.submissionModel(function(b,c){return b?a(b):(c.setRemoteSubmissionId(e),void c.submitted(a))})}function c(a){$fh.forms.log.d("processDownloadSuccess Called"),d.submissionModel(function(b,c){return b?a(b):(c.populateFilesInSubmission(),void c.downloaded(a))})}$fh.forms.log.d("Transfer Sucessful. Success Called.");var d=this,e=d.get("submissionId",null);d.set("completed",!0),d.saveLocal(function(e){e&&$fh.forms.log.e("Error Clearing Upload Task"),d.isDownloadTask()?c(function(b){d.clearLocal(a)}):b(function(b){d.clearLocal(a)})})},e.prototype.error=function(a,b){var c=this;$fh.forms.log.e("Error uploading submission: ",a),c.set("error",a),c.saveLocal(function(d){d&&$fh.forms.log.e("Upload task save failed: "+d),c.submissionModel(function(d,e){d?b(d):(e.setUploadTaskId(null),e.error(a,function(a){a&&$fh.forms.log.e("Error updating submission model to error status ",a),c.clearLocal(function(a){a&&$fh.forms.log.e("Error clearing upload task local storage: ",a),b(a)})}))})})},e.prototype.isFormCompleted=function(){var a=this.getCurrentTask();return null===a?!1:!0},e.prototype.isFileCompleted=function(){var a=this.getCurrentTask();return null===a?!1:a<this.get("fileTasks",[]).length?!1:!0},e.prototype.isError=function(){var a=this.get("error",null);return a?!0:!1},e.prototype.isCompleted=function(){return this.get("completed",!1)},e.prototype.isMBaaSCompleted=function(){var a=this;if(a.isFileCompleted()){var b=a.getCurrentTask();return b>a.get("fileTasks",[]).length?(a.set("mbaasCompleted",!0),a.saveLocal(function(a){a&&$fh.forms.log.e("Error saving upload task: ",a)}),!0):!1}return!1},e.prototype.getProgress=function(){var a=this,b={formJSON:!1,currentFileIndex:0,totalFiles:a.get("fileTasks").length,totalSize:a.getTotalSize(),uploaded:a.getUploadedSize(),retryAttempts:a.getRetryAttempts(),submissionTransferType:a.get("submissionTransferType"),submissionRemoteId:a.get("submissionId"),submissionLocalId:a.get("submissionLocalId")},c=a.getCurrentTask();return null===c?b:(b.formJSON=!0,b.currentFileIndex=c,b)},e.prototype.refreshForm=function(a,c){var d=this.get("formId");new b.models.Form({formId:d,rawMode:!0,rawData:a},function(b,d){b&&$fh.forms.log.e(b),$fh.forms.log.l("successfully updated form the form with id "+a._id),c()})},e.prototype.submissionModel=function(a){b.models.submission.fromLocal(this.get("submissionLocalId"),function(b,c){b&&$fh.forms.log.e("Error getting submission model from local memory "+b),a(b,c)})},a}(b.models||{}),b.models=function(a){function c(){d.call(this,{_type:"theme",_ludid:"theme_object"})}var d=b.models.Model;return c.prototype.getCSS=function(){return this.get("css","")},b.utils.extend(c,d),a.theme=new c,a}(b.models||{}),b.models=function(a){function c(){d.call(this,{_type:"log",_ludid:"log"}),this.set("logs",[]),this.isWriting=!1,this.moreToWrite=!1}var d=b.models.Model;return b.utils.extend(c,d),c.prototype.info=function(a,b){if($fh.forms.config.get("logger")===!0){var c="",d=$fh.forms.config.get("log_level"),e=$fh.forms.config.get("log_levels"),f=this;if("string"==typeof a?(c=a,a=e.indexOf(a.toLowerCase())):a=0,d=isNaN(parseInt(d,10))?d:parseInt(d,10),a=isNaN(parseInt(a,10))?a:parseInt(a,10),a>d)return;var g=Array.prototype.splice.call(arguments,0),h=f.get("logs");g.shift();for(var i="";g.length>0;)i+=JSON.stringify(g.shift())+" ";if(h.push(f.wrap(i,c)),h.length>$fh.forms.config.get("log_line_limit")&&h.shift(),f.isWriting)f.moreToWrite=!0;else{var j=function(){f.moreToWrite&&(f.moreToWrite=!1,f.write(j))};f.write(j)}}},c.prototype.wrap=function(a,b){var c=new Date,d=c.toISOString();"object"==typeof a&&(a=JSON.stringify(a));var e=d+" "+b.toUpperCase()+" "+a;return e},c.prototype.write=function(a){var b=this;b.isWriting=!0,b.saveLocal(function(){b.isWriting=!1,a()})},c.prototype.e=function(){var a=Array.prototype.splice.call(arguments,0);a.unshift("error"),this.info.apply(this,a)},c.prototype.w=function(){var a=Array.prototype.splice.call(arguments,0);a.unshift("warning"),this.info.apply(this,a)},c.prototype.l=function(){var a=Array.prototype.splice.call(arguments,0);a.unshift("log"),this.info.apply(this,a)},c.prototype.d=function(){var a=Array.prototype.splice.call(arguments,0);a.unshift("debug"),this.info.apply(this,a)},c.prototype.getLogs=function(){return this.get("logs")},c.prototype.clearLogs=function(a){this.set("logs",[]),this.saveLocal(function(){a&&a()})},c.prototype.sendLogs=function(a){var c=$fh.forms.config.get("log_email"),d=b.config.getProps(),e=this.getLogs(),f={type:"email",to:c,subject:"App Forms App Logs",body:"Configuration:\n"+JSON.stringify(d)+"\n\nApp Logs:\n"+e.join("\n")};b.utils.send(f,a)},a.log=new c,b.log=a.log,a}(b.models||{}),b.api=function(a){function c(a,c){"function"==typeof a&&(c=a,a={}),a=a?a:{},c=c?c:l;var d=a.fromRemote;void 0===d&&(d=!1),b.models.forms.refresh(d,c)}function d(a,c){"function"==typeof a&&(c=a,a={}),a=a?a:{},c=c?c:l,new b.models.Form(a,c)}function e(a,c){"function"==typeof a&&(c=a,a={}),a=a?a:{},c=c?c:l;var d=b.models.theme;a.fromRemote||(a.fromRemote=!1),d.refresh(a.fromRemote,function(b,e){return b?c(b):null===e?c(new Error("No theme defined for this app")):a.css===!0?c(null,d.getCSS()):c(null,d)})}function f(a,c){"function"==typeof a&&(c=a,a={}),a=a?a:{},c=c?c:l;b.models.submissions;null===i?b.models.submissions.loadLocal(function(a){a?($fh.forms.log.e(a),c(a)):(i=b.models.submissions,c(null,i))}):c(null,i)}function g(a,b){return a?void a.submit(function(c){return c?b(c):void a.upload(b)}):b("Invalid submission object.")}function h(a,c){function d(a){a="string"==typeof a&&24===a.length?null:a,$fh.forms.log.d("finishSubmissionDownload ",a,e);var b=e.getRemoteSubmissionId(),d=j[b];if(!d)return e.clearEvents(),c(a,e);for(var f=d.pop();"function"==typeof f;)f(a,e),f=d.pop();e.clearEvents&&e.clearEvents()}$fh.forms.log.d("downloadSubmission called",a),a=a?a:{};if(c="function"==typeof c?c:function(){},!a.submissionId)return $fh.forms.log.e("No submissionId passed to download a submission"),c("No submissionId passed to download a submission");var e=null;$fh.forms.log.d("downloadSubmission SubmissionId exists"+a.submissionId);var f=b.models.submissions.findMetaByRemoteId(a.submissionId);null===f?($fh.forms.log.d("downloadSubmission submission does not exist, downloading",a),e=new b.models.submission.newInstance(null,{submissionId:a.submissionId}),e.on("error",d),e.on("downloaded",d),"function"==typeof a.updateFunction&&e.on("progress",a.updateFunction),"function"==typeof c&&(j[a.submissionId]?j[a.submissionId].push(c):(j[a.submissionId]=[],j[a.submissionId].push(c))),e.download(function(a){return a?($fh.forms.log.e("Error queueing submission for download "+a),c(a)):void 0})):($fh.forms.log.d("downloadSubmission submission exists",a),"downloaded"!==f.status&&"submitted"!==f.status?"function"==typeof c&&(j[a.submissionId]?j[a.submissionId].push(c):(j[a.submissionId]=[],j[a.submissionId].push(c))):b.models.submissions.getSubmissionByMeta(f,function(a,b){return a?c(a):(b.emit("downloaded",b.getRemoteSubmissionId()),c(void 0,b))}))}a.getForms=c,a.getForm=d,a.getTheme=e,a.submitForm=g,a.getSubmissions=f,a.downloadSubmission=h,a.init=b.init,a.log=b.models.log,a._events={},a.on=function(b,c,d){a._events[b]||(a._events[b]=[]),a._events[b].indexOf(c)<0&&a._events[b].push({callOnce:d,func:c})},a.once=function(b,c){a.on(b,c,!0)},a.emit=function(){var b=Array.prototype.slice.call(arguments,0),c=b.shift(),d=a._events[c];if(d&&d.length>0)for(var e=0;e<d.length;e++){var f=d[e],g=d[e].func;f.called&&f.callOnce||(f.called=!0,g.apply(this,b))}};var i=null,j={},k=b.models.config,l=function(a){a=a?a:"",$fh.forms.log.w("Default Function Called "+a)},m={editAllowed:function(){var a=k.get("defaultConfigValues",{});return a.config_admin_user===!0},get:function(a){if(a){var b=k.get("userConfigValues",{}),c=k.get("defaultConfigValues",{});return b[a]?b[a]:c[a]}},getDeviceId:function(){return k.get("deviceId","Not Set")},set:function(a,b){var c=this;if("string"==typeof a&&"undefined"!=typeof b&&null!==b&&(c.editAllowed()||"max_sent_saved"===a)){var d=k.get("userConfigValues",{});d[a]=b,k.set("userConfigValues",d)}},getConfig:function(){var a=this,b=k.get("defaultConfigValues",{}),c=k.get("userConfigValues",{}),d={};if(a.editAllowed()){for(var e in b)c[e]?d[e]=c[e]:d[e]=b[e];return d}return b},saveConfig:function(a){k.saveLocal(function(b,c){b?$fh.forms.log.e("Error saving a form config: ",b):$fh.forms.log.l("Form config saved sucessfully."),"function"==typeof a&&a()})},offline:function(){k.setOffline()},online:function(){k.setOnline()},mbaasOnline:function(a){"function"==typeof a&&k.on("online",a)},mbaasOffline:function(a){"function"==typeof a&&k.on("offline",a)},isOnline:function(){return k.isOnline()},isStudioMode:function(){return k.isStudioMode()},refresh:function(a){k.refresh(!0,a)}};return a.config=m,a}(b.api||{}),"undefined"==typeof $fh&&($fh={}),void 0===$fh.forms&&($fh.forms=b.api),function c(a,b,d){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,c,a,b,d)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,c,d){!function(){var d=a("async"),e=a("underscore"),f=a("moment"),g="date",h="time",i="datetime",j=function(a){function b(){e.each(aa.pages,function(a){e.each(a.fields,function(b){return b.pageId=a._id,b.adminOnly?void(ca[b._id]=b):(b.fieldOptions=b.fieldOptions?b.fieldOptions:{},b.fieldOptions.definition=b.fieldOptions.definition?b.fieldOptions.definition:{},b.fieldOptions.validation=b.fieldOptions.validation?b.fieldOptions.validation:{},ba[b._id]=b,void(b.required&&(da[b._id]={field:b,submitted:!1,validated:!1,valueRequired:b.required})))})})}function c(){e.each(aa.fieldRules,function(a){e.each(a.ruleConditionalStatements,function(b){var c=b.sourceField;fa[c]=fa[c]||[],fa[c].push(a)}),e.isArray(a.targetField)?e.each(a.targetField,function(b){ga[b]=ga[b]||[],ga[b].push(a)}):(ga[a.targetField]=ga[a.targetField]||[],ga[a.targetField].push(a))})}function j(){e.each(aa.pageRules,function(a){e.each(a.ruleConditionalStatements,function(b){var c=b.sourceField;ha[c]=ha[c]||[],ha[c].push(a)}),e.isArray(a.targetPage)?e.each(a.targetPage,function(b){ia[b]=ia[b]||[],ia[b].push(a)}):(ia[a.targetPage]=ia[a.targetPage]||[],ia[a.targetPage].push(a))})}function k(){ea=JSON.parse(JSON.stringify(da)),ja={};var a;return e.each(_.formFields,function(b){return b.fieldId?ca[b.fieldId]?void(a="Submission "+b.fieldId+" is an admin field. Admin fields cannot be passed to the rules engine."):void(ja[b.fieldId]=b):void(a=new Error("No fieldId in this submission entry: "+JSON.stringify(b)))}),a}function l(){$||(b(),c(),j(),$=!0)}function m(a){return l(),_=a,k()}function n(a,b,c){return b&&b.formFields?void d.filter(b.formFields,function(b,c){return c(b.fieldId.toString()===a.fieldId.toString())},function(a){var b=null;return a&&a[0]&&a[0].fieldValues&&(b=a[0].fieldValues),c(void 0,b)}):c()}function o(a,b,c){"function"==typeof b&&(c=b,b=null),l();var e=m(a);return e?c(e):void d.waterfall([function(a){var c={validation:{valid:!0}};p(c,b,a)},q],function(a,b){return a?c(a):c(void 0,b)})}function p(a,b,c){d.each(_.formFields,function(c,d){var e=c.fieldId,f=ba[e];n(c,b,function(b,g){return b?d(b):void u(c,f,g,function(b,c){return b?d(b):(c.valid||(a.validation.valid=!1,a.validation[e]=c),d())})})},function(b){return b?c(b):c(void 0,a)})}function q(a,b){d.each(Object.keys(ea),function(b,c){var d={},e=ea[b];return e.submitted?c():void W(b,!0,function(f,g){return f?c(f):(g&&e.valueRequired&&(d.fieldId=b,d.valid=!1,d.fieldErrorMessage=["Required Field Not Submitted"],a.validation[b]=d,a.validation.valid=!1),c())})},function(c){return c?b(c):b(void 0,a)})}function r(a,b,c){l();var d=m(b);if(d)return c(d);var e=ja[a],f=ba[a];u(e,f,null,function(b,d){if(b)return c(b);var e={validation:{}};return e.validation[a]=d,c(void 0,e)})}function s(a,b,c,d){function e(b,c){var d={errorMessages:[]};return b&&d.errorMessages.push(b),t(a,d,function(b,d){if(b)return c(b);var e={validation:{}};return e.validation[a]=d,c(void 0,e)})}"function"==typeof c&&(d=c,c=0),l();var f=ba[a],g=!1;g=f.repeating&&f.fieldOptions&&f.fieldOptions.definition&&f.fieldOptions.definition.minRepeat?c<f.fieldOptions.definition.minRepeat:f.required;var h=f.fieldOptions&&f.fieldOptions.validation?f.fieldOptions.validation:void 0;if(h&&!1===h.validateImmediately){var i={validation:{}};return i.validation[a]={valid:!0},d(void 0,i)}var j=da[f._id]||{valueRequired:g};return y(b)?g&&j.valueRequired?e("No value specified for required input",d):e(void 0,d):void x(f.type,function(a,c){return a?d(a):void c(b,f,void 0,function(a){var b;a&&(b=a.message?a.message:"Unknown error message"),e(b,d)})})}function t(a,b,c){var e={};e.fieldId=a,e.errorMessages=b.errorMessages||[],e.fieldErrorMessage=b.fieldErrorMessage||[],d.some(e.errorMessages,function(a,b){return b(null!==a)},function(a){return e.valid=!a&&e.fieldErrorMessage.length<1,c(void 0,e)})}function u(a,b,c,d){W(b._id,!0,function(e,f){return e?d(e):void z(a,b,c,f,function(b,c){return b?d(b):void t(a.fieldId,c,d)})})}function v(a,b,c){var d=b[a];return d?c(void 0,d):c(new Error("Invalid Field Type "+a))}function w(a,b){return v(a,ka,b)}function x(a,b){return v(a,la,b)}function y(a){return"undefined"==typeof a||null===a||""===a}function z(a,b,c,e,f){function g(a,b,c,d){if(!b.required)return d(void 0,null);var e=a&&a.fieldValues&&a.fieldValues.length>0,f=da[b._id]&&da[b._id].valueRequired;return!e&&c&&f?d(void 0,"No value submitted for field "+b.name):d(void 0,null)}function h(a,b){var c=0;if(a&&a.fieldValues&&a.fieldValues.length>0)for(var d=0;d<a.fieldValues.length;d+=1)a.fieldValues[d]&&(c+=1);return b(void 0,c)}function i(a,b,c,d){if(!c)return d(void 0,null);if(b.repeating&&b.fieldOptions&&b.fieldOptions.definition){if(b.fieldOptions.definition.minRepeat&&a<b.fieldOptions.definition.minRepeat)return d(void 0,"Expected min of "+b.fieldOptions.definition.minRepeat+" values for field "+b.name+" but got "+a);if(b.fieldOptions.definition.maxRepeat&&a>b.fieldOptions.definition.maxRepeat)return d(void 0,"Expected max of "+b.fieldOptions.definition.maxRepeat+" values for field "+b.name+" but got "+a)}else if(a>1)return d(void 0,"Should not have multiple values for non-repeating field");return d(void 0,null)}function j(a,b,c,e){w(b.type,function(f,g){return f?e(f):void d.map(a.fieldValues,function(a,d){return y(a)?d(void 0,null):void g(a,b,c,function(a){var c;return c=a?a.message||"Error during validation of field":null,ea[b._id]&&(ea[b._id].submitted=!0),d(void 0,c)})},function(a,b){return a?e(a):e(void 0,b)})})}c=c||null,h(a,function(h,k){return h?f(h):(b.visible=e,void d.series({valuesSubmitted:d.apply(g,a,b,e),repeats:d.apply(i,k,b,e),values:d.apply(j,a,b,c)},function(a,b){if(a)return f(a);var c=[];return b.valuesSubmitted&&c.push(b.valuesSubmitted),b.repeats&&c.push(b.repeats),f(void 0,{fieldErrorMessage:c,errorMessages:b.values})}))})}function A(a){var b,c,d,e="^",f="c".charCodeAt(0),g="n".charCodeAt(0),h=a.length;for(b=0;h>b;b+=1){switch(c=a.charCodeAt(b)){case f:d="[a-zA-Z0-9]";break;case g:d="[0-9]";break;default:var i=c.toString(16).toUpperCase();d="\\u"+("0000"+i).substr(-4)}e+=d}return e+"$"}function B(a,b){var c=new RegExp(b);return c.test(a)}function C(a,b,c){var d;return d="simple"===b?A(c):"regex"===b?c:A(c),B(a,d)}function D(a,b,c,d){if("string"!=typeof a)return d(new Error("Expected string but got "+typeof a));var e={};b&&b.fieldOptions&&b.fieldOptions.validation&&(e=b.fieldOptions.validation);var f=e.field_format_mode||"";f=f.trim();var g=e.field_format_string||"";return g=g.trim(),g&&g.length>0&&f&&f.length>0&&!C(a,f,g)?d(new Error("field value in incorrect format, expected format: "+g+" but submission value is: "+a)):b.fieldOptions&&b.fieldOptions.validation&&b.fieldOptions.validation.min&&a.length<b.fieldOptions.validation.min?d(new Error("Expected minimum string length of "+b.fieldOptions.validation.min+" but submission is "+a.length+". Submitted val: "+a)):b.fieldOptions&&b.fieldOptions.validation&&b.fieldOptions.validation.max&&a.length>b.fieldOptions.validation.max?d(new Error("Expected maximum string length of "+b.fieldOptions.validation.max+" but submission is "+a.length+". Submitted val: "+a)):d()}function E(a,b,c,d){var e=a-0,f=e==a;return f?F(e,b,c,d):d(new Error("Expected numeric but got: "+a))}function F(a,b,c,d){return"number"!=typeof a?d(new Error("Expected number but got "+typeof a)):b.fieldOptions&&b.fieldOptions.validation&&b.fieldOptions.validation.min&&a<b.fieldOptions.validation.min?d(new Error("Expected minimum Number "+b.fieldOptions.validation.min+" but submission is "+a+". Submitted number: "+a)):b.fieldOptions.validation.max&&a>b.fieldOptions.validation.max?d(new Error("Expected maximum Number "+b.fieldOptions.validation.max+" but submission is "+a+". Submitted number: "+a)):d()}function G(a,b,c,d){return"string"!=typeof a?d(new Error("Expected string but got "+typeof a)):null===a.match(/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}/g)?d(new Error("Invalid email address format: "+a)):d()}function H(a,b,c,d){if("string"!=typeof a)return d(new Error("Expected submission to be string but got "+typeof a));if(b.fieldOptions=b.fieldOptions||{},b.fieldOptions.definition=b.fieldOptions.definition||{},!b.fieldOptions.definition.options)return d(new Error("No options exist for field "+b.name));var f=e.find(b.fieldOptions.definition.options,function(b){return b.label===a});return f?d():d(""===f&&b.required&&b.fieldOptions.definition.include_blank_option?new Error("The Blank Option is not valid. Please select a value."):new Error("Invalid option specified: "+a))}function I(a,b,c,e){return"string"!=typeof a?e(new Error("Expected submission to be string but got "+typeof a)):b.fieldOptions.definition.options?void d.some(b.fieldOptions.definition.options,function(b,c){return c(b.label===a)},function(b){return b?e():e(new Error("Invalid option specified: "+a))}):e(new Error("No options exist for field "+b.name))}function J(a,b,c,e){var f;b&&b.fieldOptions&&b.fieldOptions.validation&&(f=b.fieldOptions.validation.min);var g;if(b&&b.fieldOptions&&b.fieldOptions.validation&&(g=b.fieldOptions.validation.max),f&&(null===a.selections||void 0===a.selections||a.selections.length<f&&b.visible)){var h;return a.selections&&(h=a.selections.length),e(new Error("Expected a minimum number of selections "+f+" but got "+h))}if(g&&a.selections&&a.selections.length>g)return e(new Error("Expected a maximum number of selections "+g+" but got "+a.selections.length));var i=[];d.eachSeries(b.fieldOptions.definition.options,function(a,b){for(var c in a)i.push(a[c]);return b()},function(){d.eachSeries(a.selections,function(a,b){return"string"!=typeof a?b(new Error("Expected checkbox submission to be string but got "+typeof a)):-1===i.indexOf(a)?b(new Error("Checkbox Option "+a+" does not exist in the field.")):b()},e)})}function K(a,b,c,d){return a.lat&&a["long"]?isNaN(parseFloat(a.lat))||isNaN(parseFloat(a["long"]))?d(new Error("Invalid latitude and longitude values")):d():d(new Error("Invalid object for locationMap submission"))}function L(a,b,c,d){function e(a,b){if("string"!=typeof a.zone||0===a.zone.length)return b(new Error("Invalid zone definition for northings and eastings location. "+a.zone));var c=parseInt(a.eastings,10);if(isNaN(c))return b(new Error("Invalid eastings definition for northings and eastings location. "+a.eastings));var d=parseInt(a.northings,10);return isNaN(d)?b(new Error("Invalid northings definition for northings and eastings location. "+a.northings)):b()}return"latlong"===b.fieldOptions.definition.locationUnit?a.lat&&a["long"]?isNaN(parseFloat(a.lat))||isNaN(parseFloat(a["long"]))?d(new Error("Invalid latitude and longitude values")):d():d(new Error("Invalid object for latitude longitude submission")):a.zone&&a.eastings&&a.northings?e(a,d):d(new Error("Invalid object for northings easting submission. Zone, Eastings and Northings elements are required"))}function M(a,b,c,d){R(a,b,c,function(e){return e?void P(a,b,c,function(e){return e?void Q(a,b,c,function(a){return a?d(a):d()}):d()}):d()})}function N(a,b,c,d){return"object"!=typeof a||null===a?d(new Error("Expected object but got "+typeof a)):"string"!=typeof a.text||0===a.text.length?d(new Error("Expected text parameter.")):"string"!=typeof a.format||0===a.format.length?d(new Error("Expected format parameter.")):d()}function O(a,b,c,d){a=a||{};var e=a.fieldOptions||{},f=e.definition||{},g=f.file_size||null;if(null!==g){var h=b[c],i=1;return h>1e3&&(i=h/1e3),h>1e3*g?d(new Error("File size is too large. File can be a maximum of "+g+"KB. Size of file selected: "+i+"KB")):d()}return d()}function P(a,b,c,e){if("object"!=typeof a)return e(new Error("Expected object but got "+typeof a));var f=[{keyName:"fileName",valueType:"string"},{keyName:"fileSize",valueType:"number"},{keyName:"fileType",valueType:"string"},{keyName:"fileUpdateTime",valueType:"number"},{keyName:"hashName",valueType:"string"}];d.each(f,function(b,c){var d=typeof a[b.keyName];return d!==b.valueType?c(new Error("Expected "+b.valueType+" but got "+d)):"fileName"===b.keyName&&a[b.keyName].length<=0?c(new Error("Expected value for "+b.keyName)):c()},function(d){return d?e(d):void O(b,a,"fileSize",function(b){return b?e(b):a.hashName.indexOf("filePlaceHolder")>-1?e():c&&c.hashName&&c.hashName.indexOf(a.hashName)>-1?e():e(new Error("Invalid file placeholder text"+a.hashName))})})}function Q(a,b,c,e){if("function"!=typeof File)return e(new Error("Expected File object but got "+typeof a));var f=[{keyName:"name",valueType:"string"},{keyName:"size",valueType:"number"}];d.each(f,function(b,c){var d=typeof a[b.keyName];return d!==b.valueType?c(new Error("Expected "+b.valueType+" but got "+d)):"string"===d&&a[b.keyName].length<=0?c(new Error("Expected value for "+b.keyName)):"number"===d&&a[b.keyName]<=0?c(new Error("Expected > 0 value for "+b.keyName)):c()},function(c){return c?e(c):void O(b,a,"size",function(a){return a?e(a):e()})})}function R(a,b,c,d){return"string"!=typeof a?d(new Error("Expected base64 string but got "+typeof a)):a.length<=0?d(new Error("Expected base64 string but was empty")):d()}function S(a,b,c,d){var j=!1;if("string"!=typeof a)return d(new Error("Expected string but got "+typeof a));switch(b.fieldOptions.definition.datetimeUnit){case g:var k=["YYYY/MM/DD","YYYY/MM/DD","YYYY-MM-DD","YYYY-MM-DD"];return j=e.find(k,function(b){return f(a,b,!0).isValid()}),j?d():d(new Error("Invalid date value "+a+". Date format is YYYY/MM/DD"));case h:return j=f(a,"HH:mm:ss",!0).isValid()||f(a,"HH:mm",!0).isValid(),j?d():d(new Error("Invalid time value "+a+". Time format is HH:mm:ss or HH:mm"));case i:var l=b.fieldOptions.definition.dateTimeFormat?[b.fieldOptions.definition.dateTimeFormat]:["YYYY/MM/DD HH:mm:ss","YYYY/MM/DD HH:mm","YYYY-MM-DD HH:mm:ss","YYYY-MM-DD HH:mm"];return j=e.find(l,function(b){return f(a,b,!0).isValid()}),j?d():d(new Error("Invalid dateTime string "+a+". dateTime format is "+l.join(" or ")));default:return d(new Error("Invalid dateTime fieldtype "+b.fieldOptions.definition.datetimeUnit))}}function T(a,b,c,d){return d(new Error("Should not submit section field: "+b.name))}function U(a,b){var c=!0;d.each(a,function(a,b){var e=[],f=[];d.each(a.ruleConditionalStatements,function(a,b){var c,d,g=ba[a.sourceField],h=!1,i=[];return ja[a.sourceField]&&ja[a.sourceField].fieldValues&&(i=ja[a.sourceField].fieldValues,c=a.restriction,d=a.sourceValue,h=Y(g,i[0],d,c)),e.push({field:g,submissionValues:i,condition:c,testValue:d,passed:h}),h&&f.push(g),b()},function(d){function g(a,b,c){return"and"===a&&b.length===c.length||"or"===a&&b.length>0}return d&&b(d),c=g(a.ruleConditionalOperator,f,e)?"show"===a.type&&c:"show"!==a.type&&c,b()})},function(a){return a?b(a):b(void 0,c)})}function V(a,b){return l(),oa(a)?U(ia[a],b):b(void 0,!0)}function W(a,b,c){l();var e=ba[a];return ca[a]?c(new Error("Submission "+a+" is an admin field. Admin fields cannot be passed to the rules engine.")):e?void d.waterfall([function(a){return b?void V(e.pageId,a):a(void 0,!0)},function(b,c){return b?na(a)?U(ga[a],c):c(void 0,!0):c(void 0,!1)}],c):c(new Error("Field does not exist in form"))}function X(a,b){l();var c=m(a);if(c)return b(c);var e={};d.parallel([function(a){e.fields={},d.eachSeries(Object.keys(ga),function(a,b){W(a,!1,function(c,d){return c?b(c):(e.fields[a]={targetId:a,action:d?"show":"hide"},b())})},a)},function(a){e.pages={},d.eachSeries(Object.keys(ia),function(a,b){V(a,function(c,d){return c?b(c):(e.pages[a]={targetId:a,action:d?"show":"hide"},b())})},a)}],function(a){return a?b(a):b(void 0,{actions:e})})}function Y(a,b,c,d){var e=a.type,f=a.fieldOptions?a.fieldOptions:{};return"undefined"==typeof b||null===b?!1:"function"==typeof ma[e]?ma[e](b,c,d,f):!1}function Z(a,b,c){var d=parseInt(a,10);return!isNaN(d)&&d>=b&&c>=d}var $,_,aa=a,ba={},ca={},da={},ea={},fa={},ga={},ha={},ia={},ja={},ka={text:D,textarea:D,number:E,emailAddress:G,dropdown:H,radio:I,checkboxes:J,location:L,locationMap:K,photo:P,signature:P,file:P,dateTime:S,url:D,sectionBreak:T,barcode:N,sliderNumber:E,readOnly:function(){return!0}},la={text:D,textarea:D,number:E,emailAddress:G,dropdown:H,radio:I,checkboxes:J,location:L,locationMap:K,photo:M,signature:M,file:M,dateTime:S,url:D,sectionBreak:T,barcode:N,sliderNumber:E,readOnly:function(){return!0}},ma={text:function(a,b,c){return this.comparisonString(a,b,c)},textarea:function(a,b,c){return this.comparisonString(a,b,c)},number:function(a,b,c){return this.numericalComparison(a,b,c)},emailAddress:function(a,b,c){return this.comparisonString(a,b,c)},dropdown:function(a,b,c){return this.comparisonString(a,b,c)},radio:function(a,b,c){return this.comparisonString(a,b,c)},checkboxes:function(a,b,c){a=a||{};var d=!1;if(!(a.selections instanceof Array))return!1;for(var e=0;e<a.selections.length;e++){var f=a.selections[e];this.comparisonString(f,b,"is")&&(d=!0)}return"is"===c?d:!d},dateTime:function(a,b,c,d){var e=!1;d=d||{definition:{}};var f=null,j=null;switch(d.definition.datetimeUnit){case g:try{f=new Date(new Date(a).toDateString()).getTime(),j=new Date(new Date(b).toDateString()).getTime(),e=!0}catch(k){f=null,
j=null,e=!1}break;case h:var l=this.cvtTimeToSeconds(a),m=this.cvtTimeToSeconds(b);f=l.seconds,j=m.seconds,e=l.valid&&m.valid;break;case i:try{f=new Date(a).getTime(),j=new Date(b).getTime(),e=!0}catch(k){e=!1}break;default:e=!1}return e?e="is at"===c?f===j:"is before"===c?j>f:"is after"===c?f>j:!1:!1},url:function(a,b,c){return this.comparisonString(a,b,c)},barcode:function(a,b,c){return a=a||{},"string"!=typeof a.text?!1:this.comparisonString(a.text,b,c)},sliderNumber:function(a,b,c){return this.numericalComparison(a,b,c)},comparisonString:function(a,b,c){var d=!0;return d="is"===c?a===b:"is not"===c?a!==b:"contains"===c?-1!==a.indexOf(b):"does not contain"===c?-1===a.indexOf(b):"begins with"===c?a.substring(0,b.length)===b:"ends with"===c?a.substring(Math.max(0,a.length-b.length),a.length)===b:!1},numericalComparison:function(a,b,c){var d=parseInt(a,10),e=parseInt(b,10);return isNaN(d)||isNaN(e)?!1:"is equal to"===c?d===e:"is less than"===c?e>d:"is greater than"===c?d>e:!1},cvtTimeToSeconds:function(a){var b=!1,c=0;if("string"==typeof a){var d=a.split(":");b=2===d.length||3===d.length,b&&(b=Z(d[0],0,23),c+=60*parseInt(d[0],10)*60),b&&(b=Z(d[1],0,59),c+=60*parseInt(d[1],10)),b&&3===d.length&&(b=Z(d[2],0,59),c+=parseInt(d[2],10))}return{valid:b,seconds:c}}},na=function(a){return!!ga[a]},oa=function(a){return!!ia[a]};return{validateForm:o,validateField:r,validateFieldValue:s,checkRules:X,validateFieldInternal:z,initSubmission:m,isFieldVisible:W,isConditionActive:Y}};"undefined"!=typeof c&&c.exports&&(c.exports=j),"undefined"!=typeof b&&(b.RulesEngine=j)}()},{async:2,moment:4,underscore:5}],2:[function(a,b,c){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,"undefined"!=typeof setImmediate?f.setImmediate=setImmediate:f.setImmediate=f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(a){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(a){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(a){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(a){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(a){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var e=Array.prototype.slice.call(arguments,1);if(e.length<=1&&(e=e[0]),a){var h={};g(j(d),function(a){h[a]=d[a]}),h[c]=e,b(a,h),b=function(){}}else d[c]=e,f.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],o=function(){return i(n,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(o())e[e.length-1](m,d);else{var p=function(){o()&&(k(p),e[e.length-1](m,d))};h(p)}})},f.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();g?e.push(d(g)):e.push(b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){return d?c(d):void(b()?f.doWhilst(a,b,c):c())})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){return d?c(d):void(b()?c():f.doUntil(a,b,c))})},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},f=c(d);a(b.data,f)}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};var w=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=l(w),f.applyEachSeries=n(w),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("_process"))},{_process:3}],3:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],4:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.moment=d()}(this,function(){"use strict";function c(){return od.apply(null,arguments)}function d(a){od=a}function e(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function f(a){return"[object Object]"===Object.prototype.toString.call(a)}function g(a){var b;for(b in a)return!1;return!0}function h(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function i(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function j(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,b){for(var c in b)j(b,c)&&(a[c]=b[c]);return j(b,"toString")&&(a.toString=b.toString),j(b,"valueOf")&&(a.valueOf=b.valueOf),a}function l(a,b,c,d){return sb(a,b,c,d,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function n(a){return null==a._pf&&(a._pf=m()),a._pf}function o(a){if(null==a._isValid){var b=n(a),c=pd.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function p(a){var b=l(NaN);return null!=a?k(n(b),a):n(b).userInvalidated=!0,b}function q(a){return void 0===a}function r(a,b){var c,d,e;if(q(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),q(b._i)||(a._i=b._i),q(b._f)||(a._f=b._f),q(b._l)||(a._l=b._l),q(b._strict)||(a._strict=b._strict),q(b._tzm)||(a._tzm=b._tzm),q(b._isUTC)||(a._isUTC=b._isUTC),q(b._offset)||(a._offset=b._offset),q(b._pf)||(a._pf=n(b)),q(b._locale)||(a._locale=b._locale),qd.length>0)for(c in qd)d=qd[c],e=b[d],q(e)||(a[d]=e);return a}function s(a){r(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),rd===!1&&(rd=!0,c.updateOffset(this),rd=!1)}function t(a){return a instanceof s||null!=a&&null!=a._isAMomentObject}function u(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function v(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=u(b)),c}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&v(a[d])!==v(b[d]))&&g++;return g+f}function x(a){c.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function y(a,b){var d=!0;return k(function(){return null!=c.deprecationHandler&&c.deprecationHandler(null,a),d&&(x(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),d=!1),b.apply(this,arguments)},b)}function z(a,b){null!=c.deprecationHandler&&c.deprecationHandler(a,b),sd[a]||(x(b),sd[a]=!0)}function A(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a){var b,c;for(c in a)b=a[c],A(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function C(a,b){var c,d=k({},a);for(c in b)j(b,c)&&(f(a[c])&&f(b[c])?(d[c]={},k(d[c],a[c]),k(d[c],b[c])):null!=b[c]?d[c]=b[c]:delete d[c]);for(c in a)j(a,c)&&!j(b,c)&&f(a[c])&&(d[c]=k({},d[c]));return d}function D(a){null!=a&&this.set(a)}function E(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return A(d)?d.call(b,c):d}function F(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function G(){return this._invalidDate}function H(a){return this._ordinal.replace("%d",a)}function I(a,b,c,d){var e=this._relativeTime[c];return A(e)?e(a,b,c,d):e.replace(/%d/i,a)}function J(a,b){var c=this._relativeTime[a>0?"future":"past"];return A(c)?c(b):c.replace(/%s/i,b)}function K(a,b){var c=a.toLowerCase();Bd[c]=Bd[c+"s"]=Bd[b]=a}function L(a){return"string"==typeof a?Bd[a]||Bd[a.toLowerCase()]:void 0}function M(a){var b,c,d={};for(c in a)j(a,c)&&(b=L(c),b&&(d[b]=a[c]));return d}function N(a,b){Cd[a]=b}function O(a){var b=[];for(var c in a)b.push({unit:c,priority:Cd[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function P(a,b){return function(d){return null!=d?(R(this,a,d),c.updateOffset(this,b),this):Q(this,a)}}function Q(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function R(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function S(a){return a=L(a),A(this[a])?this[a]():this}function T(a,b){if("object"==typeof a){a=M(a);for(var c=O(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=L(a),A(this[a]))return this[a](b);return this}function U(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function V(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Gd[a]=e),b&&(Gd[b[0]]=function(){return U(e.apply(this,arguments),b[1],b[2])}),c&&(Gd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function W(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function X(a){var b,c,d=a.match(Dd);for(b=0,c=d.length;c>b;b++)Gd[d[b]]?d[b]=Gd[d[b]]:d[b]=W(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function Y(a,b){return a.isValid()?(b=Z(b,a.localeData()),Fd[b]=Fd[b]||X(b),Fd[b](a)):a.localeData().invalidDate()}function Z(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ed.lastIndex=0;d>=0&&Ed.test(a);)a=a.replace(Ed,c),Ed.lastIndex=0,d-=1;return a}function $(a,b,c){Yd[a]=A(b)?b:function(a,d){return a&&c?c:b}}function _(a,b){return j(Yd,a)?Yd[a](b._strict,b._locale):new RegExp(aa(a))}function aa(a){return ba(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function ba(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ca(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=v(a)}),c=0;c<a.length;c++)Zd[a[c]]=d}function da(a,b){ca(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ea(a,b,c){null!=b&&j(Zd,a)&&Zd[a](b,c._a,c,a)}function fa(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ga(a,b){return e(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||he).test(b)?"format":"standalone"][a.month()]}function ha(a,b){return e(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[he.test(b)?"format":"standalone"][a.month()]}function ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=l([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=ud.call(this._shortMonthsParse,g),-1!==e?e:null):(e=ud.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=ud.call(this._shortMonthsParse,g),-1!==e?e:(e=ud.call(this._longMonthsParse,g),-1!==e?e:null)):(e=ud.call(this._longMonthsParse,g),-1!==e?e:(e=ud.call(this._shortMonthsParse,g),-1!==e?e:null))}function ja(a,b,c){var d,e,f;if(this._monthsParseExact)return ia.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=l([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ka(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=v(b);else if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),fa(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function la(a){return null!=a?(ka(this,a),c.updateOffset(this,!0),this):Q(this,"Month")}function ma(){return fa(this.year(),this.month())}function na(a){return this._monthsParseExact?(j(this,"_monthsRegex")||pa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(j(this,"_monthsShortRegex")||(this._monthsShortRegex=ke),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function oa(a){return this._monthsParseExact?(j(this,"_monthsRegex")||pa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(j(this,"_monthsRegex")||(this._monthsRegex=le),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function pa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=l([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=ba(d[b]),e[b]=ba(e[b]);for(b=0;24>b;b++)f[b]=ba(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function qa(a){return ra(a)?366:365}function ra(a){return a%4===0&&a%100!==0||a%400===0}function sa(){return ra(this.year())}function ta(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ua(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function va(a,b,c){var d=7+b-c,e=(7+ua(a,0,d).getUTCDay()-b)%7;return-e+d-1}function wa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=va(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=qa(f)+j):j>qa(a)?(f=a+1,g=j-qa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function xa(a,b,c){var d,e,f=va(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+ya(e,b,c)):g>ya(a.year(),b,c)?(d=g-ya(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ya(a,b,c){var d=va(a,b,c),e=va(a+1,b,c);return(qa(a)-d+e)/7}function za(a){return xa(a,this._week.dow,this._week.doy).week}function Aa(){return this._week.dow}function Ba(){return this._week.doy}function Ca(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Da(a){var b=xa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Ea(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Fa(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ga(a,b){return e(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Ha(a){return this._weekdaysShort[a.day()]}function Ia(a){return this._weekdaysMin[a.day()]}function Ja(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=l([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=ud.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=ud.call(this._weekdaysParse,g),-1!==e?e:(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:(e=ud.call(this._weekdaysParse,g),-1!==e?e:(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:(e=ud.call(this._weekdaysParse,g),-1!==e?e:(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ka(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ja.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=l([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ea(a,this.localeData()),this.add(a-b,"d")):b}function Ma(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Na(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Fa(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Oa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(j(this,"_weekdaysRegex")||(this._weekdaysRegex=re),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Pa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(j(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=se),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(j(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=te),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ra(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;7>b;b++)c=l([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;7>b;b++)h[b]=ba(h[b]),i[b]=ba(i[b]),j[b]=ba(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Sa(){return this.hours()%12||12}function Ta(){return this.hours()||24}function Ua(a,b){V(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Va(a,b){return b._meridiemParse}function Wa(a){return"p"===(a+"").toLowerCase().charAt(0)}function Xa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Ya(a){return a?a.toLowerCase().replace("_","-"):a}function Za(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Ya(a[f]).split("-"),b=e.length,c=Ya(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=$a(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function $a(c){var d=null;if(!ye[c]&&"undefined"!=typeof b&&b&&b.exports)try{d=ue._abbr,a("./locale/"+c),_a(d)}catch(e){}return ye[c]}function _a(a,b){var c;return a&&(c=q(b)?cb(a):ab(a,b),c&&(ue=c)),ue._abbr}function ab(a,b){if(null!==b){var c=xe;return b.abbr=a,null!=ye[a]?(z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=ye[a]._config):null!=b.parentLocale&&(null!=ye[b.parentLocale]?c=ye[b.parentLocale]._config:z("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),ye[a]=new D(C(c,b)),_a(a),ye[a]}return delete ye[a],null}function bb(a,b){if(null!=b){var c,d=xe;null!=ye[a]&&(d=ye[a]._config),b=C(d,b),c=new D(b),c.parentLocale=ye[a],ye[a]=c,_a(a)}else null!=ye[a]&&(null!=ye[a].parentLocale?ye[a]=ye[a].parentLocale:null!=ye[a]&&delete ye[a]);return ye[a]}function cb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ue;if(!e(a)){if(b=$a(a))return b;a=[a]}return Za(a)}function db(){return td(ye)}function eb(a){var b,c=a._a;return c&&-2===n(a).overflow&&(b=c[_d]<0||c[_d]>11?_d:c[ae]<1||c[ae]>fa(c[$d],c[_d])?ae:c[be]<0||c[be]>24||24===c[be]&&(0!==c[ce]||0!==c[de]||0!==c[ee])?be:c[ce]<0||c[ce]>59?ce:c[de]<0||c[de]>59?de:c[ee]<0||c[ee]>999?ee:-1,n(a)._overflowDayOfYear&&($d>b||b>ae)&&(b=ae),n(a)._overflowWeeks&&-1===b&&(b=fe),n(a)._overflowWeekday&&-1===b&&(b=ge),n(a).overflow=b),a}function fb(a){var b,c,d,e,f,g,h=a._i,i=ze.exec(h)||Ae.exec(h);if(i){for(n(a).iso=!0,b=0,c=Ce.length;c>b;b++)if(Ce[b][1].exec(i[1])){e=Ce[b][0],d=Ce[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=De.length;c>b;b++)if(De[b][1].exec(i[3])){f=(i[2]||" ")+De[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Be.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),lb(a)}else a._isValid=!1}function gb(a){var b=Ee.exec(a._i);return null!==b?void(a._d=new Date(+b[1])):(fb(a),void(a._isValid===!1&&(delete a._isValid,c.createFromInputFallback(a))))}function hb(a,b,c){return null!=a?a:null!=b?b:c}function ib(a){var b=new Date(c.now());return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function jb(a){var b,c,d,e,f=[];if(!a._d){for(d=ib(a),a._w&&null==a._a[ae]&&null==a._a[_d]&&kb(a),a._dayOfYear&&(e=hb(a._a[$d],d[$d]),a._dayOfYear>qa(e)&&(n(a)._overflowDayOfYear=!0),c=ua(e,0,a._dayOfYear),a._a[_d]=c.getUTCMonth(),a._a[ae]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[be]&&0===a._a[ce]&&0===a._a[de]&&0===a._a[ee]&&(a._nextDay=!0,a._a[be]=0),a._d=(a._useUTC?ua:ta).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),
a._nextDay&&(a._a[be]=24)}}function kb(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=hb(b.GG,a._a[$d],xa(tb(),1,4).year),d=hb(b.W,1),e=hb(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=hb(b.gg,a._a[$d],xa(tb(),f,g).year),d=hb(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>ya(c,f,g)?n(a)._overflowWeeks=!0:null!=i?n(a)._overflowWeekday=!0:(h=wa(c,d,e,f,g),a._a[$d]=h.year,a._dayOfYear=h.dayOfYear)}function lb(a){if(a._f===c.ISO_8601)return void fb(a);a._a=[],n(a).empty=!0;var b,d,e,f,g,h=""+a._i,i=h.length,j=0;for(e=Z(a._f,a._locale).match(Dd)||[],b=0;b<e.length;b++)f=e[b],d=(h.match(_(f,a))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&n(a).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Gd[f]?(d?n(a).empty=!1:n(a).unusedTokens.push(f),ea(f,d,a)):a._strict&&!d&&n(a).unusedTokens.push(f);n(a).charsLeftOver=i-j,h.length>0&&n(a).unusedInput.push(h),a._a[be]<=12&&n(a).bigHour===!0&&a._a[be]>0&&(n(a).bigHour=void 0),n(a).parsedDateParts=a._a.slice(0),n(a).meridiem=a._meridiem,a._a[be]=mb(a._locale,a._a[be],a._meridiem),jb(a),eb(a)}function mb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function nb(a){var b,c,d,e,f;if(0===a._f.length)return n(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=r({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],lb(b),o(b)&&(f+=n(b).charsLeftOver,f+=10*n(b).unusedTokens.length,n(b).score=f,(null==d||d>f)&&(d=f,c=b));k(a,c||b)}function ob(a){if(!a._d){var b=M(a._i);a._a=i([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),jb(a)}}function pb(a){var b=new s(eb(qb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function qb(a){var b=a._i,c=a._f;return a._locale=a._locale||cb(a._l),null===b||void 0===c&&""===b?p({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),t(b)?new s(eb(b)):(e(c)?nb(a):h(b)?a._d=b:c?lb(a):rb(a),o(a)||(a._d=null),a))}function rb(a){var b=a._i;void 0===b?a._d=new Date(c.now()):h(b)?a._d=new Date(b.valueOf()):"string"==typeof b?gb(a):e(b)?(a._a=i(b.slice(0),function(a){return parseInt(a,10)}),jb(a)):"object"==typeof b?ob(a):"number"==typeof b?a._d=new Date(b):c.createFromInputFallback(a)}function sb(a,b,c,d,h){var i={};return"boolean"==typeof c&&(d=c,c=void 0),(f(a)&&g(a)||e(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=c,i._i=a,i._f=b,i._strict=d,pb(i)}function tb(a,b,c,d){return sb(a,b,c,d,!1)}function ub(a,b){var c,d;if(1===b.length&&e(b[0])&&(b=b[0]),!b.length)return tb();for(c=b[0],d=1;d<b.length;++d)(!b[d].isValid()||b[d][a](c))&&(c=b[d]);return c}function vb(){var a=[].slice.call(arguments,0);return ub("isBefore",a)}function wb(){var a=[].slice.call(arguments,0);return ub("isAfter",a)}function xb(a){var b=M(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=cb(),this._bubble()}function yb(a){return a instanceof xb}function zb(a,b){V(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+U(~~(a/60),2)+b+U(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ie)||["-",0,0],f=+(60*e[1])+v(e[2]);return"+"===e[0]?f:-f}function Bb(a,b){var d,e;return b._isUTC?(d=b.clone(),e=(t(a)||h(a)?a.valueOf():tb(a).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),c.updateOffset(d,!1),d):tb(a).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Db(a,b){var d,e=this._offset||0;return this.isValid()?null!=a?("string"==typeof a?a=Ab(Vd,a):Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(d=Cb(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==a&&(!b||this._changeInProgress?Ub(this,Ob(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Cb(this):null!=a?this:NaN}function Eb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this}function Hb(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ab(Ud,this._i)),this}function Ib(a){return this.isValid()?(a=a?tb(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!q(this._isDSTShifted))return this._isDSTShifted;var a={};if(r(a,this),a=qb(a),a._a){var b=a._isUTC?l(a._a):tb(a._a);this._isDSTShifted=this.isValid()&&w(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return this.isValid()?!this._isUTC:!1}function Mb(){return this.isValid()?this._isUTC:!1}function Nb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Ob(a,b){var c,d,e,f=a,g=null;return yb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=Je.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:v(g[ae])*c,h:v(g[be])*c,m:v(g[ce])*c,s:v(g[de])*c,ms:v(g[ee])*c}):(g=Ke.exec(a))?(c="-"===g[1]?-1:1,f={y:Pb(g[2],c),M:Pb(g[3],c),w:Pb(g[4],c),d:Pb(g[5],c),h:Pb(g[6],c),m:Pb(g[7],c),s:Pb(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=Rb(tb(f.from),tb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new xb(f),yb(a)&&j(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Sb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Tb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(z(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ob(c,d),Ub(this,e,a),this}}function Ub(a,b,d,e){var f=b._milliseconds,g=Sb(b._days),h=Sb(b._months);a.isValid()&&(e=null==e?!0:e,f&&a._d.setTime(a._d.valueOf()+f*d),g&&R(a,"Date",Q(a,"Date")+g*d),h&&ka(a,Q(a,"Month")+h*d),e&&c.updateOffset(a,g||h))}function Vb(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"}function Wb(a,b){var d=a||tb(),e=Bb(d,this).startOf("day"),f=c.calendarFormat(this,e)||"sameElse",g=b&&(A(b[f])?b[f].call(this,d):b[f]);return this.format(g||this.localeData().calendar(f,this,tb(d)))}function Xb(){return new s(this)}function Yb(a,b){var c=t(a)?a:tb(a);return this.isValid()&&c.isValid()?(b=L(q(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function Zb(a,b){var c=t(a)?a:tb(a);return this.isValid()&&c.isValid()?(b=L(q(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function $b(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function _b(a,b){var c,d=t(a)?a:tb(a);return this.isValid()&&d.isValid()?(b=L(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function ac(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function bc(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function cc(a,b,c){var d,e,f,g;return this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=L(b),"year"===b||"month"===b||"quarter"===b?(g=dc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:u(g)):NaN):NaN}function dc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function ec(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?A(Date.prototype.toISOString)?this.toDate().toISOString():Y(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function gc(a){a||(a=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var b=Y(this,a);return this.localeData().postformat(b)}function hc(a,b){return this.isValid()&&(t(a)&&a.isValid()||tb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(tb(),a)}function jc(a,b){return this.isValid()&&(t(a)&&a.isValid()||tb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(tb(),a)}function lc(a){var b;return void 0===a?this._locale._abbr:(b=cb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){switch(a=L(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){return a=L(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){return this.isValid()?this.toISOString():null}function vc(){return o(this)}function wc(){return k({},n(this))}function xc(){return n(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){V(0,[a,a.length],0,b)}function Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return ya(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return ya(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?xa(this,d,e).year:(f=ya(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=wa(a,b,c,d,e),g=ua(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Ic(a,b){b[ee]=v(1e3*("0."+a))}function Jc(){return this._isUTC?"UTC":""}function Kc(){return this._isUTC?"Coordinated Universal Time":""}function Lc(a){return tb(1e3*a)}function Mc(){return tb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=cb(),f=l().set(d,b);return e[c](f,a)}function Pc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Oc(a,d,c,"month");return e}function Qc(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=cb(),f=a?e._week.dow:0;if(null!=c)return Oc(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Oc(b,(g+f)%7,d,"day");return h}function Rc(a,b){return Pc(a,b,"months")}function Sc(a,b){return Pc(a,b,"monthsShort")}function Tc(a,b,c){return Qc(a,b,c,"weekdays")}function Uc(a,b,c){return Qc(a,b,c,"weekdaysShort")}function Vc(a,b,c){return Qc(a,b,c,"weekdaysMin")}function Wc(){var a=this._data;return this._milliseconds=We(this._milliseconds),this._days=We(this._days),this._months=We(this._months),a.milliseconds=We(a.milliseconds),a.seconds=We(a.seconds),a.minutes=We(a.minutes),a.hours=We(a.hours),a.months=We(a.months),a.years=We(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Yc(a,b){return Xc(this,a,b,1)}function Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return 0>a?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=u(f/1e3),i.seconds=a%60,b=u(a/60),i.minutes=b%60,c=u(b/60),i.hours=c%24,g+=u(c/24),e=u(ad(g)),h+=e,g-=$c(bd(e)),d=u(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=L(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=L(a),this[a+"s"]()}function gd(a){return function(){return this._data[a]}}function hd(){return u(this.days()/7)}function id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=lf(d.as("s")),f=lf(d.as("m")),g=lf(d.as("h")),h=lf(d.as("d")),i=lf(d.as("M")),j=lf(d.as("y")),k=e<mf.s&&["s",e]||1>=f&&["m"]||f<mf.m&&["mm",f]||1>=g&&["h"]||g<mf.h&&["hh",g]||1>=h&&["d"]||h<mf.d&&["dd",h]||1>=i&&["M"]||i<mf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}function kd(a){return void 0===a?lf:"function"==typeof a?(lf=a,!0):!1}function ld(a,b){return void 0===mf[a]?!1:void 0===b?mf[a]:(mf[a]=b,!0)}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){var a,b,c,d=nf(this._milliseconds)/1e3,e=nf(this._days),f=nf(this._months);a=u(d/60),b=u(a/60),d%=60,a%=60,c=u(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var od,pd;pd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var qd=c.momentProperties=[],rd=!1,sd={};c.suppressDeprecationWarnings=!1,c.deprecationHandler=null;var td;td=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)j(a,b)&&c.push(b);return c};var ud,vd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},wd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},xd="Invalid date",yd="%d",zd=/\d{1,2}/,Ad={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Bd={},Cd={},Dd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ed=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fd={},Gd={},Hd=/\d/,Id=/\d\d/,Jd=/\d{3}/,Kd=/\d{4}/,Ld=/[+-]?\d{6}/,Md=/\d\d?/,Nd=/\d\d\d\d?/,Od=/\d\d\d\d\d\d?/,Pd=/\d{1,3}/,Qd=/\d{1,4}/,Rd=/[+-]?\d{1,6}/,Sd=/\d+/,Td=/[+-]?\d+/,Ud=/Z|[+-]\d\d:?\d\d/gi,Vd=/Z|[+-]\d\d(?::?\d\d)?/gi,Wd=/[+-]?\d+(\.\d{1,3})?/,Xd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Yd={},Zd={},$d=0,_d=1,ae=2,be=3,ce=4,de=5,ee=6,fe=7,ge=8;ud=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),V("MMMM",0,0,function(a){return this.localeData().months(this,a)}),K("month","M"),N("month",8),$("M",Md),$("MM",Md,Id),$("MMM",function(a,b){return b.monthsShortRegex(a)}),$("MMMM",function(a,b){return b.monthsRegex(a)}),ca(["M","MM"],function(a,b){b[_d]=v(a)-1}),ca(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[_d]=e:n(c).invalidMonth=a});var he=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),je="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ke=Xd,le=Xd;V("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),K("year","y"),N("year",1),$("Y",Td),$("YY",Md,Id),$("YYYY",Qd,Kd),$("YYYYY",Rd,Ld),$("YYYYYY",Rd,Ld),ca(["YYYYY","YYYYYY"],$d),ca("YYYY",function(a,b){b[$d]=2===a.length?c.parseTwoDigitYear(a):v(a)}),ca("YY",function(a,b){b[$d]=c.parseTwoDigitYear(a)}),ca("Y",function(a,b){b[$d]=parseInt(a,10)}),c.parseTwoDigitYear=function(a){return v(a)+(v(a)>68?1900:2e3)};var me=P("FullYear",!0);V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),K("week","w"),K("isoWeek","W"),N("week",5),N("isoWeek",5),$("w",Md),$("ww",Md,Id),$("W",Md),$("WW",Md,Id),da(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=v(a)});var ne={dow:0,doy:6};V("d",0,"do","day"),V("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),V("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),V("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),K("day","d"),K("weekday","e"),K("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),$("d",Md),$("e",Md),$("E",Md),$("dd",function(a,b){return b.weekdaysMinRegex(a)}),$("ddd",function(a,b){return b.weekdaysShortRegex(a)}),$("dddd",function(a,b){return b.weekdaysRegex(a)}),da(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:n(c).invalidWeekday=a}),da(["d","e","E"],function(a,b,c,d){b[d]=v(a)});var oe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),re=Xd,se=Xd,te=Xd;V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Sa),V("k",["kk",2],0,Ta),V("hmm",0,0,function(){return""+Sa.apply(this)+U(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Sa.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Ua("a",!0),Ua("A",!1),K("hour","h"),N("hour",13),$("a",Va),$("A",Va),$("H",Md),$("h",Md),$("HH",Md,Id),$("hh",Md,Id),$("hmm",Nd),$("hmmss",Od),$("Hmm",Nd),$("Hmmss",Od),ca(["H","HH"],be),ca(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ca(["h","hh"],function(a,b,c){b[be]=v(a),n(c).bigHour=!0}),ca("hmm",function(a,b,c){var d=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d)),n(c).bigHour=!0}),ca("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d,2)),b[de]=v(a.substr(e)),n(c).bigHour=!0}),ca("Hmm",function(a,b,c){var d=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d))}),ca("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d,2)),b[de]=v(a.substr(e))});var ue,ve=/[ap]\.?m?\.?/i,we=P("Hours",!0),xe={calendar:vd,longDateFormat:wd,invalidDate:xd,ordinal:yd,ordinalParse:zd,relativeTime:Ad,months:ie,monthsShort:je,week:ne,weekdays:oe,weekdaysMin:qe,weekdaysShort:pe,meridiemParse:ve},ye={},ze=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ae=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Be=/Z|[+-]\d\d(?::?\d\d)?/,Ce=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],De=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ee=/^\/?Date\((\-?\d+)/i;c.createFromInputFallback=y("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),c.ISO_8601=function(){};var Fe=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=tb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:p()}),Ge=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=tb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:p()}),He=function(){return Date.now?Date.now():+new Date};zb("Z",":"),zb("ZZ",""),$("Z",Vd),$("ZZ",Vd),ca(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Vd,a)});var Ie=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Je=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ke=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=xb.prototype;var Le=Tb(1,"add"),Me=Tb(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ne=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),K("weekYear","gg"),K("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),$("G",Td),$("g",Td),$("GG",Md,Id),$("gg",Md,Id),$("GGGG",Qd,Kd),$("gggg",Qd,Kd),$("GGGGG",Rd,Ld),$("ggggg",Rd,Ld),da(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=v(a)}),da(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)}),V("Q",0,"Qo","quarter"),K("quarter","Q"),N("quarter",7),$("Q",Hd),ca("Q",function(a,b){b[_d]=3*(v(a)-1)}),V("D",["DD",2],"Do","date"),K("date","D"),N("date",9),$("D",Md),$("DD",Md,Id),$("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ca(["D","DD"],ae),ca("Do",function(a,b){b[ae]=v(a.match(Md)[0],10)});var Oe=P("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),K("dayOfYear","DDD"),N("dayOfYear",4),$("DDD",Pd),$("DDDD",Jd),ca(["DDD","DDDD"],function(a,b,c){c._dayOfYear=v(a)}),V("m",["mm",2],0,"minute"),K("minute","m"),N("minute",14),$("m",Md),$("mm",Md,Id),ca(["m","mm"],ce);var Pe=P("Minutes",!1);V("s",["ss",2],0,"second"),K("second","s"),N("second",15),$("s",Md),$("ss",Md,Id),ca(["s","ss"],de);var Qe=P("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),K("millisecond","ms"),N("millisecond",16),$("S",Pd,Hd),$("SS",Pd,Id),$("SSS",Pd,Jd);var Re;for(Re="SSSS";Re.length<=9;Re+="S")$(Re,Sd);for(Re="S";Re.length<=9;Re+="S")ca(Re,Ic);var Se=P("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var Te=s.prototype;Te.add=Le,Te.calendar=Wb,Te.clone=Xb,Te.diff=cc,Te.endOf=oc,Te.format=gc,Te.from=hc,Te.fromNow=ic,Te.to=jc,Te.toNow=kc,Te.get=S,Te.invalidAt=xc,Te.isAfter=Yb,Te.isBefore=Zb,Te.isBetween=$b,Te.isSame=_b,Te.isSameOrAfter=ac,Te.isSameOrBefore=bc,Te.isValid=vc,Te.lang=Ne,Te.locale=lc,Te.localeData=mc,Te.max=Ge,Te.min=Fe,Te.parsingFlags=wc,Te.set=T,Te.startOf=nc,Te.subtract=Me,Te.toArray=sc,Te.toObject=tc,Te.toDate=rc,Te.toISOString=fc,Te.toJSON=uc,Te.toString=ec,Te.unix=qc,Te.valueOf=pc,Te.creationData=yc,Te.year=me,Te.isLeapYear=sa,Te.weekYear=Ac,Te.isoWeekYear=Bc,Te.quarter=Te.quarters=Gc,Te.month=la,Te.daysInMonth=ma,Te.week=Te.weeks=Ca,Te.isoWeek=Te.isoWeeks=Da,Te.weeksInYear=Dc,Te.isoWeeksInYear=Cc,Te.date=Oe,Te.day=Te.days=La,Te.weekday=Ma,Te.isoWeekday=Na,Te.dayOfYear=Hc,Te.hour=Te.hours=we,Te.minute=Te.minutes=Pe,Te.second=Te.seconds=Qe,Te.millisecond=Te.milliseconds=Se,Te.utcOffset=Db,Te.utc=Fb,Te.local=Gb,Te.parseZone=Hb,Te.hasAlignedHourOffset=Ib,Te.isDST=Jb,Te.isLocal=Lb,Te.isUtcOffset=Mb,Te.isUtc=Nb,Te.isUTC=Nb,Te.zoneAbbr=Jc,Te.zoneName=Kc,Te.dates=y("dates accessor is deprecated. Use date instead.",Oe),Te.months=y("months accessor is deprecated. Use month instead",la),Te.years=y("years accessor is deprecated. Use year instead",me),Te.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Eb),Te.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Kb);var Ue=Te,Ve=D.prototype;Ve.calendar=E,Ve.longDateFormat=F,Ve.invalidDate=G,Ve.ordinal=H,Ve.preparse=Nc,Ve.postformat=Nc,Ve.relativeTime=I,Ve.pastFuture=J,Ve.set=B,Ve.months=ga,Ve.monthsShort=ha,Ve.monthsParse=ja,Ve.monthsRegex=oa,Ve.monthsShortRegex=na,Ve.week=za,Ve.firstDayOfYear=Ba,Ve.firstDayOfWeek=Aa,Ve.weekdays=Ga,Ve.weekdaysMin=Ia,Ve.weekdaysShort=Ha,Ve.weekdaysParse=Ka,Ve.weekdaysRegex=Oa,Ve.weekdaysShortRegex=Pa,Ve.weekdaysMinRegex=Qa,Ve.isPM=Wa,Ve.meridiem=Xa,_a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===v(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.lang=y("moment.lang is deprecated. Use moment.locale instead.",_a),c.langData=y("moment.langData is deprecated. Use moment.localeData instead.",cb);var We=Math.abs,Xe=ed("ms"),Ye=ed("s"),Ze=ed("m"),$e=ed("h"),_e=ed("d"),af=ed("w"),bf=ed("M"),cf=ed("y"),df=gd("milliseconds"),ef=gd("seconds"),ff=gd("minutes"),gf=gd("hours"),hf=gd("days"),jf=gd("months"),kf=gd("years"),lf=Math.round,mf={s:45,m:45,h:22,d:26,M:11},nf=Math.abs,of=xb.prototype;of.abs=Wc,of.add=Yc,of.subtract=Zc,of.as=cd,of.asMilliseconds=Xe,of.asSeconds=Ye,of.asMinutes=Ze,of.asHours=$e,of.asDays=_e,of.asWeeks=af,of.asMonths=bf,of.asYears=cf,of.valueOf=dd,of._bubble=_c,of.get=fd,of.milliseconds=df,of.seconds=ef,of.minutes=ff,of.hours=gf,of.days=hf,of.weeks=hd,of.months=jf,of.years=kf,of.humanize=md,of.toISOString=nd,of.toString=nd,of.toJSON=nd,of.locale=lc,of.localeData=mc,of.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),of.lang=Ne,V("X",0,0,"unix"),V("x",0,0,"valueOf"),$("x",Td),$("X",Wd),ca("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ca("x",function(a,b,c){c._d=new Date(v(a))}),c.version="2.14.1",d(tb),c.fn=Ue,c.min=vb,c.max=wb,c.now=He,c.utc=l,c.unix=Lc,c.months=Rc,c.isDate=h,c.locale=_a,c.invalid=p,c.duration=Ob,c.isMoment=t,c.weekdays=Tc,c.parseZone=Mc,c.localeData=cb,c.isDuration=yb,c.monthsShort=Sc,c.weekdaysMin=Vc,c.defineLocale=ab,c.updateLocale=bb,c.locales=db,c.weekdaysShort=Uc,c.normalizeUnits=L,c.relativeTimeRounding=kd,c.relativeTimeThreshold=ld,c.calendarFormat=Vb,c.prototype=Ue;var pf=c;return pf})},{}],5:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=u(d,f,4);var g=!z(c)&&t.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=v(c,d);for(var e=null!=b&&b.length,f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b){for(var c=E.length,d="function"==typeof a.constructor?j:i;c--;){var e=E[c];("constructor"===e?t.has(a,e):e in a&&a[e]!==d[e]&&!t.contains(b,e))&&b.push(e)}}var f=this,g=f._,h=Array.prototype,i=Object.prototype,j=Function.prototype,k=h.push,l=h.slice,m=i.toString,n=i.hasOwnProperty,o=Array.isArray,p=Object.keys,q=j.bind,r=Object.create,s=function(){},t=function(a){return a instanceof t?a:this instanceof t?void(this._wrapped=a):new t(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=t),c._=t):f._=t,t.VERSION="1.8.0";var u=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},v=function(a,b,c){return null==a?t.identity:t.isFunction(a)?u(a,b,c):t.isObject(a)?t.matcher(a):t.property(a)};t.iteratee=function(a,b){return v(a,b,1/0)};var w=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},x=function(a){if(!t.isObject(a))return{};if(r)return r(a);s.prototype=a;var b=new s;return s.prototype=null,b},y=Math.pow(2,53)-1,z=function(a){var b=a&&a.length;return"number"==typeof b&&b>=0&&y>=b};t.each=t.forEach=function(a,b,c){b=u(b,c);var d,e;if(z(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=t.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},t.map=t.collect=function(a,b,c){b=v(b,c);for(var d=!z(a)&&t.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},t.reduce=t.foldl=t.inject=a(1),t.reduceRight=t.foldr=a(-1),t.find=t.detect=function(a,b,c){var d;return d=z(a)?t.findIndex(a,b,c):t.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},t.filter=t.select=function(a,b,c){var d=[];return b=v(b,c),t.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},t.reject=function(a,b,c){return t.filter(a,t.negate(v(b)),c)},t.every=t.all=function(a,b,c){b=v(b,c);for(var d=!z(a)&&t.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},t.some=t.any=function(a,b,c){b=v(b,c);for(var d=!z(a)&&t.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},t.contains=t.includes=t.include=function(a,b){
return z(a)||(a=t.values(a)),t.indexOf(a,b)>=0},t.invoke=function(a,b){var c=l.call(arguments,2),d=t.isFunction(b);return t.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},t.pluck=function(a,b){return t.map(a,t.property(b))},t.where=function(a,b){return t.filter(a,t.matcher(b))},t.findWhere=function(a,b){return t.find(a,t.matcher(b))},t.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=z(a)?a:t.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=v(b,c),t.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},t.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=z(a)?a:t.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=v(b,c),t.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},t.shuffle=function(a){for(var b,c=z(a)?a:t.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=t.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},t.sample=function(a,b,c){return null==b||c?(z(a)||(a=t.values(a)),a[t.random(a.length-1)]):t.shuffle(a).slice(0,Math.max(0,b))},t.sortBy=function(a,b,c){return b=v(b,c),t.pluck(t.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var A=function(a){return function(b,c,d){var e={};return c=v(c,d),t.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};t.groupBy=A(function(a,b,c){t.has(a,c)?a[c].push(b):a[c]=[b]}),t.indexBy=A(function(a,b,c){a[c]=b}),t.countBy=A(function(a,b,c){t.has(a,c)?a[c]++:a[c]=1}),t.toArray=function(a){return a?t.isArray(a)?l.call(a):z(a)?t.map(a,t.identity):t.values(a):[]},t.size=function(a){return null==a?0:z(a)?a.length:t.keys(a).length},t.partition=function(a,b,c){b=v(b,c);var d=[],e=[];return t.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},t.first=t.head=t.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:t.initial(a,a.length-b)},t.initial=function(a,b,c){return l.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},t.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:t.rest(a,Math.max(0,a.length-b))},t.rest=t.tail=t.drop=function(a,b,c){return l.call(a,null==b||c?1:b)},t.compact=function(a){return t.filter(a,t.identity)};var B=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=a&&a.length;h>g;g++){var i=a[g];if(z(i)&&(t.isArray(i)||t.isArguments(i))){b||(i=B(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};t.flatten=function(a,b){return B(a,b,!1)},t.without=function(a){return t.difference(a,l.call(arguments,1))},t.uniq=t.unique=function(a,b,c,d){if(null==a)return[];t.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=v(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?t.contains(f,j)||(f.push(j),e.push(i)):t.contains(e,i)||e.push(i)}return e},t.union=function(){return t.uniq(B(arguments,!0,!0))},t.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!t.contains(b,f)){for(var g=1;c>g&&t.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},t.difference=function(a){var b=B(arguments,!0,!0,1);return t.filter(a,function(a){return!t.contains(b,a)})},t.zip=function(){return t.unzip(arguments)},t.unzip=function(a){for(var b=a&&t.max(a,"length").length||0,c=Array(b),d=0;b>d;d++)c[d]=t.pluck(a,d);return c},t.object=function(a,b){for(var c={},d=0,e=a&&a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},t.indexOf=function(a,b,c){var d=0,e=a&&a.length;if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else if(c&&e)return d=t.sortedIndex(a,b),a[d]===b?d:-1;if(b!==b)return t.findIndex(l.call(a,d),t.isNaN);for(;e>d;d++)if(a[d]===b)return d;return-1},t.lastIndexOf=function(a,b,c){var d=a?a.length:0;if("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1)),b!==b)return t.findLastIndex(l.call(a,0,d),t.isNaN);for(;--d>=0;)if(a[d]===b)return d;return-1},t.findIndex=d(1),t.findLastIndex=d(-1),t.sortedIndex=function(a,b,c,d){c=v(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},t.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var C=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=x(a.prototype),g=a.apply(f,e);return t.isObject(g)?g:f};t.bind=function(a,b){if(q&&a.bind===q)return q.apply(a,l.call(arguments,1));if(!t.isFunction(a))throw new TypeError("Bind must be called on a function");var c=l.call(arguments,2);return function d(){return C(a,d,b,this,c.concat(l.call(arguments)))}},t.partial=function(a){var b=l.call(arguments,1);return function c(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===t?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return C(a,c,this,this,f)}},t.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=t.bind(a[c],a);return a},t.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return t.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},t.delay=function(a,b){var c=l.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},t.defer=t.partial(t.delay,t,1),t.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:t.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=t.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},t.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=t.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=t.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},t.wrap=function(a,b){return t.partial(b,a)},t.negate=function(a){return function(){return!a.apply(this,arguments)}},t.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},t.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},t.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},t.once=t.partial(t.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),E=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];t.keys=function(a){if(!t.isObject(a))return[];if(p)return p(a);var b=[];for(var c in a)t.has(a,c)&&b.push(c);return D&&e(a,b),b},t.allKeys=function(a){if(!t.isObject(a))return[];var b=[];for(var c in a)b.push(c);return D&&e(a,b),b},t.values=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},t.mapObject=function(a,b,c){b=v(b,c);for(var d,e=t.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},t.pairs=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},t.invert=function(a){for(var b={},c=t.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},t.functions=t.methods=function(a){var b=[];for(var c in a)t.isFunction(a[c])&&b.push(c);return b.sort()},t.extend=w(t.allKeys),t.extendOwn=w(t.keys),t.findKey=function(a,b,c){b=v(b,c);for(var d,e=t.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},t.pick=function(a,b,c){var d,e={};if(null==a)return e;if(t.isFunction(b)){b=u(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=B(arguments,!1,!1,1);a=new Object(a);for(var h=0,i=g.length;i>h;h++)d=g[h],d in a&&(e[d]=a[d])}return e},t.omit=function(a,b,c){if(t.isFunction(b))b=t.negate(b);else{var d=t.map(B(arguments,!1,!1,1),String);b=function(a,b){return!t.contains(d,b)}}return t.pick(a,b,c)},t.defaults=w(t.allKeys,!0),t.clone=function(a){return t.isObject(a)?t.isArray(a)?a.slice():t.extend({},a):a},t.tap=function(a,b){return b(a),a},t.isMatch=function(a,b){var c=t.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof t&&(a=a._wrapped),b instanceof t&&(b=b._wrapped);var e=m.call(a);if(e!==m.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(t.isFunction(g)&&g instanceof g&&t.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!F(a[i],b[i],c,d))return!1}else{var j,k=t.keys(a);if(i=k.length,t.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!t.has(b,j)||!F(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};t.isEqual=function(a,b){return F(a,b)},t.isEmpty=function(a){return null==a?!0:z(a)&&(t.isArray(a)||t.isString(a)||t.isArguments(a))?0===a.length:0===t.keys(a).length},t.isElement=function(a){return!(!a||1!==a.nodeType)},t.isArray=o||function(a){return"[object Array]"===m.call(a)},t.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},t.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){t["is"+a]=function(b){return m.call(b)==="[object "+a+"]"}}),t.isArguments(arguments)||(t.isArguments=function(a){return t.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(t.isFunction=function(a){return"function"==typeof a||!1}),t.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},t.isNaN=function(a){return t.isNumber(a)&&a!==+a},t.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===m.call(a)},t.isNull=function(a){return null===a},t.isUndefined=function(a){return void 0===a},t.has=function(a,b){return null!=a&&n.call(a,b)},t.noConflict=function(){return f._=g,this},t.identity=function(a){return a},t.constant=function(a){return function(){return a}},t.noop=function(){},t.property=function(a){return function(b){return null==b?void 0:b[a]}},t.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},t.matcher=t.matches=function(a){return a=t.extendOwn({},a),function(b){return t.isMatch(b,a)}},t.times=function(a,b,c){var d=Array(Math.max(0,a));b=u(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},t.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},t.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=t.invert(G),I=function(a){var b=function(b){return a[b]},c="(?:"+t.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};t.escape=I(G),t.unescape=I(H),t.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),t.isFunction(d)?d.call(a):d};var J=0;t.uniqueId=function(a){var b=++J+"";return a?a+b:b},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\u2028|\u2029/g,N=function(a){return"\\"+L[a]};t.template=function(a,b,c){!b&&c&&(b=c),b=t.defaults({},b,t.templateSettings);var d=RegExp([(b.escape||K).source,(b.interpolate||K).source,(b.evaluate||K).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(M,N),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,t)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},t.chain=function(a){var b=t(a);return b._chain=!0,b};var O=function(a,b){return a._chain?t(b).chain():b};t.mixin=function(a){t.each(t.functions(a),function(b){var c=t[b]=a[b];t.prototype[b]=function(){var a=[this._wrapped];return k.apply(a,arguments),O(this,c.apply(t,a))}})},t.mixin(t),t.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=h[a];t.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],O(this,c)}}),t.each(["concat","join","slice"],function(a){var b=h[a];t.prototype[a]=function(){return O(this,b.apply(this._wrapped,arguments))}}),t.prototype.value=function(){return this._wrapped},t.prototype.valueOf=t.prototype.toJSON=t.prototype.value,t.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return t})}).call(this)},{}]},{},[1])}(window||module.exports)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25,async:21,moment:24,underscore:22}],21:[function(a,b,c){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,"undefined"!=typeof setImmediate?f.setImmediate=function(a){setImmediate(a)}:f.setImmediate=f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(a){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(a){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(a){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(a){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(a){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var e=Array.prototype.slice.call(arguments,1);if(e.length<=1&&(e=e[0]),a){var h={};g(j(d),function(a){h[a]=d[a]}),h[c]=e,b(a,h),b=function(){}}else d[c]=e,f.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],o=function(){return i(n,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(o())e[e.length-1](m,d);else{var p=function(){o()&&(k(p),e[e.length-1](m,d))};h(p)}})},f.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();g?e.push(d(g)):e.push(b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){return d?c(d):void(b()?f.doWhilst(a,b,c):c())})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){return d?c(d):void(b()?c():f.doUntil(a,b,c))})},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},f=c(d);a(b.data,f)}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};var w=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=l(w),f.applyEachSeries=n(w),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("_process"))},{_process:25}],22:[function(a,b,c){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?void(this._wrapped=a):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.6.0";var A=z.each=z.forEach=function(a,b,c){if(null==a)return a;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g=z.keys(a),d=0,f=g.length;f>d;d++)if(b.call(c,a[g[d]],g[d],a)===e)return;return a};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,z.property(b))},z.where=function(a,b){return z.filter(a,z.matches(b))},z.findWhere=function(a,b){return z.find(a,z.matches(b))},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d},z.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=z.values(a)),a[z.random(a.length-1)]):z.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return null==a?z.identity:z.isFunction(a)?a:z.property(a)};z.sortBy=function(a,b,c){return b=D(b),z.pluck(z.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a){return function(b,c,d){var e={};return c=D(c),A(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};z.groupBy=E(function(a,b,c){z.has(a,b)?a[b].push(c):a[b]=[c]}),z.indexBy=E(function(a,b,c){a[b]=c}),z.countBy=E(function(a,b){z.has(a,b)?a[b]++:a[b]=1}),z.sortedIndex=function(a,b,c,d){c=D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return b&&z.every(a,z.isArray)?k.apply(c,a):(A(a,function(a){z.isArray(a)||z.isArguments(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c)};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.partition=function(a,b){var c=[],d=[];return A(a,function(a){(b(a)?c:d).push(a)}),[c,d]},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(z.flatten(arguments,!0))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.contains(b,a)})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=z.max(z.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=z.pluck(arguments,""+c);return b},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}},z.partial=function(a){var b=j.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===z&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},z.bindAll=function(a){var b=j.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:z.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=z.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},z.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=z.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=z.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return z.partial(b,a)},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=function(a){if(!z.isObject(a))return[];if(x)return x(a);var b=[];for(var c in a)z.has(a,c)&&b.push(c);
return b},z.values=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},z.pairs=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},z.invert=function(a){for(var b={},c=z.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(z.isFunction(g)&&g instanceof g&&z.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=H(a[i],b[i],c,d)););}else{for(var k in a)if(z.has(a,k)&&(i++,!(j=z.has(b,k)&&H(a[k],b[k],c,d))))break;if(j){for(k in b)if(z.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.constant=function(a){return function(){return a}},z.property=function(a){return function(b){return b[a]}},z.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},z.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},z.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(null==a)return void 0;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=++K+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(N,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return z})}).call(this)},{}],23:[function(a,b,c){!function(a,c){"use strict";"object"==typeof b&&"object"==typeof b.exports?b.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||_;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=ma.type(a);return"function"===c||ma.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b,c){if(ma.isFunction(b))return ma.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ma.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(wa.test(b))return ma.filter(b,a,c);b=ma.filter(b,a)}return ma.grep(a,function(a){return ea.call(b,a)>-1!==c&&1===a.nodeType})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return ma.each(a.match(Ca)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&ma.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&ma.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){_.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),ma.ready()}function l(){this.expando=ma.expando+l.uid++}function m(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ka,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Ja.test(c)?JSON.parse(c):c}catch(e){}Ia.set(a,b,c)}else c=void 0;return c}function n(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return ma.css(a,b,"")},i=h(),j=c&&c[3]||(ma.cssNumber[b]?"":"px"),k=(ma.cssNumber[b]||"px"!==j&&+i)&&Ma.exec(ma.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,ma.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function o(a){var b,c=a.ownerDocument,d=a.nodeName,e=Qa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=ma.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Qa[d]=e,e)}function p(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ha.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Oa(d)&&(e[f]=o(d))):"none"!==c&&(e[f]="none",Ha.set(d,"display",c)));for(f=0;g>f;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function q(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&ma.nodeName(a,b)?ma.merge([a],c):c}function r(a,b){for(var c=0,d=a.length;d>c;c++)Ha.set(a[c],"globalEval",!b||Ha.get(b[c],"globalEval"))}function s(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;o>n;n++)if(f=a[n],f||0===f)if("object"===ma.type(f))ma.merge(m,f.nodeType?[f]:f);else if(Va.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Sa.exec(f)||["",""])[1].toLowerCase(),i=Ua[h]||Ua._default,g.innerHTML=i[1]+ma.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;ma.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&ma.inArray(f,d)>-1)e&&e.push(f);else if(j=ma.contains(f.ownerDocument,f),g=q(l.appendChild(f),"script"),j&&r(g),c)for(k=0;f=g[k++];)Ta.test(f.type||"")&&c.push(f);return l}function t(){return!0}function u(){return!1}function v(){try{return _.activeElement}catch(a){}}function w(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)w(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=u;else if(!e)return a;return 1===f&&(g=e,e=function(a){return ma().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=ma.guid++)),a.each(function(){ma.event.add(this,b,e,d,c)})}function x(a,b){return ma.nodeName(a,"table")&&ma.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function y(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function z(a){var b=bb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function A(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ha.hasData(a)&&(f=Ha.access(a),g=Ha.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)ma.event.add(b,e,j[e][c])}Ia.hasData(a)&&(h=Ia.access(a),i=ma.extend({},h),Ia.set(b,i))}}function B(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ra.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function C(a,b,d,e){b=ca.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=ma.isFunction(o);if(p||m>1&&"string"==typeof o&&!ka.checkClone&&ab.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),C(f,b,d,e)});if(m&&(f=s(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=ma.map(q(f,"script"),y),i=h.length;m>l;l++)j=f,l!==n&&(j=ma.clone(j,!0,!0),i&&ma.merge(h,q(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,ma.map(h,z),l=0;i>l;l++)j=h[l],Ta.test(j.type||"")&&!Ha.access(j,"globalEval")&&ma.contains(k,j)&&(j.src?ma._evalUrl&&ma._evalUrl(j.src):c(j.textContent.replace(cb,""),k))}return a}function D(a,b,c){for(var d,e=b?ma.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||ma.cleanData(q(d)),d.parentNode&&(c&&ma.contains(d.ownerDocument,d)&&r(q(d,"script")),d.parentNode.removeChild(d));return a}function E(a,b,c){var d,e,f,g,h=a.style;return c=c||fb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||ma.contains(a.ownerDocument,a)||(g=ma.style(a,b)),!ka.pixelMarginRight()&&eb.test(g)&&db.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function F(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function G(a){if(a in kb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=jb.length;c--;)if(a=jb[c]+b,a in kb)return a}function H(a,b,c){var d=Ma.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function I(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ma.css(a,c+Na[f],!0,e)),d?("content"===c&&(g-=ma.css(a,"padding"+Na[f],!0,e)),"margin"!==c&&(g-=ma.css(a,"border"+Na[f]+"Width",!0,e))):(g+=ma.css(a,"padding"+Na[f],!0,e),"padding"!==c&&(g+=ma.css(a,"border"+Na[f]+"Width",!0,e)));return g}function J(a,b,c){var d,e=!0,f=fb(a),g="border-box"===ma.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),0>=d||null==d){if(d=E(a,b,f),(0>d||null==d)&&(d=a.style[b]),eb.test(d))return d;e=g&&(ka.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+I(a,b,c||(g?"border":"content"),e,f)+"px"}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(){mb&&(a.requestAnimationFrame(L),ma.fx.tick())}function M(){return a.setTimeout(function(){lb=void 0}),lb=ma.now()}function N(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=Na[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function O(a,b,c){for(var d,e=(R.tweeners[b]||[]).concat(R.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function P(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,q=a.nodeType&&Oa(a),r=Ha.get(a,"fxshow");c.queue||(g=ma._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,ma.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],nb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}n[d]=r&&r[d]||ma.style(a,d)}if(i=!ma.isEmptyObject(b),i||!ma.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ha.get(a,"display")),k=ma.css(a,"display"),"none"===k&&(j?k=j:(p([a],!0),j=a.style.display||j,k=ma.css(a,"display"),p([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===ma.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(q=r.hidden):r=Ha.access(a,"fxshow",{display:j}),f&&(r.hidden=!q),q&&p([a],!0),m.done(function(){q||p([a]),Ha.remove(a,"fxshow");for(d in n)ma.style(a,d,n[d])})),i=O(q?r[d]:0,d,m),d in r||(r[d]=i.start,q&&(i.end=i.start,i.start=0))}}function Q(a,b){var c,d,e,f,g;for(c in a)if(d=ma.camelCase(c),e=b[d],f=a[c],ma.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ma.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function R(a,b,c){var d,e,f=0,g=R.prefilters.length,h=ma.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=lb||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ma.extend({},b),opts:ma.extend(!0,{specialEasing:{},easing:ma.easing._default},c),originalProperties:b,originalOptions:c,startTime:lb||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ma.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Q(k,j.opts.specialEasing);g>f;f++)if(d=R.prefilters[f].call(j,a,k,j.opts))return ma.isFunction(d.stop)&&(ma._queueHooks(j.elem,j.opts.queue).stop=ma.proxy(d.stop,d)),d;return ma.map(k,O,j),ma.isFunction(j.opts.start)&&j.opts.start.call(a,j),ma.fx.timer(ma.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function S(a){return a.getAttribute&&a.getAttribute("class")||""}function T(a,b,c,d){var e;if(ma.isArray(b))ma.each(b,function(b,e){c||Ab.test(a)?d(a,e):T(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==ma.type(b))d(a,b);else for(e in b)T(a+"["+e+"]",b[e],c,d)}function U(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ca)||[];if(ma.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function V(a,b,c,d){function e(h){var i;return f[h]=!0,ma.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Mb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function W(a,b){var c,d,e=ma.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&ma.extend(!0,a,d),a}function X(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Y(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Z(a){return ma.isWindow(a)?a:9===a.nodeType&&a.defaultView}var $=[],_=a.document,aa=Object.getPrototypeOf,ba=$.slice,ca=$.concat,da=$.push,ea=$.indexOf,fa={},ga=fa.toString,ha=fa.hasOwnProperty,ia=ha.toString,ja=ia.call(Object),ka={},la="3.1.0",ma=function(a,b){return new ma.fn.init(a,b)},na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^-ms-/,pa=/-([a-z])/g,qa=function(a,b){return b.toUpperCase()};ma.fn=ma.prototype={jquery:la,constructor:ma,length:0,toArray:function(){return ba.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:ba.call(this)},pushStack:function(a){var b=ma.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return ma.each(this,a)},map:function(a){return this.pushStack(ma.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:da,sort:$.sort,splice:$.splice},ma.extend=ma.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ma.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(ma.isPlainObject(d)||(e=ma.isArray(d)))?(e?(e=!1,f=c&&ma.isArray(c)?c:[]):f=c&&ma.isPlainObject(c)?c:{},g[b]=ma.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},ma.extend({expando:"jQuery"+(la+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ma.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=ma.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return a&&"[object Object]"===ga.call(a)?(b=aa(a))?(c=ha.call(b,"constructor")&&b.constructor,"function"==typeof c&&ia.call(c)===ja):!0:!1},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?fa[ga.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(oa,"ms-").replace(pa,qa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;c>e&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?ma.merge(c,"string"==typeof a?[a]:a):da.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ea.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;e>g;g++)f=b(a[g],g,c),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,c),null!=f&&h.push(f);return ca.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),ma.isFunction(a)?(d=ba.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ba.call(arguments)))},e.guid=a.guid=a.guid||ma.guid++,e):void 0},now:Date.now,support:ka}),"function"==typeof Symbol&&(ma.fn[Symbol.iterator]=$[Symbol.iterator]),ma.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){fa["[object "+b+"]"]=b.toLowerCase()});var ra=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(p){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&b.disabled===!1&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ya(b))!==a)}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;e>d&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,d>h&&t(a.slice(h,d)),e>d&&t(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,wa=function(a,b){return b?"\x00"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(za){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}},x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}}):(delete x.find.ID,x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&J?b.getElementsByClassName(a):void 0},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){
if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){(!d||(e=ia.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&w.getById&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ma.find=ra,ma.expr=ra.selectors,ma.expr[":"]=ma.expr.pseudos,ma.uniqueSort=ma.unique=ra.uniqueSort,ma.text=ra.getText,ma.isXMLDoc=ra.isXML,ma.contains=ra.contains,ma.escapeSelector=ra.escape;var sa=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&ma(a).is(c))break;d.push(a)}return d},ta=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},ua=ma.expr.match.needsContext,va=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,wa=/^.[^:#\[\.,]*$/;ma.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ma.find.matchesSelector(d,a)?[d]:[]:ma.find.matches(a,ma.grep(b,function(a){return 1===a.nodeType}))},ma.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(ma(a).filter(function(){for(b=0;d>b;b++)if(ma.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;d>b;b++)ma.find(a,e[b],c);return d>1?ma.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&ua.test(a)?ma(a):a||[],!1).length}});var xa,ya=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,za=ma.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||xa,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ya.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof ma?b[0]:b,ma.merge(this,ma.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:_,!0)),va.test(d[1])&&ma.isPlainObject(b))for(d in b)ma.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=_.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):ma.isFunction(a)?void 0!==c.ready?c.ready(a):a(ma):ma.makeArray(a,this)};za.prototype=ma.fn,xa=ma(_);var Aa=/^(?:parents|prev(?:Until|All))/,Ba={children:!0,contents:!0,next:!0,prev:!0};ma.fn.extend({has:function(a){var b=ma(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(ma.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&ma(a);if(!ua.test(a))for(;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ma.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ma.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ea.call(ma(a),this[0]):ea.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ma.uniqueSort(ma.merge(this.get(),ma(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ma.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return sa(a,"parentNode")},parentsUntil:function(a,b,c){return sa(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return sa(a,"nextSibling")},prevAll:function(a){return sa(a,"previousSibling")},nextUntil:function(a,b,c){return sa(a,"nextSibling",c)},prevUntil:function(a,b,c){return sa(a,"previousSibling",c)},siblings:function(a){return ta((a.parentNode||{}).firstChild,a)},children:function(a){return ta(a.firstChild)},contents:function(a){return a.contentDocument||ma.merge([],a.childNodes)}},function(a,b){ma.fn[a]=function(c,d){var e=ma.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ma.filter(d,e)),this.length>1&&(Ba[a]||ma.uniqueSort(e),Aa.test(a)&&e.reverse()),this.pushStack(e)}});var Ca=/\S+/g;ma.Callbacks=function(a){a="string"==typeof a?g(a):ma.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)f[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function d(b){ma.each(b,function(b,c){ma.isFunction(c)?a.unique&&k.has(c)||f.push(c):c&&c.length&&"string"!==ma.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return ma.each(arguments,function(a,b){for(var c;(c=ma.inArray(b,f,c))>-1;)f.splice(c,1),i>=c&&i--}),this},has:function(a){return a?ma.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},ma.extend({Deferred:function(b){var c=[["notify","progress",ma.Callbacks("memory"),ma.Callbacks("memory"),2],["resolve","done",ma.Callbacks("once memory"),ma.Callbacks("once memory"),0,"resolved"],["reject","fail",ma.Callbacks("once memory"),ma.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return ma.Deferred(function(b){ma.each(c,function(c,d){var e=ma.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&ma.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(g>b)){if(a=d.apply(j,k),a===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,ma.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){ma.Deferred.exceptionHook&&ma.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(ma.Deferred.getStackHook&&(m.stackTrace=ma.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return ma.Deferred(function(a){c[0][3].add(f(0,a,ma.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,ma.isFunction(b)?b:h)),c[2][3].add(f(0,a,ma.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?ma.extend(a,e):e}},f={};return ma.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ba.call(arguments),f=ma.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ba.call(arguments):c,--b||f.resolveWith(d,e)}};if(1>=b&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||ma.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Da=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ma.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Da.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},ma.readyException=function(b){a.setTimeout(function(){throw b})};var Ea=ma.Deferred();ma.fn.ready=function(a){return Ea.then(a)["catch"](function(a){ma.readyException(a)}),this},ma.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ma.readyWait++:ma.ready(!0)},ready:function(a){(a===!0?--ma.readyWait:ma.isReady)||(ma.isReady=!0,a!==!0&&--ma.readyWait>0||Ea.resolveWith(_,[ma]))}}),ma.ready.then=Ea.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?a.setTimeout(ma.ready):(_.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Fa=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ma.type(c)){e=!0;for(h in c)Fa(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ma.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ma(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ga=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ga(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[ma.camelCase(b)]=c;else for(d in b)e[ma.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][ma.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){ma.isArray(b)?b=b.map(ma.camelCase):(b=ma.camelCase(b),b=b in d?[b]:b.match(Ca)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||ma.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!ma.isEmptyObject(b)}};var Ha=new l,Ia=new l,Ja=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ka=/[A-Z]/g;ma.extend({hasData:function(a){return Ia.hasData(a)||Ha.hasData(a)},data:function(a,b,c){return Ia.access(a,b,c)},removeData:function(a,b){Ia.remove(a,b)},_data:function(a,b,c){return Ha.access(a,b,c)},_removeData:function(a,b){Ha.remove(a,b)}}),ma.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ia.get(f),1===f.nodeType&&!Ha.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ma.camelCase(d.slice(5)),m(f,d,e[d])));Ha.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ia.set(this,a)}):Fa(this,function(b){var c;if(f&&void 0===b){if(c=Ia.get(f,a),void 0!==c)return c;if(c=m(f,a),void 0!==c)return c}else this.each(function(){Ia.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ia.remove(this,a)})}}),ma.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=Ha.get(a,b),c&&(!d||ma.isArray(c)?d=Ha.access(a,b,ma.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ma.queue(a,b),d=c.length,e=c.shift(),f=ma._queueHooks(a,b),g=function(){ma.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ha.get(a,c)||Ha.access(a,c,{empty:ma.Callbacks("once memory").add(function(){Ha.remove(a,[b+"queue",c])})})}}),ma.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ma.queue(this[0],a):void 0===b?this:this.each(function(){var c=ma.queue(this,a,b);ma._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ma.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ma.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ma.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Ha.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var La=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ma=new RegExp("^(?:([+-])=|)("+La+")([a-z%]*)$","i"),Na=["Top","Right","Bottom","Left"],Oa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&ma.contains(a.ownerDocument,a)&&"none"===ma.css(a,"display")},Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa={};ma.fn.extend({show:function(){return p(this,!0)},hide:function(){return p(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Oa(this)?ma(this).show():ma(this).hide()})}});var Ra=/^(?:checkbox|radio)$/i,Sa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ta=/^$|\/(?:java|ecma)script/i,Ua={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ua.optgroup=Ua.option,Ua.tbody=Ua.tfoot=Ua.colgroup=Ua.caption=Ua.thead,Ua.th=Ua.td;var Va=/<|&#?\w+;/;!function(){var a=_.createDocumentFragment(),b=a.appendChild(_.createElement("div")),c=_.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ka.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ka.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Wa=_.documentElement,Xa=/^key/,Ya=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Za=/^([^.]*)(?:\.(.+)|)/;ma.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&ma.find.matchesSelector(Wa,e),c.guid||(c.guid=ma.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof ma&&ma.event.triggered!==b.type?ma.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ca)||[""],j=b.length;j--;)h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=ma.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=ma.event.special[n]||{},k=ma.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ma.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),ma.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ha.hasData(a)&&Ha.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ca)||[""],j=b.length;j--;)if(h=Za.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ma.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ma.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)ma.event.remove(a,n+b[j],c,d,!0);ma.isEmptyObject(i)&&Ha.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=ma.event.fix(a),i=new Array(arguments.length),j=(Ha.get(this,"events")||{})[h.type]||[],k=ma.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,h)!==!1){for(g=ma.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)(!h.rnamespace||h.rnamespace.test(f.namespace))&&(h.handleObj=f,h.data=f.data,d=((ma.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i),void 0!==d&&(h.result=d)===!1&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?ma(e,this).index(i)>-1:ma.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(ma.Event.prototype,a,{enumerable:!0,configurable:!0,get:ma.isFunction(b)?function(){return this.originalEvent?b(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[a]:void 0},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[ma.expando]?a:new ma.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==v()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===v()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ma.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return ma.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},ma.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},ma.Event=function(a,b){return this instanceof ma.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?t:u,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&ma.extend(this,b),this.timeStamp=a&&a.timeStamp||ma.now(),void(this[ma.expando]=!0)):new ma.Event(a,b)},ma.Event.prototype={constructor:ma.Event,isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=t,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=t,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=t,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},ma.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Xa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Ya.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},ma.event.addProp),ma.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ma.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ma.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ma.fn.extend({on:function(a,b,c,d){return w(this,a,b,c,d)},one:function(a,b,c,d){return w(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ma(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=u),this.each(function(){ma.event.remove(this,a,c,b)})}});var $a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_a=/<script|<style|<link/i,ab=/checked\s*(?:[^=]|=\s*.checked.)/i,bb=/^true\/(.*)/,cb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ma.extend({htmlPrefilter:function(a){return a.replace($a,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=ma.contains(a.ownerDocument,a);if(!(ka.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ma.isXMLDoc(a)))for(g=q(h),f=q(a),d=0,e=f.length;e>d;d++)B(f[d],g[d]);if(b)if(c)for(f=f||q(a),g=g||q(h),d=0,e=f.length;e>d;d++)A(f[d],g[d]);else A(a,h);return g=q(h,"script"),g.length>0&&r(g,!i&&q(a,"script")),h},cleanData:function(a){for(var b,c,d,e=ma.event.special,f=0;void 0!==(c=a[f]);f++)if(Ga(c)){if(b=c[Ha.expando]){if(b.events)for(d in b.events)e[d]?ma.event.remove(c,d):ma.removeEvent(c,d,b.handle);c[Ha.expando]=void 0}c[Ia.expando]&&(c[Ia.expando]=void 0)}}}),ma.fn.extend({detach:function(a){return D(this,a,!0)},remove:function(a){return D(this,a)},text:function(a){return Fa(this,function(a){return void 0===a?ma.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.appendChild(a)}})},prepend:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(ma.cleanData(q(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ma.clone(this,a,b)})},html:function(a){return Fa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!_a.test(a)&&!Ua[(Sa.exec(a)||["",""])[1].toLowerCase()]){a=ma.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ma.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return C(this,arguments,function(b){var c=this.parentNode;ma.inArray(this,a)<0&&(ma.cleanData(q(this)),c&&c.replaceChild(b,this))},a)}}),ma.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ma.fn[a]=function(a){for(var c,d=[],e=ma(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),ma(e[g])[b](c),da.apply(d,c.get());return this.pushStack(d)}});var db=/^margin/,eb=new RegExp("^("+La+")(?!px)[a-z%]+$","i"),fb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Wa.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Wa.removeChild(g),h=null}}var c,d,e,f,g=_.createElement("div"),h=_.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ka.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),
ma.extend(ka,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var gb=/^(none|table(?!-c[ea]).+)/,hb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:"0",fontWeight:"400"},jb=["Webkit","Moz","ms"],kb=_.createElement("div").style;ma.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=E(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ma.camelCase(b),i=a.style;return b=ma.cssProps[h]||(ma.cssProps[h]=G(h)||h),g=ma.cssHooks[b]||ma.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ma.exec(c))&&e[1]&&(c=n(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(ma.cssNumber[h]?"":"px")),ka.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=ma.camelCase(b);return b=ma.cssProps[h]||(ma.cssProps[h]=G(h)||h),g=ma.cssHooks[b]||ma.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=E(a,b,d)),"normal"===e&&b in ib&&(e=ib[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),ma.each(["height","width"],function(a,b){ma.cssHooks[b]={get:function(a,c,d){return c?!gb.test(ma.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?J(a,b,d):Pa(a,hb,function(){return J(a,b,d)}):void 0},set:function(a,c,d){var e,f=d&&fb(a),g=d&&I(a,b,d,"border-box"===ma.css(a,"boxSizing",!1,f),f);return g&&(e=Ma.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=ma.css(a,b)),H(a,c,g)}}}),ma.cssHooks.marginLeft=F(ka.reliableMarginLeft,function(a,b){return b?(parseFloat(E(a,"marginLeft"))||a.getBoundingClientRect().left-Pa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),ma.each({margin:"",padding:"",border:"Width"},function(a,b){ma.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Na[d]+b]=f[d]||f[d-2]||f[0];return e}},db.test(a)||(ma.cssHooks[a+b].set=H)}),ma.fn.extend({css:function(a,b){return Fa(this,function(a,b,c){var d,e,f={},g=0;if(ma.isArray(b)){for(d=fb(a),e=b.length;e>g;g++)f[b[g]]=ma.css(a,b[g],!1,d);return f}return void 0!==c?ma.style(a,b,c):ma.css(a,b)},a,b,arguments.length>1)}}),ma.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||ma.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ma.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=ma.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=ma.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){ma.fx.step[a.prop]?ma.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[ma.cssProps[a.prop]]&&!ma.cssHooks[a.prop]?a.elem[a.prop]=a.now:ma.style(a.elem,a.prop,a.now+a.unit)}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ma.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},ma.fx=K.prototype.init,ma.fx.step={};var lb,mb,nb=/^(?:toggle|show|hide)$/,ob=/queueHooks$/;ma.Animation=ma.extend(R,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return n(c.elem,a,Ma.exec(b),c),c}]},tweener:function(a,b){ma.isFunction(a)?(b=a,a=["*"]):a=a.match(Ca);for(var c,d=0,e=a.length;e>d;d++)c=a[d],R.tweeners[c]=R.tweeners[c]||[],R.tweeners[c].unshift(b)},prefilters:[P],prefilter:function(a,b){b?R.prefilters.unshift(a):R.prefilters.push(a)}}),ma.speed=function(a,b,c){var d=a&&"object"==typeof a?ma.extend({},a):{complete:c||!c&&b||ma.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ma.isFunction(b)&&b};return ma.fx.off||_.hidden?d.duration=0:d.duration="number"==typeof d.duration?d.duration:d.duration in ma.fx.speeds?ma.fx.speeds[d.duration]:ma.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ma.isFunction(d.old)&&d.old.call(this),d.queue&&ma.dequeue(this,d.queue)},d},ma.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Oa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ma.isEmptyObject(a),f=ma.speed(b,c,d),g=function(){var b=R(this,ma.extend({},a),f);(e||Ha.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ma.timers,g=Ha.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ob.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ma.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Ha.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ma.timers,g=d?d.length:0;for(c.finish=!0,ma.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ma.each(["toggle","show","hide"],function(a,b){var c=ma.fn[b];ma.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),ma.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ma.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ma.timers=[],ma.fx.tick=function(){var a,b=0,c=ma.timers;for(lb=ma.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||ma.fx.stop(),lb=void 0},ma.fx.timer=function(a){ma.timers.push(a),a()?ma.fx.start():ma.timers.pop()},ma.fx.interval=13,ma.fx.start=function(){mb||(mb=a.requestAnimationFrame?a.requestAnimationFrame(L):a.setInterval(ma.fx.tick,ma.fx.interval))},ma.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(mb):a.clearInterval(mb),mb=null},ma.fx.speeds={slow:600,fast:200,_default:400},ma.fn.delay=function(b,c){return b=ma.fx?ma.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=_.createElement("input"),b=_.createElement("select"),c=b.appendChild(_.createElement("option"));a.type="checkbox",ka.checkOn=""!==a.value,ka.optSelected=c.selected,a=_.createElement("input"),a.value="t",a.type="radio",ka.radioValue="t"===a.value}();var pb,qb=ma.expr.attrHandle;ma.fn.extend({attr:function(a,b){return Fa(this,ma.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ma.removeAttr(this,a)})}}),ma.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?ma.prop(a,b,c):(1===f&&ma.isXMLDoc(a)||(e=ma.attrHooks[b.toLowerCase()]||(ma.expr.match.bool.test(b)?pb:void 0)),void 0!==c?null===c?void ma.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=ma.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ka.radioValue&&"radio"===b&&ma.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ca);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),pb={set:function(a,b,c){return b===!1?ma.removeAttr(a,c):a.setAttribute(c,c),c}},ma.each(ma.expr.match.bool.source.match(/\w+/g),function(a,b){var c=qb[b]||ma.find.attr;qb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=qb[g],qb[g]=e,e=null!=c(a,b,d)?g:null,qb[g]=f),e}});var rb=/^(?:input|select|textarea|button)$/i,sb=/^(?:a|area)$/i;ma.fn.extend({prop:function(a,b){return Fa(this,ma.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[ma.propFix[a]||a]})}}),ma.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&ma.isXMLDoc(a)||(b=ma.propFix[b]||b,e=ma.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ma.find.attr(a,"tabindex");return b?parseInt(b,10):rb.test(a.nodeName)||sb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ka.optSelected||(ma.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),ma.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ma.propFix[this.toLowerCase()]=this});var tb=/[\t\r\n\f]/g;ma.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(ma.isFunction(a))return this.each(function(b){ma(this).addClass(a.call(this,b,S(this)))});if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=ma.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(ma.isFunction(a))return this.each(function(b){ma(this).removeClass(a.call(this,b,S(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ca)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(tb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=ma.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ma.isFunction(a)?this.each(function(c){ma(this).toggleClass(a.call(this,c,S(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=ma(this),f=a.match(Ca)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(void 0===a||"boolean"===c)&&(b=S(this),b&&Ha.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":Ha.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+S(c)+" ").replace(tb," ").indexOf(b)>-1)return!0;return!1}});var ub=/\r/g,vb=/[\x20\t\r\n\f]+/g;ma.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ma.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ma(this).val()):a,null==e?e="":"number"==typeof e?e+="":ma.isArray(e)&&(e=ma.map(e,function(a){return null==a?"":a+""})),b=ma.valHooks[this.type]||ma.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ma.valHooks[e.type]||ma.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ma.extend({valHooks:{option:{get:function(a){var b=ma.find.attr(a,"value");return null!=b?b:ma.trim(ma.text(a)).replace(vb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!ma.nodeName(c.parentNode,"optgroup"))){if(b=ma(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ma.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ma.inArray(ma.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),ma.each(["radio","checkbox"],function(){ma.valHooks[this]={set:function(a,b){return ma.isArray(b)?a.checked=ma.inArray(ma(a).val(),b)>-1:void 0}},ka.checkOn||(ma.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wb=/^(?:focusinfocus|focusoutblur)$/;ma.extend(ma.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||_],n=ha.call(b,"type")?b.type:b,o=ha.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||_,3!==d.nodeType&&8!==d.nodeType&&!wb.test(n+ma.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[ma.expando]?b:new ma.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ma.makeArray(c,[b]),l=ma.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!ma.isWindow(d)){for(i=l.delegateType||n,wb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||_)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ha.get(g,"events")||{})[b.type]&&Ha.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&Ga(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!Ga(d)||j&&ma.isFunction(d[n])&&!ma.isWindow(d)&&(h=d[j],h&&(d[j]=null),ma.event.triggered=n,d[n](),ma.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=ma.extend(new ma.Event,c,{type:a,isSimulated:!0});ma.event.trigger(d,null,b)}}),ma.fn.extend({trigger:function(a,b){return this.each(function(){ma.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ma.event.trigger(a,b,c,!0):void 0}}),ma.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){ma.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ma.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ka.focusin="onfocusin"in a,ka.focusin||ma.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ma.event.simulate(b,a.target,ma.event.fix(a))};ma.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ha.access(d,b);e||d.addEventListener(a,c,!0),Ha.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ha.access(d,b)-1;e?Ha.access(d,b,e):(d.removeEventListener(a,c,!0),Ha.remove(d,b))}}});var xb=a.location,yb=ma.now(),zb=/\?/;ma.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return(!c||c.getElementsByTagName("parsererror").length)&&ma.error("Invalid XML: "+b),c};var Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ma.param=function(a,b){var c,d=[],e=function(a,b){var c=ma.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(ma.isArray(a)||a.jquery&&!ma.isPlainObject(a))ma.each(a,function(){e(this.name,this.value)});else for(c in a)T(c,a[c],b,e);return d.join("&")},ma.fn.extend({serialize:function(){return ma.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ma.prop(this,"elements");return a?ma.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ma(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!Ra.test(a))}).map(function(a,b){var c=ma(this).val();return null==c?null:ma.isArray(c)?ma.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}});var Eb=/%20/g,Fb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ib=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Lb={},Mb={},Nb="*/".concat("*"),Ob=_.createElement("a");Ob.href=xb.href,ma.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:Ib.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ma.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?W(W(a,ma.ajaxSettings),b):W(ma.ajaxSettings,a)},ajaxPrefilter:U(Lb),ajaxTransport:U(Mb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=X(o,x,d)),u=Y(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(ma.lastModified[f]=v),v=x.getResponseHeader("etag"),v&&(ma.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,(b||!w)&&(w="error",0>b&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--ma.active||ma.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=ma.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?ma(p):ma.event,r=ma.Deferred(),s=ma.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Hb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||xb.href)+"").replace(Kb,xb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ca)||[""],null==o.crossDomain){j=_.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ob.protocol+"//"+Ob.host!=j.protocol+"//"+j.host}catch(y){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=ma.param(o.data,o.traditional)),V(Lb,o,c,x),k)return x;l=ma.event&&o.global,l&&0===ma.active++&&ma.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Jb.test(o.type),f=o.url.replace(Fb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Eb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(zb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Gb,""),n=(zb.test(f)?"&":"?")+"_="+yb++ +n),o.url=f+n),o.ifModified&&(ma.lastModified[f]&&x.setRequestHeader("If-Modified-Since",ma.lastModified[f]),ma.etag[f]&&x.setRequestHeader("If-None-Match",ma.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Nb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,x,o)===!1||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=V(Mb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(y){if(k)throw y;d(-1,y)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return ma.get(a,b,c,"json")},getScript:function(a,b){return ma.get(a,void 0,b,"script")}}),ma.each(["get","post"],function(a,b){ma[b]=function(a,c,d,e){return ma.isFunction(c)&&(e=e||d,d=c,c=void 0),ma.ajax(ma.extend({url:a,type:b,dataType:e,data:c,success:d},ma.isPlainObject(a)&&a))}}),ma._evalUrl=function(a){return ma.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ma.fn.extend({wrapAll:function(a){var b;return this[0]&&(ma.isFunction(a)&&(a=a.call(this[0])),b=ma(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return ma.isFunction(a)?this.each(function(b){ma(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ma(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ma.isFunction(a);return this.each(function(c){ma(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){ma(this).replaceWith(this.childNodes)}),this}}),ma.expr.pseudos.hidden=function(a){return!ma.expr.pseudos.visible(a)},ma.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},ma.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Pb={0:200,1223:204},Qb=ma.ajaxSettings.xhr();ka.cors=!!Qb&&"withCredentials"in Qb,ka.ajax=Qb=!!Qb,ma.ajaxTransport(function(b){var c,d;return ka.cors||Qb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Pb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),ma.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),ma.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return ma.globalEval(a),a}}}),ma.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),ma.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=ma("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),_.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Rb=[],Sb=/(=)\?(?=&|$)|\?\?/;ma.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Rb.pop()||ma.expando+"_"+yb++;return this[a]=!0,a}}),ma.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Sb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ma.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Sb,"$1"+e):b.jsonp!==!1&&(b.url+=(zb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ma.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?ma(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Rb.push(e)),g&&ma.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ka.createHTMLDocument=function(){var a=_.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),ma.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ka.createHTMLDocument?(b=_.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=_.location.href,b.head.appendChild(d)):b=_),e=va.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=s([a],b,f),f&&f.length&&ma(f).remove(),ma.merge([],e.childNodes))},ma.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=ma.trim(a.slice(h)),a=a.slice(0,h)),ma.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&ma.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?ma("<div>").append(ma.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},ma.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ma.fn[b]=function(a){return this.on(b,a)}}),ma.expr.pseudos.animated=function(a){return ma.grep(ma.timers,function(b){return a===b.elem}).length},ma.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ma.css(a,"position"),l=ma(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ma.css(a,"top"),i=ma.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ma.isFunction(b)&&(b=b.call(a,c,ma.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ma.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ma.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Z(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===ma.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ma.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+ma.css(a[0],"borderTopWidth",!0),left:d.left+ma.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-ma.css(c,"marginTop",!0),left:b.left-d.left-ma.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===ma.css(a,"position");)a=a.offsetParent;return a||Wa})}}),ma.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;ma.fn[a]=function(d){return Fa(this,function(a,d,e){var f=Z(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),ma.each(["top","left"],function(a,b){ma.cssHooks[b]=F(ka.pixelPosition,function(a,c){return c?(c=E(a,b),eb.test(c)?ma(a).position()[b]+"px":c):void 0})}),ma.each({Height:"height",Width:"width"},function(a,b){ma.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ma.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return Fa(this,function(b,c,e){var f;return ma.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?ma.css(b,c,h):ma.style(b,c,e,h)},b,g?e:void 0,g)}})}),ma.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),ma.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ma});var Tb=a.jQuery,Ub=a.$;return ma.noConflict=function(b){return a.$===ma&&(a.$=Ub),b&&a.jQuery===ma&&(a.jQuery=Tb),ma},b||(a.jQuery=a.$=ma),ma})},{}],24:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.moment=d()}(this,function(){"use strict";function c(){return od.apply(null,arguments)}function d(a){od=a}function e(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function f(a){return"[object Object]"===Object.prototype.toString.call(a)}function g(a){var b;for(b in a)return!1;return!0}function h(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function i(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function j(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,b){for(var c in b)j(b,c)&&(a[c]=b[c]);return j(b,"toString")&&(a.toString=b.toString),j(b,"valueOf")&&(a.valueOf=b.valueOf),a}function l(a,b,c,d){return sb(a,b,c,d,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function n(a){return null==a._pf&&(a._pf=m()),a._pf}function o(a){if(null==a._isValid){var b=n(a),c=pd.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function p(a){var b=l(NaN);return null!=a?k(n(b),a):n(b).userInvalidated=!0,b}function q(a){return void 0===a}function r(a,b){var c,d,e;if(q(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),q(b._i)||(a._i=b._i),q(b._f)||(a._f=b._f),q(b._l)||(a._l=b._l),q(b._strict)||(a._strict=b._strict),q(b._tzm)||(a._tzm=b._tzm),q(b._isUTC)||(a._isUTC=b._isUTC),q(b._offset)||(a._offset=b._offset),q(b._pf)||(a._pf=n(b)),q(b._locale)||(a._locale=b._locale),qd.length>0)for(c in qd)d=qd[c],e=b[d],q(e)||(a[d]=e);return a}function s(a){r(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),rd===!1&&(rd=!0,c.updateOffset(this),rd=!1)}function t(a){return a instanceof s||null!=a&&null!=a._isAMomentObject}function u(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function v(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=u(b)),c}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&v(a[d])!==v(b[d]))&&g++;return g+f}function x(a){c.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function y(a,b){var d=!0;return k(function(){return null!=c.deprecationHandler&&c.deprecationHandler(null,a),d&&(x(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),d=!1),b.apply(this,arguments)},b)}function z(a,b){null!=c.deprecationHandler&&c.deprecationHandler(a,b),sd[a]||(x(b),sd[a]=!0)}function A(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a){var b,c;for(c in a)b=a[c],A(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source);
}function C(a,b){var c,d=k({},a);for(c in b)j(b,c)&&(f(a[c])&&f(b[c])?(d[c]={},k(d[c],a[c]),k(d[c],b[c])):null!=b[c]?d[c]=b[c]:delete d[c]);for(c in a)j(a,c)&&!j(b,c)&&f(a[c])&&(d[c]=k({},d[c]));return d}function D(a){null!=a&&this.set(a)}function E(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return A(d)?d.call(b,c):d}function F(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function G(){return this._invalidDate}function H(a){return this._ordinal.replace("%d",a)}function I(a,b,c,d){var e=this._relativeTime[c];return A(e)?e(a,b,c,d):e.replace(/%d/i,a)}function J(a,b){var c=this._relativeTime[a>0?"future":"past"];return A(c)?c(b):c.replace(/%s/i,b)}function K(a,b){var c=a.toLowerCase();Bd[c]=Bd[c+"s"]=Bd[b]=a}function L(a){return"string"==typeof a?Bd[a]||Bd[a.toLowerCase()]:void 0}function M(a){var b,c,d={};for(c in a)j(a,c)&&(b=L(c),b&&(d[b]=a[c]));return d}function N(a,b){Cd[a]=b}function O(a){var b=[];for(var c in a)b.push({unit:c,priority:Cd[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function P(a,b){return function(d){return null!=d?(R(this,a,d),c.updateOffset(this,b),this):Q(this,a)}}function Q(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function R(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function S(a){return a=L(a),A(this[a])?this[a]():this}function T(a,b){if("object"==typeof a){a=M(a);for(var c=O(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=L(a),A(this[a]))return this[a](b);return this}function U(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function V(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Gd[a]=e),b&&(Gd[b[0]]=function(){return U(e.apply(this,arguments),b[1],b[2])}),c&&(Gd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function W(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function X(a){var b,c,d=a.match(Dd);for(b=0,c=d.length;c>b;b++)Gd[d[b]]?d[b]=Gd[d[b]]:d[b]=W(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function Y(a,b){return a.isValid()?(b=Z(b,a.localeData()),Fd[b]=Fd[b]||X(b),Fd[b](a)):a.localeData().invalidDate()}function Z(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ed.lastIndex=0;d>=0&&Ed.test(a);)a=a.replace(Ed,c),Ed.lastIndex=0,d-=1;return a}function $(a,b,c){Yd[a]=A(b)?b:function(a,d){return a&&c?c:b}}function _(a,b){return j(Yd,a)?Yd[a](b._strict,b._locale):new RegExp(aa(a))}function aa(a){return ba(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function ba(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ca(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=v(a)}),c=0;c<a.length;c++)Zd[a[c]]=d}function da(a,b){ca(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ea(a,b,c){null!=b&&j(Zd,a)&&Zd[a](b,c._a,c,a)}function fa(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ga(a,b){return e(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||he).test(b)?"format":"standalone"][a.month()]}function ha(a,b){return e(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[he.test(b)?"format":"standalone"][a.month()]}function ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=l([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=ud.call(this._shortMonthsParse,g),-1!==e?e:null):(e=ud.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=ud.call(this._shortMonthsParse,g),-1!==e?e:(e=ud.call(this._longMonthsParse,g),-1!==e?e:null)):(e=ud.call(this._longMonthsParse,g),-1!==e?e:(e=ud.call(this._shortMonthsParse,g),-1!==e?e:null))}function ja(a,b,c){var d,e,f;if(this._monthsParseExact)return ia.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=l([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ka(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=v(b);else if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),fa(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function la(a){return null!=a?(ka(this,a),c.updateOffset(this,!0),this):Q(this,"Month")}function ma(){return fa(this.year(),this.month())}function na(a){return this._monthsParseExact?(j(this,"_monthsRegex")||pa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(j(this,"_monthsShortRegex")||(this._monthsShortRegex=ke),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function oa(a){return this._monthsParseExact?(j(this,"_monthsRegex")||pa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(j(this,"_monthsRegex")||(this._monthsRegex=le),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function pa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=l([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=ba(d[b]),e[b]=ba(e[b]);for(b=0;24>b;b++)f[b]=ba(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function qa(a){return ra(a)?366:365}function ra(a){return a%4===0&&a%100!==0||a%400===0}function sa(){return ra(this.year())}function ta(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ua(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function va(a,b,c){var d=7+b-c,e=(7+ua(a,0,d).getUTCDay()-b)%7;return-e+d-1}function wa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=va(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=qa(f)+j):j>qa(a)?(f=a+1,g=j-qa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function xa(a,b,c){var d,e,f=va(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+ya(e,b,c)):g>ya(a.year(),b,c)?(d=g-ya(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ya(a,b,c){var d=va(a,b,c),e=va(a+1,b,c);return(qa(a)-d+e)/7}function za(a){return xa(a,this._week.dow,this._week.doy).week}function Aa(){return this._week.dow}function Ba(){return this._week.doy}function Ca(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Da(a){var b=xa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Ea(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Fa(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ga(a,b){return e(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Ha(a){return this._weekdaysShort[a.day()]}function Ia(a){return this._weekdaysMin[a.day()]}function Ja(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=l([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=ud.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=ud.call(this._weekdaysParse,g),-1!==e?e:(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:(e=ud.call(this._weekdaysParse,g),-1!==e?e:(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=ud.call(this._minWeekdaysParse,g),-1!==e?e:(e=ud.call(this._weekdaysParse,g),-1!==e?e:(e=ud.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ka(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ja.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=l([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ea(a,this.localeData()),this.add(a-b,"d")):b}function Ma(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Na(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Fa(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Oa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(j(this,"_weekdaysRegex")||(this._weekdaysRegex=re),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Pa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(j(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=se),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qa(a){return this._weekdaysParseExact?(j(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(j(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=te),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ra(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;7>b;b++)c=l([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;7>b;b++)h[b]=ba(h[b]),i[b]=ba(i[b]),j[b]=ba(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Sa(){return this.hours()%12||12}function Ta(){return this.hours()||24}function Ua(a,b){V(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Va(a,b){return b._meridiemParse}function Wa(a){return"p"===(a+"").toLowerCase().charAt(0)}function Xa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Ya(a){return a?a.toLowerCase().replace("_","-"):a}function Za(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Ya(a[f]).split("-"),b=e.length,c=Ya(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=$a(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function $a(c){var d=null;if(!ye[c]&&"undefined"!=typeof b&&b&&b.exports)try{d=ue._abbr,a("./locale/"+c),_a(d)}catch(e){}return ye[c]}function _a(a,b){var c;return a&&(c=q(b)?cb(a):ab(a,b),c&&(ue=c)),ue._abbr}function ab(a,b){if(null!==b){var c=xe;return b.abbr=a,null!=ye[a]?(z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=ye[a]._config):null!=b.parentLocale&&(null!=ye[b.parentLocale]?c=ye[b.parentLocale]._config:z("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),ye[a]=new D(C(c,b)),_a(a),ye[a]}return delete ye[a],null}function bb(a,b){if(null!=b){var c,d=xe;null!=ye[a]&&(d=ye[a]._config),b=C(d,b),c=new D(b),c.parentLocale=ye[a],ye[a]=c,_a(a)}else null!=ye[a]&&(null!=ye[a].parentLocale?ye[a]=ye[a].parentLocale:null!=ye[a]&&delete ye[a]);return ye[a]}function cb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ue;if(!e(a)){if(b=$a(a))return b;a=[a]}return Za(a)}function db(){return td(ye)}function eb(a){var b,c=a._a;return c&&-2===n(a).overflow&&(b=c[_d]<0||c[_d]>11?_d:c[ae]<1||c[ae]>fa(c[$d],c[_d])?ae:c[be]<0||c[be]>24||24===c[be]&&(0!==c[ce]||0!==c[de]||0!==c[ee])?be:c[ce]<0||c[ce]>59?ce:c[de]<0||c[de]>59?de:c[ee]<0||c[ee]>999?ee:-1,n(a)._overflowDayOfYear&&($d>b||b>ae)&&(b=ae),n(a)._overflowWeeks&&-1===b&&(b=fe),n(a)._overflowWeekday&&-1===b&&(b=ge),n(a).overflow=b),a}function fb(a){var b,c,d,e,f,g,h=a._i,i=ze.exec(h)||Ae.exec(h);if(i){for(n(a).iso=!0,b=0,c=Ce.length;c>b;b++)if(Ce[b][1].exec(i[1])){e=Ce[b][0],d=Ce[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=De.length;c>b;b++)if(De[b][1].exec(i[3])){f=(i[2]||" ")+De[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Be.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),lb(a)}else a._isValid=!1}function gb(a){var b=Ee.exec(a._i);return null!==b?void(a._d=new Date(+b[1])):(fb(a),void(a._isValid===!1&&(delete a._isValid,c.createFromInputFallback(a))))}function hb(a,b,c){return null!=a?a:null!=b?b:c}function ib(a){var b=new Date(c.now());return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function jb(a){var b,c,d,e,f=[];if(!a._d){for(d=ib(a),a._w&&null==a._a[ae]&&null==a._a[_d]&&kb(a),a._dayOfYear&&(e=hb(a._a[$d],d[$d]),a._dayOfYear>qa(e)&&(n(a)._overflowDayOfYear=!0),c=ua(e,0,a._dayOfYear),a._a[_d]=c.getUTCMonth(),a._a[ae]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[be]&&0===a._a[ce]&&0===a._a[de]&&0===a._a[ee]&&(a._nextDay=!0,a._a[be]=0),a._d=(a._useUTC?ua:ta).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[be]=24)}}function kb(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=hb(b.GG,a._a[$d],xa(tb(),1,4).year),d=hb(b.W,1),e=hb(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=hb(b.gg,a._a[$d],xa(tb(),f,g).year),d=hb(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>ya(c,f,g)?n(a)._overflowWeeks=!0:null!=i?n(a)._overflowWeekday=!0:(h=wa(c,d,e,f,g),a._a[$d]=h.year,a._dayOfYear=h.dayOfYear)}function lb(a){if(a._f===c.ISO_8601)return void fb(a);a._a=[],n(a).empty=!0;var b,d,e,f,g,h=""+a._i,i=h.length,j=0;for(e=Z(a._f,a._locale).match(Dd)||[],b=0;b<e.length;b++)f=e[b],d=(h.match(_(f,a))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&n(a).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Gd[f]?(d?n(a).empty=!1:n(a).unusedTokens.push(f),ea(f,d,a)):a._strict&&!d&&n(a).unusedTokens.push(f);n(a).charsLeftOver=i-j,h.length>0&&n(a).unusedInput.push(h),a._a[be]<=12&&n(a).bigHour===!0&&a._a[be]>0&&(n(a).bigHour=void 0),n(a).parsedDateParts=a._a.slice(0),n(a).meridiem=a._meridiem,a._a[be]=mb(a._locale,a._a[be],a._meridiem),jb(a),eb(a)}function mb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function nb(a){var b,c,d,e,f;if(0===a._f.length)return n(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=r({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],lb(b),o(b)&&(f+=n(b).charsLeftOver,f+=10*n(b).unusedTokens.length,n(b).score=f,(null==d||d>f)&&(d=f,c=b));k(a,c||b)}function ob(a){if(!a._d){var b=M(a._i);a._a=i([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),jb(a)}}function pb(a){var b=new s(eb(qb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function qb(a){var b=a._i,c=a._f;return a._locale=a._locale||cb(a._l),null===b||void 0===c&&""===b?p({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),t(b)?new s(eb(b)):(e(c)?nb(a):h(b)?a._d=b:c?lb(a):rb(a),o(a)||(a._d=null),a))}function rb(a){var b=a._i;void 0===b?a._d=new Date(c.now()):h(b)?a._d=new Date(b.valueOf()):"string"==typeof b?gb(a):e(b)?(a._a=i(b.slice(0),function(a){return parseInt(a,10)}),jb(a)):"object"==typeof b?ob(a):"number"==typeof b?a._d=new Date(b):c.createFromInputFallback(a)}function sb(a,b,c,d,h){var i={};return"boolean"==typeof c&&(d=c,c=void 0),(f(a)&&g(a)||e(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=c,i._i=a,i._f=b,i._strict=d,pb(i)}function tb(a,b,c,d){return sb(a,b,c,d,!1)}function ub(a,b){var c,d;if(1===b.length&&e(b[0])&&(b=b[0]),!b.length)return tb();for(c=b[0],d=1;d<b.length;++d)(!b[d].isValid()||b[d][a](c))&&(c=b[d]);return c}function vb(){var a=[].slice.call(arguments,0);return ub("isBefore",a)}function wb(){var a=[].slice.call(arguments,0);return ub("isAfter",a)}function xb(a){var b=M(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=cb(),this._bubble()}function yb(a){return a instanceof xb}function zb(a,b){V(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+U(~~(a/60),2)+b+U(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ie)||["-",0,0],f=+(60*e[1])+v(e[2]);return"+"===e[0]?f:-f}function Bb(a,b){var d,e;return b._isUTC?(d=b.clone(),e=(t(a)||h(a)?a.valueOf():tb(a).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),c.updateOffset(d,!1),d):tb(a).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Db(a,b){var d,e=this._offset||0;return this.isValid()?null!=a?("string"==typeof a?a=Ab(Vd,a):Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(d=Cb(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==a&&(!b||this._changeInProgress?Ub(this,Ob(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Cb(this):null!=a?this:NaN}function Eb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this}function Hb(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ab(Ud,this._i)),this}function Ib(a){return this.isValid()?(a=a?tb(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!q(this._isDSTShifted))return this._isDSTShifted;var a={};if(r(a,this),a=qb(a),a._a){var b=a._isUTC?l(a._a):tb(a._a);this._isDSTShifted=this.isValid()&&w(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return this.isValid()?!this._isUTC:!1}function Mb(){return this.isValid()?this._isUTC:!1}function Nb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Ob(a,b){var c,d,e,f=a,g=null;return yb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=Je.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:v(g[ae])*c,h:v(g[be])*c,m:v(g[ce])*c,s:v(g[de])*c,ms:v(g[ee])*c}):(g=Ke.exec(a))?(c="-"===g[1]?-1:1,f={y:Pb(g[2],c),M:Pb(g[3],c),w:Pb(g[4],c),d:Pb(g[5],c),h:Pb(g[6],c),m:Pb(g[7],c),s:Pb(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=Rb(tb(f.from),tb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new xb(f),yb(a)&&j(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Sb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Tb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(z(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ob(c,d),Ub(this,e,a),this}}function Ub(a,b,d,e){var f=b._milliseconds,g=Sb(b._days),h=Sb(b._months);a.isValid()&&(e=null==e?!0:e,f&&a._d.setTime(a._d.valueOf()+f*d),g&&R(a,"Date",Q(a,"Date")+g*d),h&&ka(a,Q(a,"Month")+h*d),e&&c.updateOffset(a,g||h))}function Vb(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"}function Wb(a,b){var d=a||tb(),e=Bb(d,this).startOf("day"),f=c.calendarFormat(this,e)||"sameElse",g=b&&(A(b[f])?b[f].call(this,d):b[f]);return this.format(g||this.localeData().calendar(f,this,tb(d)))}function Xb(){return new s(this)}function Yb(a,b){var c=t(a)?a:tb(a);return this.isValid()&&c.isValid()?(b=L(q(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function Zb(a,b){var c=t(a)?a:tb(a);return this.isValid()&&c.isValid()?(b=L(q(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function $b(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function _b(a,b){var c,d=t(a)?a:tb(a);return this.isValid()&&d.isValid()?(b=L(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function ac(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function bc(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function cc(a,b,c){var d,e,f,g;return this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=L(b),"year"===b||"month"===b||"quarter"===b?(g=dc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:u(g)):NaN):NaN}function dc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function ec(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?A(Date.prototype.toISOString)?this.toDate().toISOString():Y(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function gc(a){a||(a=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var b=Y(this,a);return this.localeData().postformat(b)}function hc(a,b){return this.isValid()&&(t(a)&&a.isValid()||tb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(tb(),a)}function jc(a,b){return this.isValid()&&(t(a)&&a.isValid()||tb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(tb(),a)}function lc(a){var b;return void 0===a?this._locale._abbr:(b=cb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){switch(a=L(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){return a=L(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){return this.isValid()?this.toISOString():null}function vc(){return o(this)}function wc(){return k({},n(this))}function xc(){return n(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){V(0,[a,a.length],0,b)}function Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return ya(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return ya(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?xa(this,d,e).year:(f=ya(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=wa(a,b,c,d,e),g=ua(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Ic(a,b){b[ee]=v(1e3*("0."+a))}function Jc(){return this._isUTC?"UTC":""}function Kc(){return this._isUTC?"Coordinated Universal Time":""}function Lc(a){return tb(1e3*a)}function Mc(){return tb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=cb(),f=l().set(d,b);return e[c](f,a)}function Pc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Oc(a,d,c,"month");return e}function Qc(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=cb(),f=a?e._week.dow:0;if(null!=c)return Oc(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Oc(b,(g+f)%7,d,"day");return h}function Rc(a,b){return Pc(a,b,"months")}function Sc(a,b){return Pc(a,b,"monthsShort")}function Tc(a,b,c){return Qc(a,b,c,"weekdays")}function Uc(a,b,c){return Qc(a,b,c,"weekdaysShort")}function Vc(a,b,c){return Qc(a,b,c,"weekdaysMin")}function Wc(){var a=this._data;return this._milliseconds=We(this._milliseconds),this._days=We(this._days),this._months=We(this._months),a.milliseconds=We(a.milliseconds),a.seconds=We(a.seconds),a.minutes=We(a.minutes),a.hours=We(a.hours),a.months=We(a.months),a.years=We(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Yc(a,b){return Xc(this,a,b,1)}function Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return 0>a?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=u(f/1e3),i.seconds=a%60,b=u(a/60),i.minutes=b%60,c=u(b/60),i.hours=c%24,g+=u(c/24),e=u(ad(g)),h+=e,g-=$c(bd(e)),d=u(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=L(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=L(a),this[a+"s"]()}function gd(a){return function(){return this._data[a]}}function hd(){return u(this.days()/7)}function id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=lf(d.as("s")),f=lf(d.as("m")),g=lf(d.as("h")),h=lf(d.as("d")),i=lf(d.as("M")),j=lf(d.as("y")),k=e<mf.s&&["s",e]||1>=f&&["m"]||f<mf.m&&["mm",f]||1>=g&&["h"]||g<mf.h&&["hh",g]||1>=h&&["d"]||h<mf.d&&["dd",h]||1>=i&&["M"]||i<mf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}function kd(a){return void 0===a?lf:"function"==typeof a?(lf=a,!0):!1}function ld(a,b){return void 0===mf[a]?!1:void 0===b?mf[a]:(mf[a]=b,!0)}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){var a,b,c,d=nf(this._milliseconds)/1e3,e=nf(this._days),f=nf(this._months);a=u(d/60),b=u(a/60),d%=60,a%=60,c=u(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var od,pd;pd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var qd=c.momentProperties=[],rd=!1,sd={};c.suppressDeprecationWarnings=!1,c.deprecationHandler=null;var td;td=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)j(a,b)&&c.push(b);return c};var ud,vd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},wd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},xd="Invalid date",yd="%d",zd=/\d{1,2}/,Ad={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Bd={},Cd={},Dd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ed=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fd={},Gd={},Hd=/\d/,Id=/\d\d/,Jd=/\d{3}/,Kd=/\d{4}/,Ld=/[+-]?\d{6}/,Md=/\d\d?/,Nd=/\d\d\d\d?/,Od=/\d\d\d\d\d\d?/,Pd=/\d{1,3}/,Qd=/\d{1,4}/,Rd=/[+-]?\d{1,6}/,Sd=/\d+/,Td=/[+-]?\d+/,Ud=/Z|[+-]\d\d:?\d\d/gi,Vd=/Z|[+-]\d\d(?::?\d\d)?/gi,Wd=/[+-]?\d+(\.\d{1,3})?/,Xd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Yd={},Zd={},$d=0,_d=1,ae=2,be=3,ce=4,de=5,ee=6,fe=7,ge=8;
ud=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),V("MMMM",0,0,function(a){return this.localeData().months(this,a)}),K("month","M"),N("month",8),$("M",Md),$("MM",Md,Id),$("MMM",function(a,b){return b.monthsShortRegex(a)}),$("MMMM",function(a,b){return b.monthsRegex(a)}),ca(["M","MM"],function(a,b){b[_d]=v(a)-1}),ca(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[_d]=e:n(c).invalidMonth=a});var he=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),je="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ke=Xd,le=Xd;V("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),K("year","y"),N("year",1),$("Y",Td),$("YY",Md,Id),$("YYYY",Qd,Kd),$("YYYYY",Rd,Ld),$("YYYYYY",Rd,Ld),ca(["YYYYY","YYYYYY"],$d),ca("YYYY",function(a,b){b[$d]=2===a.length?c.parseTwoDigitYear(a):v(a)}),ca("YY",function(a,b){b[$d]=c.parseTwoDigitYear(a)}),ca("Y",function(a,b){b[$d]=parseInt(a,10)}),c.parseTwoDigitYear=function(a){return v(a)+(v(a)>68?1900:2e3)};var me=P("FullYear",!0);V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),K("week","w"),K("isoWeek","W"),N("week",5),N("isoWeek",5),$("w",Md),$("ww",Md,Id),$("W",Md),$("WW",Md,Id),da(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=v(a)});var ne={dow:0,doy:6};V("d",0,"do","day"),V("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),V("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),V("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),K("day","d"),K("weekday","e"),K("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),$("d",Md),$("e",Md),$("E",Md),$("dd",function(a,b){return b.weekdaysMinRegex(a)}),$("ddd",function(a,b){return b.weekdaysShortRegex(a)}),$("dddd",function(a,b){return b.weekdaysRegex(a)}),da(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:n(c).invalidWeekday=a}),da(["d","e","E"],function(a,b,c,d){b[d]=v(a)});var oe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),re=Xd,se=Xd,te=Xd;V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Sa),V("k",["kk",2],0,Ta),V("hmm",0,0,function(){return""+Sa.apply(this)+U(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Sa.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Ua("a",!0),Ua("A",!1),K("hour","h"),N("hour",13),$("a",Va),$("A",Va),$("H",Md),$("h",Md),$("HH",Md,Id),$("hh",Md,Id),$("hmm",Nd),$("hmmss",Od),$("Hmm",Nd),$("Hmmss",Od),ca(["H","HH"],be),ca(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ca(["h","hh"],function(a,b,c){b[be]=v(a),n(c).bigHour=!0}),ca("hmm",function(a,b,c){var d=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d)),n(c).bigHour=!0}),ca("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d,2)),b[de]=v(a.substr(e)),n(c).bigHour=!0}),ca("Hmm",function(a,b,c){var d=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d))}),ca("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[be]=v(a.substr(0,d)),b[ce]=v(a.substr(d,2)),b[de]=v(a.substr(e))});var ue,ve=/[ap]\.?m?\.?/i,we=P("Hours",!0),xe={calendar:vd,longDateFormat:wd,invalidDate:xd,ordinal:yd,ordinalParse:zd,relativeTime:Ad,months:ie,monthsShort:je,week:ne,weekdays:oe,weekdaysMin:qe,weekdaysShort:pe,meridiemParse:ve},ye={},ze=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ae=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Be=/Z|[+-]\d\d(?::?\d\d)?/,Ce=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],De=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ee=/^\/?Date\((\-?\d+)/i;c.createFromInputFallback=y("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),c.ISO_8601=function(){};var Fe=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=tb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:p()}),Ge=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=tb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:p()}),He=function(){return Date.now?Date.now():+new Date};zb("Z",":"),zb("ZZ",""),$("Z",Vd),$("ZZ",Vd),ca(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Vd,a)});var Ie=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Je=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ke=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=xb.prototype;var Le=Tb(1,"add"),Me=Tb(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ne=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),K("weekYear","gg"),K("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),$("G",Td),$("g",Td),$("GG",Md,Id),$("gg",Md,Id),$("GGGG",Qd,Kd),$("gggg",Qd,Kd),$("GGGGG",Rd,Ld),$("ggggg",Rd,Ld),da(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=v(a)}),da(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)}),V("Q",0,"Qo","quarter"),K("quarter","Q"),N("quarter",7),$("Q",Hd),ca("Q",function(a,b){b[_d]=3*(v(a)-1)}),V("D",["DD",2],"Do","date"),K("date","D"),N("date",9),$("D",Md),$("DD",Md,Id),$("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ca(["D","DD"],ae),ca("Do",function(a,b){b[ae]=v(a.match(Md)[0],10)});var Oe=P("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),K("dayOfYear","DDD"),N("dayOfYear",4),$("DDD",Pd),$("DDDD",Jd),ca(["DDD","DDDD"],function(a,b,c){c._dayOfYear=v(a)}),V("m",["mm",2],0,"minute"),K("minute","m"),N("minute",14),$("m",Md),$("mm",Md,Id),ca(["m","mm"],ce);var Pe=P("Minutes",!1);V("s",["ss",2],0,"second"),K("second","s"),N("second",15),$("s",Md),$("ss",Md,Id),ca(["s","ss"],de);var Qe=P("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),K("millisecond","ms"),N("millisecond",16),$("S",Pd,Hd),$("SS",Pd,Id),$("SSS",Pd,Jd);var Re;for(Re="SSSS";Re.length<=9;Re+="S")$(Re,Sd);for(Re="S";Re.length<=9;Re+="S")ca(Re,Ic);var Se=P("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var Te=s.prototype;Te.add=Le,Te.calendar=Wb,Te.clone=Xb,Te.diff=cc,Te.endOf=oc,Te.format=gc,Te.from=hc,Te.fromNow=ic,Te.to=jc,Te.toNow=kc,Te.get=S,Te.invalidAt=xc,Te.isAfter=Yb,Te.isBefore=Zb,Te.isBetween=$b,Te.isSame=_b,Te.isSameOrAfter=ac,Te.isSameOrBefore=bc,Te.isValid=vc,Te.lang=Ne,Te.locale=lc,Te.localeData=mc,Te.max=Ge,Te.min=Fe,Te.parsingFlags=wc,Te.set=T,Te.startOf=nc,Te.subtract=Me,Te.toArray=sc,Te.toObject=tc,Te.toDate=rc,Te.toISOString=fc,Te.toJSON=uc,Te.toString=ec,Te.unix=qc,Te.valueOf=pc,Te.creationData=yc,Te.year=me,Te.isLeapYear=sa,Te.weekYear=Ac,Te.isoWeekYear=Bc,Te.quarter=Te.quarters=Gc,Te.month=la,Te.daysInMonth=ma,Te.week=Te.weeks=Ca,Te.isoWeek=Te.isoWeeks=Da,Te.weeksInYear=Dc,Te.isoWeeksInYear=Cc,Te.date=Oe,Te.day=Te.days=La,Te.weekday=Ma,Te.isoWeekday=Na,Te.dayOfYear=Hc,Te.hour=Te.hours=we,Te.minute=Te.minutes=Pe,Te.second=Te.seconds=Qe,Te.millisecond=Te.milliseconds=Se,Te.utcOffset=Db,Te.utc=Fb,Te.local=Gb,Te.parseZone=Hb,Te.hasAlignedHourOffset=Ib,Te.isDST=Jb,Te.isLocal=Lb,Te.isUtcOffset=Mb,Te.isUtc=Nb,Te.isUTC=Nb,Te.zoneAbbr=Jc,Te.zoneName=Kc,Te.dates=y("dates accessor is deprecated. Use date instead.",Oe),Te.months=y("months accessor is deprecated. Use month instead",la),Te.years=y("years accessor is deprecated. Use year instead",me),Te.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Eb),Te.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Kb);var Ue=Te,Ve=D.prototype;Ve.calendar=E,Ve.longDateFormat=F,Ve.invalidDate=G,Ve.ordinal=H,Ve.preparse=Nc,Ve.postformat=Nc,Ve.relativeTime=I,Ve.pastFuture=J,Ve.set=B,Ve.months=ga,Ve.monthsShort=ha,Ve.monthsParse=ja,Ve.monthsRegex=oa,Ve.monthsShortRegex=na,Ve.week=za,Ve.firstDayOfYear=Ba,Ve.firstDayOfWeek=Aa,Ve.weekdays=Ga,Ve.weekdaysMin=Ia,Ve.weekdaysShort=Ha,Ve.weekdaysParse=Ka,Ve.weekdaysRegex=Oa,Ve.weekdaysShortRegex=Pa,Ve.weekdaysMinRegex=Qa,Ve.isPM=Wa,Ve.meridiem=Xa,_a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===v(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.lang=y("moment.lang is deprecated. Use moment.locale instead.",_a),c.langData=y("moment.langData is deprecated. Use moment.localeData instead.",cb);var We=Math.abs,Xe=ed("ms"),Ye=ed("s"),Ze=ed("m"),$e=ed("h"),_e=ed("d"),af=ed("w"),bf=ed("M"),cf=ed("y"),df=gd("milliseconds"),ef=gd("seconds"),ff=gd("minutes"),gf=gd("hours"),hf=gd("days"),jf=gd("months"),kf=gd("years"),lf=Math.round,mf={s:45,m:45,h:22,d:26,M:11},nf=Math.abs,of=xb.prototype;of.abs=Wc,of.add=Yc,of.subtract=Zc,of.as=cd,of.asMilliseconds=Xe,of.asSeconds=Ye,of.asMinutes=Ze,of.asHours=$e,of.asDays=_e,of.asWeeks=af,of.asMonths=bf,of.asYears=cf,of.valueOf=dd,of._bubble=_c,of.get=fd,of.milliseconds=df,of.seconds=ef,of.minutes=ff,of.hours=gf,of.days=hf,of.weeks=hd,of.months=jf,of.years=kf,of.humanize=md,of.toISOString=nd,of.toString=nd,of.toJSON=nd,of.locale=lc,of.localeData=mc,of.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),of.lang=Ne,V("X",0,0,"unix"),V("x",0,0,"valueOf"),$("x",Td),$("X",Wd),ca("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ca("x",function(a,b,c){c._d=new Date(v(a))}),c.version="2.14.1",d(tb),c.fn=Ue,c.min=vb,c.max=wb,c.now=He,c.utc=l,c.unix=Lc,c.months=Rc,c.isDate=h,c.locale=_a,c.invalid=p,c.duration=Ob,c.isMoment=t,c.weekdays=Tc,c.parseZone=Mc,c.localeData=cb,c.isDuration=yb,c.monthsShort=Sc,c.weekdaysMin=Vc,c.defineLocale=ab,c.updateLocale=bb,c.locales=db,c.weekdaysShort=Uc,c.normalizeUnits=L,c.relativeTimeRounding=kd,c.relativeTimeThreshold=ld,c.calendarFormat=Vb,c.prototype=Ue;var pf=c;return pf})},{}],25:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],26:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}],27:[function(a,b,c){window.async=a("async"),window.jQuery=window.$=a("jquery"),window.Backbone=a("backbone"),window._=a("underscore"),a("fh-js-sdk/dist/feedhenry-forms.js"),a("fh-js-sdk/dist/appForms-backbone.js"),window.moment=a("moment"),a("bootstrap"),a("bootstrap-tagsinput"),a("bootstrap-slider"),window.attachFastClick=a("fastclick")},{async:1,backbone:2,bootstrap:5,"bootstrap-slider":3,"bootstrap-tagsinput":4,fastclick:18,"fh-js-sdk/dist/appForms-backbone.js":19,"fh-js-sdk/dist/feedhenry-forms.js":20,jquery:23,moment:24,underscore:26}]},{},[27]),function(a){function b(b,c){function f(b){return a.isArray(W.readonly)?(b=a(".dwwl",R).index(b),W.readonly[b]):W.readonly}function h(a){var b,c="";for(b in Y[a])c+='<li class="dw-v" data-val="'+b+'" style="height:'+P+"px;line-height:"+P+'px;"><div class="dw-i">'+Y[a][b]+"</div></li>";return c}function w(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)}function y(b){k=a("li.dw-v",b).eq(0).index(),l=a("li.dw-v",b).eq(-1).index(),q=a("ul",R).index(b),j=P,m=S}function z(a){var b=W.headerText;return b?"function"==typeof b?b.call(U,a):b.replace(/\{value\}/i,a):""}function G(){S.temp=$&&(null!==S.val&&S.val!=V.val()||!V.val().length)||null===S.values?W.parseValue(V.val()||"",S):S.values.slice(0),S.setValue(!0)}function H(b,c,d,e){J("validate",[R,c]),a(".dww ul",R).each(function(d){var f=a(this),g=a('li[data-val="'+S.temp[d]+'"]',f),h=g.index(),i=d==c||void 0===c;if(!g.hasClass("dw-v")){for(var j=g,k=0,l=0;j.prev().length&&!j.hasClass("dw-v");)j=j.prev(),k++;for(;g.next().length&&!g.hasClass("dw-v");)g=g.next(),l++;(k>l&&l&&2!==e||!k||!j.hasClass("dw-v")||1==e)&&g.hasClass("dw-v")?h+=l:(g=j,h-=k)}(!g.hasClass("dw-sel")||i)&&(S.temp[d]=g.attr("data-val"),a(".dw-sel",f).removeClass("dw-sel"),g.addClass("dw-sel"),S.scroll(f,d,h,b))}),S.change(d);
}function I(){function b(){a(".dwc",R).each(function(){c=a(this).outerWidth(!0),i+=c,j=c>j?c:j}),c=i>k?j:i,c=a(".dwwr",R).width(c+1).outerWidth(),f=n.outerHeight()}if("inline"!=W.display){var c,d,e,f,g,h,i=0,j=0,k=a(window).width(),l=window.innerHeight,m=a(window).scrollTop(),n=a(".dw",R),o={},p=void 0===W.anchor?V:W.anchor,l=l||a(window).height();if("modal"==W.display)b(),e=(k-c)/2,d=m+(l-f)/2;else if("bubble"==W.display){b();var q=p.offset(),r=a(".dw-arr",R),s=a(".dw-arrw-i",R),t=n.outerWidth();g=p.outerWidth(),e=q.left-(n.outerWidth(!0)-g)/2,e=e>k-t?k-(t+20):e,e=e>=0?e:20,d=q.top-(n.outerHeight()+3),m>d||q.top>m+l?(n.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),d=q.top+p.outerHeight()+3,h=d+n.outerHeight(!0)>m+l||q.top>m+l):n.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),d=d>=m?d:m,m=q.left+g/2-(e+(t-s.outerWidth())/2),m>s.outerWidth()&&(m=s.outerWidth()),r.css({left:m})}else o.width="100%","top"==W.display?d=m:"bottom"==W.display&&(d=m+l-n.outerHeight(),d=d>=0?d:0);o.top=d,o.left=e,n.css(o),a(".dwo, .dw-persp",R).height(0).height(w()),h&&a(window).scrollTop(d+n.outerHeight(!0)-l)}}function J(b,d){var e;return d.push(S),a.each([X,c],function(a,c){c[b]&&(e=c[b].apply(U,d))}),e}function K(a){var b=+a.data("pos")+1;g(a,b>l?k:b,1)}function L(a){var b=+a.data("pos")-1;g(a,k>b?l:b,2)}var M,N,O,P,Q,R,S=this,T=a.mobiscroll,U=b,V=a(U),W=C({},E),X={},Y=[],Z={},$=V.is("input"),_=!1;S.enable=function(){W.disabled=!1,$&&V.prop("disabled",!1)},S.disable=function(){W.disabled=!0,$&&V.prop("disabled",!0)},S.scroll=function(a,b,c,d,e,f){function g(){clearInterval(Z[b]),Z[b]=void 0,a.data("pos",c).closest(".dwwl").removeClass("dwa")}var h,i=(O-c)*P,f=f||x;a.attr("style",(d?B+"-transition:all "+d.toFixed(1)+"s ease-out;":"")+(A?B+"-transform:translate3d(0,"+i+"px,0);":"top:"+i+"px;")),Z[b]&&g(),d&&void 0!==e?(h=0,a.closest(".dwwl").addClass("dwa"),Z[b]=setInterval(function(){h+=.1,a.data("pos",Math.round((c-e)*Math.sin(h/d*(Math.PI/2))+e)),h>=d&&(g(),f())},100),J("onAnimStart",[b,d])):(a.data("pos",c),f())},S.setValue=function(a,b,c,d){d||(S.values=S.temp.slice(0)),_&&a&&H(c),b&&(Q=W.formatResult(S.temp),S.val=Q,$&&V.val(Q).trigger("change"))},S.validate=function(a,b){H(.2,a,!0,b)},S.change=function(b){Q=W.formatResult(S.temp),"inline"==W.display?S.setValue(!1,b):a(".dwv",R).html(z(Q)),b&&J("onChange",[Q])},S.hide=function(b){return!1===J("onClose",[Q])?!1:(a(".dwtd").prop("disabled",!1).removeClass("dwtd"),V.blur(),void(R&&("inline"!=W.display&&W.animate&&!b?(a(".dw",R).addClass("dw-"+W.animate+" dw-out"),setTimeout(function(){R.remove(),R=null},350)):(R.remove(),R=null),_=!1,a(window).unbind(".dw"))))},S.changeWheel=function(b,c){if(R){var d,e,f=0,g=b.length;for(d in W.wheels)for(e in W.wheels[d]){if(-1<a.inArray(f,b)&&(Y[f]=W.wheels[d][e],a("ul",R).eq(f).html(h(f)),g--,!g))return I(),void H(c);f++}}},S.show=function(b){if(W.disabled||_)return!1;"top"==W.display&&(W.animate="slidedown"),"bottom"==W.display&&(W.animate="slideup"),G(),J("onBeforeShow",[R]);var c,e=0,j="",k="",l="";for(W.animate&&!b&&(k='<div class="dw-persp">',l="</div>",j="dw-"+W.animate+" dw-in"),j='<div class="'+W.theme+" dw-"+W.display+'">'+("inline"==W.display?'<div class="dw dwbg dwi"><div class="dwwr">':k+'<div class="dwo"></div><div class="dw dwbg '+j+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(W.headerText?'<div class="dwv"></div>':"")),b=0;b<W.wheels.length;b++){j+='<div class="dwc'+("scroller"!=W.mode?" dwpm":" dwsc")+(W.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(c in W.wheels[b])Y[e]=W.wheels[b][c],j+='<td><div class="dwwl dwrc dwwl'+e+'">'+("scroller"!=W.mode?'<div class="dwwb dwwbp" style="height:'+P+"px;line-height:"+P+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+P+"px;line-height:"+P+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+c+'</div><div class="dww dwrc" style="height:'+W.rows*P+"px;min-width:"+W.width+'px;"><ul>',j+=h(e),j+='</ul><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',e++;j+="</tr></table></div></div>"}j+=("inline"!=W.display?'<div class="dwbc'+(W.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+W.setText+"</span></span>"+(W.button3?'<span class="dwbw dwb-n"><span class="dwb">'+W.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+W.cancelText+"</span></span></div>"+l:'<div class="dwcc"></div>')+"</div></div></div>",R=a(j),H(),"inline"!=W.display?R.appendTo("body"):V.is("div")?V.html(R):R.insertAfter(V),_=!0,"inline"!=W.display&&(a(".dwb-s span",R).click(function(){return S.hide()!==!1&&(S.setValue(!1,!0),J("onSelect",[S.val])),!1}),a(".dwb-c span",R).click(function(){return S.hide()!==!1&&J("onCancel",[S.val]),!1}),W.button3&&a(".dwb-n span",R).click(W.button3),W.scrollLock&&R.bind("touchmove",function(a){a.preventDefault()}),a("input,select").each(function(){a(this).prop("disabled")||a(this).addClass("dwtd")}),a("input,select").prop("disabled",!0),I(),a(window).bind("resize.dw",I)),R.delegate(".dwwl","DOMMouseScroll mousewheel",function(b){if(!f(this)){b.preventDefault();var b=b.originalEvent,b=b.wheelDelta?b.wheelDelta/120:b.detail?-b.detail/3:0,c=a("ul",this),d=+c.data("pos"),d=Math.round(d-b);y(c),g(c,d,0>b?1:2)}}).delegate(".dwb, .dwwb",D,function(){a(this).addClass("dwb-a")}).delegate(".dwwb",D,function(b){var c=a(this).closest(".dwwl");if(!f(c)&&!c.hasClass("dwa")){b.preventDefault(),b.stopPropagation();var d=c.find("ul"),e=a(this).hasClass("dwwbp")?K:L;o=!0,y(d),clearInterval(i),i=setInterval(function(){e(d)},W.delay),e(d)}}).delegate(".dwwl",D,function(b){b.preventDefault(),n||f(this)||o||"clickpick"==W.mode||(n=!0,p=a("ul",this),p.closest(".dwwl").addClass("dwa"),u=+p.data("pos"),y(p),v=void 0!==Z[q],r=d(b),t=new Date,s=r,S.scroll(p,q,u))}),J("onShow",[R,Q]),M.init(R,S)},S.init=function(a){M=C({defaults:{},init:x},T.themes[a.theme||W.theme]),N=T.i18n[a.lang||W.lang],C(c,a),C(W,M.defaults,N,c),S.settings=W,V.unbind(".dw"),(a=T.presets[W.preset])&&(X=a.call(U,S),C(W,X,c),C(F,X.methods)),O=Math.floor(W.rows/2),P=W.height,void 0!==V.data("dwro")&&(U.readOnly=e(V.data("dwro"))),_&&S.hide(),"inline"==W.display?S.show():(G(),$&&W.showOnFocus&&(V.data("dwro",U.readOnly),U.readOnly=!0,V.bind("focus.dw",function(){S.show()})))},S.values=null,S.val=null,S.temp=null,S.init(c)}function c(a){for(var b in a)if(void 0!==z[a[b]])return!0;return!1}function d(a){var b=a.originalEvent,c=a.changedTouches;return c||b&&b.changedTouches?b?b.changedTouches[0].pageY:c[0].pageY:a.pageY}function e(a){return!0===a||"true"==a}function f(a,b,c){return a=a>c?c:a,b>a?b:a}function g(b,c,d,e,g){var c=f(c,k,l),h=a("li",b).eq(c),i=q,e=e?c==g?.1:Math.abs(.1*(c-g)):0;m.scroll(b,i,c,e,g,function(){m.temp[i]=h.attr("data-val"),m.validate(i,d)})}function h(a,b,c){return F[b]?F[b].apply(a,Array.prototype.slice.call(c,1)):"object"==typeof b?F.init.call(a,b):a}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w={},x=function(){},y=(new Date).getTime(),z=document.createElement("modernizr").style,A=c(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),B=function(){var a,b=["Webkit","Moz","O","ms"];for(a in b)if(c([b[a]+"Transform"]))return"-"+b[a].toLowerCase();return""}(),C=a.extend,D="touchstart mousedown",E={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,formatResult:function(a){return a.join(" ")},parseValue:function(a,b){var c,d,e,f=b.settings.wheels,g=a.split(" "),h=[],i=0;for(c=0;c<f.length;c++)for(d in f[c]){if(void 0!==f[c][d][g[i]])h.push(g[i]);else for(e in f[c][d]){h.push(e);break}i++}return h}},F={init:function(a){return void 0===a&&(a={}),this.each(function(){this.id||(y+=1,this.id="scoller"+y),w[this.id]=new b(this,a)})},enable:function(){return this.each(function(){var a=w[this.id];a&&a.enable()})},disable:function(){return this.each(function(){var a=w[this.id];a&&a.disable()})},isDisabled:function(){var a=w[this[0].id];return a?a.settings.disabled:void 0},option:function(a,b){return this.each(function(){var c=w[this.id];if(c){var d={};"object"==typeof a?d=a:d[a]=b,c.init(d)}})},setValue:function(a,b,c,d){return this.each(function(){var e=w[this.id];e&&(e.temp=a,e.setValue(!0,b,c,d))})},getInst:function(){return w[this[0].id]},getValue:function(){var a=w[this[0].id];return a?a.values:void 0},show:function(){var a=w[this[0].id];return a?a.show():void 0},hide:function(){return this.each(function(){var a=w[this.id];a&&a.hide()})},destroy:function(){return this.each(function(){var b=w[this.id];b&&(b.hide(),a(this).unbind(".dw"),delete w[this.id],a(this).is("input")&&(this.readOnly=e(a(this).data("dwro"))))})}};a(document).bind("touchmove mousemove",function(a){n&&(a.preventDefault(),s=d(a),m.scroll(p,q,f(u+(r-s)/j,k-1,l+1)),v=!0)}),a(document).bind("touchend mouseup",function(b){if(n){b.preventDefault();var c,d=new Date-t,b=f(u+(r-s)/j,k-1,l+1);if(c=p.offset().top,300>d?(d=(s-r)/d,d=d*d/.0012,0>s-r&&(d=-d)):d=s-r,d||v)c=Math.round(u-d/j);else{c=Math.floor((s-c)/j);var e=a("li",p).eq(c);e.addClass("dw-hl"),setTimeout(function(){e.removeClass("dw-hl")},200)}g(p,c,0,!0,Math.round(b)),n=!1,p=null}o&&(clearInterval(i),o=!1),a(".dwb-a").removeClass("dwb-a")}),a.fn.mobiscroll=function(b){return C(this,a.mobiscroll.shorts),h(this,b,arguments)},a.mobiscroll=a.mobiscroll||{setDefaults:function(a){C(E,a)},presetShort:function(a){this.shorts[a]=function(b){return h(this,C(b,{preset:a}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}},a.scroller=a.scroller||a.mobiscroll,a.fn.scroller=a.fn.scroller||a.fn.mobiscroll}(jQuery),function(a){var b=a.mobiscroll,c=new Date,d={dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",startYear:c.getFullYear()-100,endYear:c.getFullYear()+1,monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",nowText:"Now",showNow:!1,stepHour:1,stepMinute:1,stepSecond:1,separator:" "},e=function(c){function e(a,b,c){return void 0!==p[b]?+a[p[b]]:void 0!==c?c:y[q[b]]?y[q[b]]():q[b](y)}function f(a,b){return Math.floor(a/b)*b}function g(a){var b=e(a,"h",0);return new Date(e(a,"y"),e(a,"m"),e(a,"d",1),e(a,"ap")?b+12:b,e(a,"i",0),e(a,"s",0))}var h,i=a(this),j={};if(i.is("input")){switch(i.attr("type")){case"date":h="yy-mm-dd";break;case"datetime":h="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":h="yy-mm-ddTHH:ii:ss";break;case"month":h="yy-mm",j.dateOrder="mmyy";break;case"time":h="HH:ii:ss"}var k=i.attr("min"),i=i.attr("max");k&&(j.minDate=b.parseDate(h,k)),i&&(j.maxDate=b.parseDate(h,i))}var l,m=a.extend({},d,j,c.settings),n=0,j=[],o=[],p={},q={y:"getFullYear",m:"getMonth",d:"getDate",h:function(a){return a=a.getHours(),a=w&&a>=12?a-12:a,f(a,z)},i:function(a){return f(a.getMinutes(),A)},s:function(a){return f(a.getSeconds(),B)},ap:function(a){return v&&11<a.getHours()?1:0}},r=m.preset,s=m.dateOrder,t=m.timeWheels,u=s.match(/D/),v=t.match(/a/i),w=t.match(/h/),x="datetime"==r?m.dateFormat+m.separator+m.timeFormat:"time"==r?m.timeFormat:m.dateFormat,y=new Date,z=m.stepHour,A=m.stepMinute,B=m.stepSecond,C=m.minDate||new Date(m.startYear,0,1),D=m.maxDate||new Date(m.endYear,11,31,23,59,59);if(h=h||x,r.match(/date/i)){for(a.each(["y","m","d"],function(a,b){l=s.search(RegExp(b,"i")),l>-1&&o.push({o:l,v:b})}),o.sort(function(a,b){return a.o>b.o?1:-1}),a.each(o,function(a,b){p[b.v]=a}),k={},i=0;3>i;i++)if(i==p.y){n++,k[m.yearText]={};var E=C.getFullYear(),F=D.getFullYear();for(l=E;F>=l;l++)k[m.yearText][l]=s.match(/yy/i)?l:(l+"").substr(2,2)}else if(i==p.m)for(n++,k[m.monthText]={},l=0;12>l;l++)E=s.replace(/[dy]/gi,"").replace(/mm/,9>l?"0"+(l+1):l+1).replace(/m/,l),k[m.monthText][l]=E.match(/MM/)?E.replace(/MM/,'<span class="dw-mon">'+m.monthNames[l]+"</span>"):E.replace(/M/,'<span class="dw-mon">'+m.monthNamesShort[l]+"</span>");else if(i==p.d)for(n++,k[m.dayText]={},l=1;32>l;l++)k[m.dayText][l]=s.match(/dd/i)&&10>l?"0"+l:l;j.push(k)}if(r.match(/time/i)){for(o=[],a.each(["h","i","s"],function(a,b){a=t.search(RegExp(b,"i")),a>-1&&o.push({o:a,v:b})}),o.sort(function(a,b){return a.o>b.o?1:-1}),a.each(o,function(a,b){p[b.v]=n+a}),k={},i=n;n+3>i;i++)if(i==p.h)for(n++,k[m.hourText]={},l=0;(w?12:24)>l;l+=z)k[m.hourText][l]=w&&0==l?12:t.match(/hh/i)&&10>l?"0"+l:l;else if(i==p.i)for(n++,k[m.minuteText]={},l=0;60>l;l+=A)k[m.minuteText][l]=t.match(/ii/)&&10>l?"0"+l:l;else if(i==p.s)for(n++,k[m.secText]={},l=0;60>l;l+=B)k[m.secText][l]=t.match(/ss/)&&10>l?"0"+l:l;v&&(p.ap=n++,i=t.match(/A/),k[m.ampmText]={0:i?"AM":"am",1:i?"PM":"pm"}),j.push(k)}return c.setDate=function(a,b,c,d){for(var e in p)this.temp[p[e]]=a[q[e]]?a[q[e]]():q[e](a);this.setValue(!0,b,c,d)},c.getDate=function(a){return g(a)},{button3Text:m.showNow?m.nowText:void 0,button3:m.showNow?function(){c.setDate(new Date,!1,.3,!0)}:void 0,wheels:j,headerText:function(){return b.formatDate(x,g(c.temp),m)},formatResult:function(a){return b.formatDate(h,g(a),m)},parseValue:function(a){var c,d=new Date,e=[];try{d=b.parseDate(h,a,m)}catch(f){}for(c in p)e[p[c]]=d[q[c]]?d[q[c]]():q[c](d);return e},validate:function(b){var d=c.temp,g={y:C.getFullYear(),m:0,d:1,h:0,i:0,s:0,ap:0},h={y:D.getFullYear(),m:11,d:31,h:f(w?11:23,z),i:f(59,A),s:f(59,B),ap:1},i=!0,j=!0;a.each("y,m,d,ap,h,i,s".split(","),function(c,f){if(void 0!==p[f]){var k,l,n=g[f],o=h[f],r=31,t=e(d,f),v=a("ul",b).eq(p[f]);if("d"==f&&(k=e(d,"y"),l=e(d,"m"),o=r=32-new Date(k,l,32).getDate(),u&&a("li",v).each(function(){var b=a(this),c=b.data("val"),d=new Date(k,l,c).getDay(),c=s.replace(/[my]/gi,"").replace(/dd/,10>c?"0"+c:c).replace(/d/,c);a(".dw-i",b).html(c.match(/DD/)?c.replace(/DD/,'<span class="dw-day">'+m.dayNames[d]+"</span>"):c.replace(/D/,'<span class="dw-day">'+m.dayNamesShort[d]+"</span>"))})),i&&C&&(n=C[q[f]]?C[q[f]]():q[f](C)),j&&D&&(o=D[q[f]]?D[q[f]]():q[f](D)),"y"!=f){var w=a('li[data-val="'+n+'"]',v).index(),x=a('li[data-val="'+o+'"]',v).index();a("li",v).removeClass("dw-v").slice(w,x+1).addClass("dw-v"),"d"==f&&a("li",v).removeClass("dw-h").slice(r).addClass("dw-h")}if(n>t&&(t=n),t>o&&(t=o),i&&(i=t==n),j&&(j=t==o),m.invalid&&"d"==f){var y=[];if(m.invalid.dates&&a.each(m.invalid.dates,function(a,b){b.getFullYear()==k&&b.getMonth()==l&&y.push(b.getDate()-1)}),m.invalid.daysOfWeek){var z,A=new Date(k,l,1).getDay();a.each(m.invalid.daysOfWeek,function(a,b){for(z=b-A;r>z;z+=7)z>=0&&y.push(z)})}m.invalid.daysOfMonth&&a.each(m.invalid.daysOfMonth,function(a,b){b=(b+"").split("/"),b[1]?b[0]-1==l&&y.push(b[1]-1):y.push(b[0]-1)}),a.each(y,function(b,c){a("li",v).eq(c).removeClass("dw-v")})}d[p[f]]=t}})},methods:{getDate:function(b){var c=a(this).mobiscroll("getInst");return c?c.getDate(b?c.temp:c.values):void 0},setDate:function(b,c,d,e){return void 0==c&&(c=!1),this.each(function(){var f=a(this).mobiscroll("getInst");f&&f.setDate(b,c,d,e)})}}}};a.each(["date","time","datetime"],function(a,c){b.presets[c]=e,b.presetShort(c)}),b.formatDate=function(b,c,e){if(!c)return null;var f,e=a.extend({},d,e),g=function(a){for(var c=0;f+1<b.length&&b.charAt(f+1)==a;)c++,f++;return c},h=function(a,b,c){if(b=""+b,g(a))for(;b.length<c;)b="0"+b;return b},i=function(a,b,c,d){return g(a)?d[b]:c[b]},j="",k=!1;for(f=0;f<b.length;f++)if(k)"'"!=b.charAt(f)||g("'")?j+=b.charAt(f):k=!1;else switch(b.charAt(f)){case"d":j+=h("d",c.getDate(),2);break;case"D":j+=i("D",c.getDay(),e.dayNamesShort,e.dayNames);break;case"o":j+=h("o",(c.getTime()-new Date(c.getFullYear(),0,0).getTime())/864e5,3);break;case"m":j+=h("m",c.getMonth()+1,2);break;case"M":j+=i("M",c.getMonth(),e.monthNamesShort,e.monthNames);break;case"y":j+=g("y")?c.getFullYear():(10>c.getYear()%100?"0":"")+c.getYear()%100;break;case"h":var l=c.getHours(),j=j+h("h",l>12?l-12:0==l?12:l,2);break;case"H":j+=h("H",c.getHours(),2);break;case"i":j+=h("i",c.getMinutes(),2);break;case"s":j+=h("s",c.getSeconds(),2);break;case"a":j+=11<c.getHours()?"pm":"am";break;case"A":j+=11<c.getHours()?"PM":"AM";break;case"'":g("'")?j+="'":k=!0;break;default:j+=b.charAt(f)}return j},b.parseDate=function(b,c,e){var f=new Date;if(!b||!c)return f;var g,c="object"==typeof c?c.toString():c+"",h=a.extend({},d,e),i=h.shortYearCutoff,e=f.getFullYear(),j=f.getMonth()+1,k=f.getDate(),l=-1,m=f.getHours(),f=f.getMinutes(),n=0,o=-1,p=!1,q=function(a){return(a=g+1<b.length&&b.charAt(g+1)==a)&&g++,a},r=function(a){return q(a),(a=c.substr(t).match(RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a?4:"o"==a?3:2)+"}")))?(t+=a[0].length,parseInt(a[0],10)):0},s=function(a,b,d){for(a=q(a)?d:b,b=0;b<a.length;b++)if(c.substr(t,a[b].length).toLowerCase()==a[b].toLowerCase())return t+=a[b].length,b+1;return 0},t=0;for(g=0;g<b.length;g++)if(p)"'"!=b.charAt(g)||q("'")?t++:p=!1;else switch(b.charAt(g)){case"d":k=r("d");break;case"D":s("D",h.dayNamesShort,h.dayNames);break;case"o":l=r("o");break;case"m":j=r("m");break;case"M":j=s("M",h.monthNamesShort,h.monthNames);break;case"y":e=r("y");break;case"H":m=r("H");break;case"h":m=r("h");break;case"i":f=r("i");break;case"s":n=r("s");break;case"a":o=s("a",["am","pm"],["am","pm"])-1;break;case"A":o=s("A",["am","pm"],["am","pm"])-1;break;case"'":q("'")?t++:p=!0;break;default:t++}if(100>e&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=("string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10))?0:-100)),l>-1)for(j=1,k=l;;){if(h=32-new Date(e,j-1,32).getDate(),h>=k)break;j++,k-=h}if(m=new Date(e,j-1,k,-1==o?m:o&&12>m?m+12:o||12!=m?m:0,f,n),m.getFullYear()!=e||m.getMonth()+1!=j||m.getDate()!=k)throw"Invalid date";return m}}(jQuery);